(()=>{var t={177:function(){(function(){window.up={version:"2.0.0"}}).call(this),function(){up.mockable=function(t){var e,n;return n=null,(e=function(){return(n||t).apply(null,arguments)}).mock=function(){return n=jasmine.createSpy("mockable",t)},document.addEventListener("up:framework:reset",(function(){return n=null})),e}}.call(this),function(){var t,e,n,r,o,i,s,u,a,l,p,c,h,f,d,m,y,g,v,b,w,k,E,S,L,C,_,O,F,T,R,A,x,P,q,D,M,H,j,N,z,B,U,V,K,I,W,Q,X,G,$,J,Y,Z,tt,et,nt,rt,ot,it,st,ut,at,lt,pt,ct,ht,ft,dt,mt,yt,gt,vt,bt,wt,kt,Et,St,Lt,Ct,_t,Ot,Ft,Tt,Rt,At,xt,Pt,qt,Dt,Mt,Ht,jt,Nt,zt,Bt,Ut,Vt,Kt,It,Wt,Qt,Xt,Gt,$t,Jt,Yt,Zt,te,ee,ne,re,oe,ie,se,ue,ae,le,pe,ce=[].slice,he={}.hasOwnProperty;up.util=(Ot=function(){},c=function(){return Promise.resolve()},bt=function(t){var e,n;return n=void 0,e=!1,function(){var r;return r=1<=arguments.length?ce.call(arguments,0):[],e?n:(e=!0,n=t.apply(this,r))}},at=function(t,e){return(""===(e=e.toString())||"80"===e)&&"http:"===t||"443"===e&&"https:"===t},r={host:"cross-domain",stripTrailingSlash:!1,search:!0,hash:!1},Tt=function(t,e){var n,o,i;return e=Ct(e,r),o=Dt(t),n="","cross-domain"===e.host&&(e.host=B(o)),e.host&&(n+=o.protocol+"//"+o.hostname,at(o.protocol,o.port)||(n+=":"+o.port)),i=o.pathname,e.stripTrailingSlash&&(i=i.replace(/\/$/,"")),n+=i,e.search&&(n+=o.search),e.hash&&(n+=o.hash),n},ae=function(t){return Tt(t,{host:!1})},vt=function(t,e){return Tt(t)===Tt(e)},e=location.protocol,t=location.hostname,B=function(n){var r;return(!lt(n)||-1!==n.indexOf("//"))&&(r=Dt(n),t!==r.hostname||e!==r.protocol)},Dt=function(t){var e;return J(t)?e=up.element.get(t):t.pathname?e=t:(e=document.createElement("a")).href=t,e.hostname||(e.href=e.href),"/"!==e.pathname[0]&&((e=Mt(e,["protocol","hostname","port","pathname","search","hash"])).pathname="/"+e.pathname),e},Ft=function(t){return t?t.toUpperCase():"GET"},Et=function(t){return"GET"!==t&&"HEAD"!==t},p=function(){var t,e,n,r,o,i,s;for(i=arguments[0],t=0,n=(o=2<=arguments.length?ce.call(arguments,1):[]).length;t<n;t++)for(e in r=o[t])he.call(r,e)&&(s=r[e],i[e]=s);return i},l=Object.assign||p,le=function(t){var e,n,r;for(e in n=[],t)r=t[e],n.push(r);return n},xt=Object.values||le,ht=function(t){return lt(t)?function(e){return e[t]}:t},gt=function(t,e){var n;return n=function(t,e){return t[e[0]]=e[1],t},yt(t,e).reduce(n,{})},w=yt=function(t,e){var n,r,o,i,s;if(0===t.length)return[];for(e=ht(e),s=[],n=o=0,i=t.length;o<i;n=++o)r=t[n],s.push(e(r,n));return s},k=function(t,e){var n,r;for(r=[];(n=t.next())&&!n.done;)r.push(e(n.value));return r},ee=function(t,e){var n,r,o,i;for(i=[],n=r=0,o=t-1;0<=o?r<=o:r>=o;n=0<=o?++r:--r)i.push(e(n));return i},et=function(t){return null===t},ct=function(t){return void 0===t},U=function(t){return!ct(t)},Z=function(t){return ct(t)||et(t)},G=function(t){return!Z(t)},(N=function(t){return!!Z(t)||(rt(t)&&t[N.key]?t[N.key]():lt(t)||Y(t)?0===t.length:!!ot(t)&&0===Object.keys(t).length)}).key="up.util.isBlank",zt=function(t,e){return null==e&&(e=it),e(t)?t:void 0},it=function(t){return!N(t)},X=function(t){return"function"==typeof t},lt=function(t){return"string"==typeof t||t instanceof String},z=function(t){return"boolean"==typeof t||t instanceof Boolean},nt=function(t){return"number"==typeof t||t instanceof Number},ot=function(t){return"object"==typeof t&&!et(t)&&(ct(t.constructor)||t.constructor===Object)},rt=function(t){var e;return"object"==(e=typeof t)&&!et(t)||"function"===e},V=function(t){return t instanceof Element},ut=function(t){return t instanceof RegExp},J=function(t){return!!(null!=t?t.jquery:void 0)},K=function(t){var e;return!(!t||!t.addEventListener&&!(null!=(e=t[0])?e.addEventListener:void 0))},st=function(t){return rt(t)&&X(t.then)},H=Array.isArray,Q=function(t){return t instanceof FormData},ne=function(t){return H(t)?t:g(t)},Y=function(t){return H(t)||tt(t)||M(t)||J(t)||$(t)},tt=function(t){return t instanceof NodeList},$=function(t){return t instanceof HTMLCollection},M=function(t){return"[object Arguments]"===Object.prototype.toString.call(t)},Rt=function(t){return et(t)?void 0:t},pe=function(t){return Y(t)?t:Z(t)?[]:[t]},y=function(t){return rt(t)&&t[y.key]?t=t[y.key]():Y(t)?t=g(t):ot(t)&&(t=l({},t)),t},g=function(t){return Array.prototype.slice.call(t)},y.key="up.util.copy",Date.prototype[y.key]=function(){return new Date(+this)},wt=function(){var t;return t=1<=arguments.length?ce.call(arguments,0):[],l.apply(null,[{}].concat(ce.call(t)))},kt=function(){var t,e,n,r,o,i,s;for(r={},t=0,n=(i=1<=arguments.length?ce.call(arguments,0):[]).length;t<n;t++)if(o=i[t])for(e in o)s=o[e],U(s)&&(r[e]=s);return r},Ct=function(t,e){return e?wt(e,t):t?y(t):{}},qt=function(t,e){var n;return n=F(t),U(t[0])&&((n=y(n))[e]=t[0]),n},R=function(t,e){var n,r,o,i;for(e=ht(e),i=void 0,r=0,o=t.length;r<o;r++)if(e(n=t[r])){i=n;break}return i},$t=function(t,e){return!!A(t,e)},A=function(t,e){var n,r,o,i;for(e=ht(e),n=r=0,o=t.length;r<o;n=++r)if(i=e(t[n],n))return i},C=function(t,e){var n,r,o,i;for(e=ht(e),i=!0,n=r=0,o=t.length;r<o;n=++r)if(!e(t[n],n)){i=!1;break}return i},f=function(t){return T(t,G)},d=function(t){return Ht(t,G)},re=function(t){return t.length<2?t:Gt(a(t))},oe=function(t,e){var n;return t.length<2?t:(e=ht(e),n=new Set,T(t,(function(t,r){var o;return o=e(t,r),!n.has(o)&&(n.add(o),!0)})))},Gt=function(t){var e;return e=[],t.forEach((function(t){return e.push(t)})),e},a=function(t){var e;return e=new Set,t.forEach((function(t){return e.add(t)})),e},T=function(t,e){var n;return e=ht(e),n=[],w(t,(function(t,r){if(e(t,r))return n.push(t)})),n},Vt=function(t,e){return e=ht(e),T(t,(function(t,n){return!e(t,n)}))},D=function(t,e){return T(t,(function(t){return m(e,t)}))},Qt=function(t,e){return setTimeout(e,t)},Ut=function(t){return setTimeout(t,0)},Bt=function(t){return Promise.resolve().then(t)},i=function(t){var e;return e=!1,Bt((function(){if(!e)return t()})),function(){return e=!0}},ft=function(t){return t[t.length-1]},m=function(t,e){return t.indexOf(e)>=0},At=function(t,e){var n;return n=Mt(t,Object.keys(e)),I(e,n)},Mt=function(t,e){var n,r,o,i;for(n={},r=0,i=e.length;r<i;r++)(o=e[r])in t&&(n[o]=t[o]);return n},Ht=function(t,e){var n,r;for(r in e=ht(e),n={},t)e(t[r],r,t)&&(n[r]=t[r]);return n},Pt=function(t,e){return Ht(t,(function(t,n){return!m(e,n)}))},se=function(){return new Promise(Ot)},Kt=function(t,e){var n;if((n=t.indexOf(e))>=0)return t.splice(n,1),e},L=function(){var t,e;return e=arguments[0],t=2<=arguments.length?ce.call(arguments,1):[],X(e)?e.apply(null,t):e},n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"},E=function(t){return t.replace(/[&<>"']/g,(function(t){return n[t]}))},S=function(t){return t.replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")},jt=function(t,e){var n;return n=t[e],delete t[e],n},It=function(t,e,n){return t[n]=jt(t,e)},O=function(t,e){if(e(ft(t)))return t.pop()},_=function(t){return O(t,X)},F=function(t){return O(t,ot)||{}},q=function(t){return t},Xt=function(t){return 1===t.length?t[0]:function(){return yt(t,(function(t){return t()}))}},P=function(t){var e,n,r,o;for(e=[],n=0,r=t.length;n<r;n++)o=t[n],Y(o)?e.push.apply(e,o):e.push(o);return e},x=function(t,e){return P(yt(t,e))},pt=function(t){return!!t},u=function(t,e){return t.then(e,e)},St=function(t){return null!=t?t.catch(Ot):void 0},Lt=function(){var t,e,n;return n=void 0,e=void 0,(t=new Promise((function(t,r){return n=t,e=r}))).resolve=n,t.reject=e,t.promise=function(){return t},t},h=function(t){var e;try{return Promise.resolve(t())}catch(t){return e=t,Promise.reject(e)}},j=function(t){return Object.prototype.hasOwnProperty(t)},(I=function(t,e){var n,r;return(null!=t?t.valueOf:void 0)&&(t=t.valueOf()),(null!=e?e.valueOf:void 0)&&(e=e.valueOf()),typeof t==typeof e&&(Y(t)&&Y(e)?W(t,e):rt(t)&&t[I.key]?t[I.key](e):ot(t)&&ot(e)?(n=Object.keys(t),r=Object.keys(e),!!W(n,r)&&C(n,(function(n){return I(t[n],e[n])}))):t===e)}).key="up.util.isEqual",W=function(t,e){return t.length===e.length&&C(t,(function(t,n){return I(t,e[n])}))},Jt=function(t,e){return null==e&&(e=" "),lt(t)?(t=t.split(e),t=yt(t,(function(t){return t.trim()})),t=T(t,it)):pe(t)},_t=0,Wt=function(t){return y(t).reverse()},Nt=function(t,e){return e+ue(t)},ie=function(t,e){var n,r;if(r=new RegExp("^"+e+"(.+)$"),n=t.match(r))return mt(n[1])},v=function(t,e,n){return pe(e).forEach((function(e){return Object.defineProperty(t,e,{get:function(){var t,r;return r=(t=n.call(this))[e],X(r)&&(r=r.bind(t)),r},set:function(t){return n.call(this)[e]=t}})}))},dt=function(t){var e,n,r,o;for(e in n={},t)o=t[e],(r=ie(e,"get_"))?b(n,r,o):n[e]=o;return n},te=function(t){var e,n,r,o,i,s,u,a;if(n="",lt(t))u=(u=(u=t.replace(/[\n\r\t ]+/g," ")).replace(/^[\n\r\t ]+/,"")).replace(/[\n\r\t ]$/,"");else if(ct(t))u="undefined";else if(nt(t)||X(t))u=t.toString();else if(H(t))u="["+yt(t,te).join(", ")+"]",n="]";else if(J(t))u="$("+yt(t,te).join(", ")+")",n=")";else if(V(t)){for(u="<"+t.tagName.toLowerCase(),o=0,i=(s=["id","name","class"]).length;o<i;o++)e=s[o],(a=t.getAttribute(e))&&(u+=" "+e+'="'+a+'"');u+=">",n=">"}else if(ut(t))u=t.toString();else try{u=JSON.stringify(t)}catch(t){if("TypeError"!==(r=t).name)throw r;u="(circular structure)"}return u.length>200&&(u=u.substr(0,200)+" â€¦",u+=n),u},o=/\%[oOdisf]/g,Yt=function(){var t,e;return e=arguments[0],t=2<=arguments.length?ce.call(arguments,1):[],Zt.apply(null,[q,e].concat(ce.call(t)))},s=function(t){return Promise.all(yt(t,St))},{parseURL:Dt,normalizeURL:Tt,urlWithoutHost:ae,matchURLs:vt,normalizeMethod:Ft,methodAllowsPayload:Et,assign:l,assignPolyfill:p,copy:y,copyArrayLike:g,merge:wt,mergeDefined:kt,options:Ct,parseArgIntoOptions:qt,each:w,eachIterator:k,map:yt,flatMap:x,mapObject:gt,times:ee,findResult:A,some:$t,every:C,find:R,filter:T,reject:Vt,intersect:D,compact:f,compactObject:d,uniq:re,uniqBy:oe,last:ft,isNull:et,isDefined:U,isUndefined:ct,isGiven:G,isMissing:Z,isPresent:it,isBlank:N,presence:zt,isObject:rt,isFunction:X,isString:lt,isBoolean:z,isNumber:nt,isElement:V,isJQuery:J,isElementish:K,isPromise:st,isOptions:ot,isArray:H,isFormData:Q,isNodeList:tt,isArguments:M,isList:Y,isRegExp:ut,timer:Qt,contains:m,objectContains:At,toArray:ne,pick:Mt,pickBy:Ht,omit:Pt,unresolvablePromise:se,remove:Kt,memoize:bt,pluckKey:jt,renameKey:It,extractOptions:F,extractCallback:_,noop:Ot,asyncNoop:c,identity:q,escapeHTML:E,escapeRegExp:S,sequence:Xt,evalOption:L,flatten:P,isTruthy:pt,newDeferred:Lt,always:u,muteRejection:St,asyncify:h,isBasicObjectProperty:j,isCrossOrigin:B,task:Ut,microtask:Bt,abortableMicrotask:i,isEqual:I,splitValues:Jt,endsWith:function(t,e){return!(e.length>t.length)&&t.substring(t.length-e.length)===e},wrapList:pe,wrapValue:function(){var t,e;return e=arguments[0],(t=2<=arguments.length?ce.call(arguments,1):[])[0]instanceof e?t[0]:function(t,e,n){n.prototype=t.prototype;var r=new n,o=t.apply(r,e);return Object(o)===o?o:r}(e,t,(function(){}))},simpleEase:function(t){return t<.5?2*t*t:t*(4-2*t)-1},values:xt,arrayToSet:a,setToArray:Gt,uid:function(){return _t++},upperCaseFirst:ue=function(t){return t[0].toUpperCase()+t.slice(1)},lowerCaseFirst:mt=function(t){return t[0].toLowerCase()+t.slice(1)},getter:b=function(t,e,n){return Object.defineProperty(t,e,{get:n})},delegate:v,literal:dt,reverse:Wt,prefixCamelCase:Nt,unprefixCamelCase:ie,camelToKebabCase:function(t){return t.replace(/[A-Z]/g,(function(t){return"-"+t.toLowerCase()}))},nullToUndefined:Rt,sprintf:Yt,sprintfWithFormattedArgs:Zt=function(){var t,e,n,r;return e=arguments[0],r=arguments[1],t=3<=arguments.length?ce.call(arguments,2):[],r?(n=0,r.replace(o,(function(){var r;return r=t[n],r=e(te(r)),n+=1,r}))):""},renameKeys:function(t,e){var n,r,o;for(n in r={},t)o=t[n],r[e(n)]=o;return r},timestamp:function(){return Math.floor(.001*Date.now())},allSettled:s})}.call(this),function(){var t,e,n,r,o,i,s,u=[].slice;up.error=(s=up.util,e=function(t,e){var n;return null==e&&(e={}),s.isArray(t)&&(t=s.sprintf.apply(s,t)),n=new Error(t),s.assign(n,e),n},r=(n=function(t,n){var r;return null==n&&(n=e),(r=function(){var e,r;return e=1<=arguments.length?u.call(arguments,0):[],(r=n.apply(null,e)).name=t,r}).is=function(e){return e.name===t},r.async=function(){var t;return t=1<=arguments.length?u.call(arguments,0):[],Promise.reject(r.apply(null,t))},r})("up.Failed"),t=n("AbortError",(function(t){return e(t||"Aborted")})),i=n("up.NotImplemented"),o=n("up.NotApplicable",(function(t,n){return e("Cannot apply change: "+t+" ("+n+")")})),{failed:r,aborted:t,invalidSelector:n("up.InvalidSelector",(function(t){return e("Cannot parse selector: "+t)})),notApplicable:o,notImplemented:i,emitGlobal:function(t){var e;return e=t.message,up.emit(window,"error",{message:e,error:t,log:!1})}})}.call(this),function(){up.migrate={config:{}}}.call(this),function(){var t,e,n,r,o,i,s,u,a,l,p,c,h,f=[].slice;up.browser=(h=up.util,l=function(t){return new up.Request(t).loadPage()},c=function(t){return t.submit()},u=h.memoize((function(){return"ActiveXObject"in window})),s=function(){return history.pushState&&"GET"===up.protocol.initialRequestMethod()},i=h.memoize((function(){return!!window.Promise})),n=h.memoize((function(){return!u()})),o=h.memoize((function(){return!u()})),r=function(){return!!window.jQuery},p=function(t){var e,n;return(n=null!=(e=document.cookie.match(new RegExp(t+"=(\\w+)")))?e[1]:void 0)&&(document.cookie=t+"=; expires=Thu, 01-Jan-70 00:00:01 GMT; path=/"),n},t=function(t){return!t.confirm||window.confirm(t.confirm)||function(){throw up.error.aborted("User canceled action")}()},a=function(){return i()},e=function(){var t;return t=1<=arguments.length?f.call(arguments,0):[],r()||up.fail("jQuery must be published as window.jQuery"),jQuery.apply(null,t)},h.literal({loadPage:l,submitForm:c,canPushState:s,canFormatLog:n,canPassiveEventListener:o,canJQuery:r,assertConfirmed:t,isSupported:a,popCookie:p,jQuery:e,isIE11:u}))}.call(this),function(){var t,e,n,r,o,i,s,u,a,l,p,c,h,f,d,m,y,g,v,b,w,k,E,S,L,C,_,O,F,T,R,A,x,P,q,D,M,H,j,N,z,B,U,V,K,I,W,Q,X,G,$,J,Y,Z,tt,et,nt,rt,ot,it,st,ut,at,lt,pt,ct,ht=[].slice;up.element=(ut=up.util,e=up.browser.isIE11()?"msMatchesSelector":"matches",L=function(){var t,e;return e=(t=1<=arguments.length?ht.call(arguments,0):[]).pop(),(t[0]||document).querySelector(e)},i=function(){var t,e;return e=(t=1<=arguments.length?ht.call(arguments,0):[]).pop(),(t[0]||document).querySelectorAll(e)},et=function(t,e){var n;return n=[],z(t,e)&&n.push(t),n.push.apply(n,i(t,e)),n},D=function(t,e){var n;return n=O(e),t.contains(n)},f=function(t,e){return t.closest?t.closest(e):z(t,e)?t:s(t,e)},z=function(t,n){return"function"==typeof t[e]?t[e](n):void 0},s=function(t,e){var n;if(n=t.parentElement)return z(n,e)?n:s(n,e)},u=function(t,e){return _(f(t,e),et(t,e))},O=function(){var t,e;return e=(t=1<=arguments.length?ht.call(arguments,0):[]).pop(),ut.isElement(e)?e:ut.isString(e)?L.apply(null,ht.call(t).concat([e])):ut.isList(e)?(e.length>1&&up.fail("up.element.get(): Cannot cast multiple elements (%o) to a single element",e),e[0]):e},_=function(){var t;return t=1<=arguments.length?ht.call(arguments,0):[],ut.flatMap(t,pt)},pt=function(t){return ut.isString(t)?i(t):ut.wrapList(t)},I=function(t){var e;return t.remove?t.remove():(e=t.parentNode)?e.removeChild(t):void 0},R=function(t){return t.style.display="none"},Z=function(t){return t.style.display=""},rt=function(t,e){return null==e&&(e=!j(t)),e?Z(t):R(t)},it=function(t,e,n){var r;return r=t.classList,null==n&&(n=!r.contains(e)),n?r.add(e):r.remove(e)},ot=function(t,e,n,r){return null==r&&(r=!t.hasAttribute(e)),r?t.setAttribute(e,n):t.removeAttribute(e)},Q=function(t,e){var n,r,o;for(n in r=[],e)o=e[n],ut.isGiven(o)?r.push(t.setAttribute(n,o)):r.push(t.removeAttribute(n));return r},J=function(t,e){var n,r,o,i,s;for(i={},n=0,o=(s=Object.keys(e)).length;n<o;n++)r=s[n],i[r]=t.getAttribute(r);return Q(t,e),function(){return Q(t,i)}},B=function(t){var e,n;return n="meta"+a("name",t),null!=(e=L(n))?e.getAttribute("content"):void 0},P=function(t,e){return t.insertAdjacentElement("beforebegin",e)},W=function(t,e){return t.parentElement.replaceChild(e,t)},w=function(t,e){var n,r,o,i,s,u,a,l,p,c,h,f,d,m,y,g,v;for(n=[],u=t.replace(/\[([\w-]+)(?:[\~\|\^\$\*]?=(["'])?([^\2\]]*?)\2)?\]/g,(function(t,e,r,o){return n.push(o||""),"["+e+"]"})).split(/[ >]+/),m=void 0,i=void 0,f=void 0,a=0,c=u.length;a<c;a++){if(s=u[a],g=void 0,s=s.replace(/^[\w-]+/,(function(t){return g=t,""})),i=document.createElement(g||"div"),m||(m=i),s=(s=s.replace(/\#([\w-]+)/,(function(t,e){return i.id=e,""}))).replace(/\.([\w-]+)/g,(function(t,e){return i.classList.add(e),""})),n.length&&(s=s.replace(/\[([\w-]+)\]/g,(function(t,e){return i.setAttribute(e,n.shift()),""}))),""!==s)throw up.error.invalidSelector(t);null!=f&&f.appendChild(i),f=i}if(e){if(r=ut.pluckKey(e,"class"))for(l=0,h=(d=ut.wrapList(r)).length;l<h;l++)p=d[l],m.classList.add(p);(y=ut.pluckKey(e,"style"))&&X(m,y),(v=ut.pluckKey(e,"text"))&&(m.textContent=v),(o=ut.pluckKey(e,"content"))&&(m.innerHTML=o),Q(m,e)}return m},o=function(){var t,e,n,r,o,i;return r=arguments[0],t=2<=arguments.length?ht.call(arguments,1):[],e=ut.extractOptions(t),2===t.length?(o=t[0],i=t[1]):(o="beforeend",i=t[0]),n=w(i,e),r.insertAdjacentElement(o,n),n},nt=function(){var t,e;return t=1<=arguments.length?ht.call(arguments,0):[],(e=up.fragment).toTarget.apply(e,t)},r=["HTML","BODY","HEAD","TITLE"],n=new RegExp("\\b("+r.join("|")+")\\b","i"),M=up.mockable((function(t){return z(t,r.join(","))})),H=function(t){return n.test(t)},E=function(t){return t.tagName.toLowerCase()},a=function(t,e){return"["+t+'="'+(e=e.replace(/"/g,'\\"'))+'"]'},st=function(t){return"["+t+"]:not(["+t+"=false])"},A=function(t){return t.match(/^[a-z0-9\-_]+$/i)?"#"+t:a("id",t)},h=function(t){return"."+t.replace(/:/g,"\\:")},v=function(t){return(new DOMParser).parseFromString(t,"text/html")},b=function(t){var e;return(e=document.createRange()).setStart(document.body,0),e.createContextualFragment(t).childNodes[0]},F=function(){return document.documentElement},K=function(t){return t.offsetHeight},g=function(t){var e;return e=Y(t,{transition:"none"}),K(t),e},T=function(t){var e,n,r;return n=(r=ut.isOptions(t)?t:m(t)).transitionProperty,e=r.transitionDuration,!("none"===n||"all"===n&&0===e)},C=function(t){var e,n;return e=t.getBoundingClientRect(),t.style.position="absolute",n=t.offsetParent.getBoundingClientRect(),X(t,{left:e.left-y(t,"margin-left")-n.left,top:e.top-y(t,"margin-top")-n.top,right:"",bottom:""})},$=function(t,e){var n,r,o;for(n in r=[],e)o=e[n],r.push(G(t,n,o));return r},G=function(t,e,n){if(ut.isMissing(t.getAttribute(e)))return t.setAttribute(e,n)},at=function(t){var e,n;return e=t.parentNode,n=ut.toArray(t.childNodes),ut.each(n,(function(n){return e.insertBefore(n,t)})),e.removeChild(t)},ct=function(t,e){var n,r;for(null==e&&(e="up-wrapper"),r=w(e);n=t.firstChild;)r.appendChild(n);return t.appendChild(r),r},tt=function(t,e){return ut.nullToUndefined(t.getAttribute(e))},l=function(t,e,n){var r;switch(r=tt(t,e)){case"false":return!1;case"true":case"":case e:return!0;default:if(n)return r}},p=function(t,e){return l(t,e,!0)},V=function(t,e){var n;if((n=t.getAttribute(e))&&(n=n.replace(/_/g,"")).match(/^[\d\.]+$/))return parseFloat(n)},N=function(t,e){var n,r;if(n="function"==typeof t.getAttribute&&null!=(r=t.getAttribute(e))?r.trim():void 0)return JSON.parse(n)},c=function(t,e,n){var r,o;if(null==n&&(n=[]),o=t.getAttribute(e))return r=function(t,e,n){n.prototype=t.prototype;var r=new n,o=t.apply(r,e);return Object(o)===o?o:r}(Function,["event"].concat(ht.call(n),[o]),(function(){})),function(e){var o;return o=ut.values(ut.pick(e,n)),r.call.apply(r,[t,e].concat(ht.call(o)))}},d=function(t,e){var n;return null!=(n=f(t,"["+e+"]"))?n.getAttribute(e):void 0},Y=function(t,e,n){var r;return r=x(t,Object.keys(e)),X(t,e),function(){return X(t,r)}},m=function(t,e){var n;return n=window.getComputedStyle(t),S(n,e)},y=function(t,e){var n;return n=m(t,e),ut.isGiven(n)?parseFloat(n):void 0},x=function(t,e){var n;return n=t.style,S(n,e)},S=function(t,e){return ut.isString(e)?t[e]:ut.pick(t,e)},X=function(t,e){var n,r,o,i;for(n in o=t.style,r=[],e)i=e[n],i=U(n,i),r.push(o[n]=i);return r},U=function(e,n){return ut.isMissing(n)?n="":t.has(e.toLowerCase().replace(/-/,""))&&(n=k(n)),n},t=ut.arrayToSet(["top","right","bottom","left","padding","paddingtop","paddingright","paddingbottom","paddingleft","margin","margintop","marginright","marginbottom","marginleft","borderwidth","bordertopwidth","borderrightwidth","borderbottomwidth","borderleftwidth","width","height","maxwidth","maxheight","minwidth","minheight"]),k=function(t){return ut.isNumber(t)||ut.isString(t)&&/^\d+$/.test(t)?t.toString()+"px":t},j=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},lt=function(t){var e,n,r,o,i,s,u;for(u=/^up-/,n={},r=0,o=(s=t.attributes).length;r<o;r++)(i=(e=s[r]).name).match(u)&&(n[i]=e.value);return n},q=function(t){return t!==document&&!F().contains(t)},ut.literal({all:i,subtree:et,isInSubtree:D,closest:f,closestAttr:d,matches:z,ancestor:s,around:u,get:O,list:_,remove:I,toggle:rt,toggleClass:it,hide:R,show:Z,metaContent:B,replace:W,insertBefore:P,createFromSelector:w,setAttrs:Q,setTemporaryAttrs:J,affix:o,toSelector:nt,idSelector:A,classSelector:h,isSingleton:M,isSingletonSelector:H,attributeSelector:a,trueAttributeSelector:st,elementTagName:E,createDocumentFromHTML:v,createFromHTML:b,get_root:F,paint:K,concludeCSSTransition:g,hasCSSTransition:T,fixedToAbsolute:C,setMissingAttrs:$,setMissingAttr:G,unwrap:at,wrapChildren:ct,attr:tt,booleanAttr:l,numberAttr:V,jsonAttr:N,callbackAttr:c,booleanOrStringAttr:p,setTemporaryStyle:Y,style:m,styleNumber:y,inlineStyle:x,setStyle:X,isVisible:j,upAttrs:lt,toggleAttr:ot,isDetached:q}))}.call(this),function(){var t,e=[].slice;t=up.util,up.Class=function(){function n(){}return n.getter=function(e,n){return t.getter(this.prototype,e,n)},n.accessor=function(t,e){return Object.defineProperty(this.prototype,t,e)},n.delegate=function(e,n){return t.delegate(this.prototype,e,(function(){return this[n]}))},n.wrap=function(){var n;return n=1<=arguments.length?e.call(arguments,0):[],t.wrapValue.apply(t,[this].concat(e.call(n)))},n}()}.call(this),function(){var t,e={}.hasOwnProperty;t=up.util,up.Record=function(n){function r(e){t.assign(this,this.defaults(e),this.attributes(e))}return function(t,n){for(var r in n)e.call(n,r)&&(t[r]=n[r]);function o(){this.constructor=t}o.prototype=n.prototype,t.prototype=new o,t.__super__=n.prototype}(r,up.Class),r.prototype.keys=function(){throw"Return an array of keys"},r.prototype.defaults=function(t){return{}},r.prototype.attributes=function(e){return null==e&&(e=this),t.pick(e,this.keys())},r.prototype[""+t.copy.key]=function(){return this.variant()},r.prototype.variant=function(e){return null==e&&(e={}),new this.constructor(t.merge(this.attributes(),e))},r.prototype[""+t.isEqual.key]=function(e){return this.constructor===e.constructor&&t.isEqual(this.attributes(),e.attributes())},r}()}.call(this),function(){}.call(this),function(){var t;t=up.element,up.BodyShifter=function(){function e(){this.unshiftFns=[],this.reset()}return e.prototype.reset=function(){return this.unshiftNow(),this.shiftCount=0},e.prototype.shift=function(){var e,n,r,o,i,s,u,a,l,p,c;if(this.shiftCount++,!(this.shiftCount>1)&&(p=up.viewport.rootHasReducedWidthFromScrollbar(),u=up.viewport.rootOverflowElement(),this.changeStyle(u,{overflowY:"hidden"}),p)){for(n=document.body,r=(c=up.viewport.scrollbarWidth())+t.styleNumber(n,"paddingRight"),this.changeStyle(n,{paddingRight:r}),l=[],i=0,s=(a=up.viewport.anchoredRight()).length;i<s;i++)e=a[i],o=c+t.styleNumber(e,"right"),l.push(this.changeStyle(e,{right:o}));return l}},e.prototype.changeStyle=function(e,n){return this.unshiftFns.push(t.setTemporaryStyle(e,n))},e.prototype.unshift=function(){if(this.shiftCount--,!(this.shiftCount>0))return this.unshiftNow()},e.prototype.unshiftNow=function(){var t,e;for(t=[];e=this.unshiftFns.pop();)t.push(e());return t},e}()}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}},n=[].slice;t=up.util,up.Cache=function(){function r(t){this.config=null!=t?t:{},this.get=e(this.get,this),this.isFresh=e(this.isFresh,this),this.remove=e(this.remove,this),this.set=e(this.set,this),this.alias=e(this.alias,this),this.store=this.config.store||new up.store.Memory}return r.prototype.size=function(){return this.store.size()},r.prototype.maxSize=function(){return t.evalOption(this.config.size)},r.prototype.expiryMillis=function(){return t.evalOption(this.config.expiry)},r.prototype.normalizeStoreKey=function(t){return this.config.key?this.config.key(t):t.toString()},r.prototype.isEnabled=function(){return 0!==this.maxSize()&&0!==this.expiryMillis()},r.prototype.clear=function(){return this.store.clear()},r.prototype.log=function(){var t;if(t=1<=arguments.length?n.call(arguments,0):[],this.config.logPrefix)return t[0]="["+this.config.logPrefix+"] "+t[0],up.puts.apply(up,["up.Cache"].concat(n.call(t)))},r.prototype.keys=function(){return this.store.keys()},r.prototype.each=function(e){return t.each(this.keys(),(n=this,function(t){var r;return r=n.store.get(t),e(t,r.value,r.timestamp)}));var n},r.prototype.makeRoomForAnotherEntry=function(){var t,e;if(!this.hasRoomForAnotherEntry())return t=void 0,e=void 0,this.each((function(n,r,o){if(!e||e>o)return t=n,e=o})),t?this.store.remove(t):void 0},r.prototype.hasRoomForAnotherEntry=function(){var t;return!(t=this.maxSize())||this.size()<t},r.prototype.alias=function(e,n){var r;if(r=this.get(e,{silent:!0}),t.isDefined(r))return this.set(n,r)},r.prototype.timestamp=function(){return(new Date).valueOf()},r.prototype.set=function(t,e){var n,r;if(this.isEnabled())return this.makeRoomForAnotherEntry(),r=this.normalizeStoreKey(t),n={timestamp:this.timestamp(),value:e},this.store.set(r,n)},r.prototype.remove=function(t){var e;return e=this.normalizeStoreKey(t),this.store.remove(e)},r.prototype.isFresh=function(t){var e;return!(e=this.expiryMillis())||this.timestamp()-t.timestamp<e},r.prototype.get=function(t,e){var n,r;return null==e&&(e={}),r=this.normalizeStoreKey(t),(n=this.store.get(r))?this.isFresh(n)?(e.silent||this.log("Cache hit for '%s'",t),n.value):(e.silent||this.log("Discarding stale cache entry for '%s'",t),void this.remove(t)):void(e.silent||this.log("Cache miss for '%s'",t))},r}()}.call(this),function(){var t,e={}.hasOwnProperty;t=up.util,up.Change=function(n){function r(t){this.options=t}return function(t,n){for(var r in n)e.call(n,r)&&(t[r]=n[r]);function o(){this.constructor=t}o.prototype=n.prototype,t.prototype=new o,t.__super__=n.prototype}(r,up.Class),r.prototype.notApplicable=function(t){return up.error.notApplicable(this,t)},r.prototype.execute=function(){throw up.error.notImplemented()},r.prototype.onFinished=function(){var t;return"function"==typeof(t=this.options).onFinished?t.onFinished():void 0},r.prototype.improveHistoryValue=function(e,n){return!1===e||t.isString(e)?e:n},r}()}.call(this),function(){var t,e,n={}.hasOwnProperty;e=up.util,t=up.element,up.Change.Addition=function(r){function o(t){o.__super__.constructor.call(this,t),this.responseDoc=t.responseDoc,this.acceptLayer=t.acceptLayer,this.dismissLayer=t.dismissLayer,this.eventPlans=t.eventPlans||[]}return function(t,e){for(var r in e)n.call(e,r)&&(t[r]=e[r]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(o,up.Change),o.prototype.handleLayerChangeRequests=function(){return this.layer.isOverlay()&&(this.tryAcceptLayerFromServer(),this.abortWhenLayerClosed(),this.layer.tryAcceptForLocation(),this.abortWhenLayerClosed(),this.tryDismissLayerFromServer(),this.abortWhenLayerClosed(),this.layer.tryDismissForLocation(),this.abortWhenLayerClosed()),this.layer.asCurrent((t=this,function(){var e,n,r,o,i;for(i=[],n=0,r=(o=t.eventPlans).length;n<r;n++)e=o[n],up.emit(e),i.push(t.abortWhenLayerClosed());return i}));var t},o.prototype.tryAcceptLayerFromServer=function(){if(e.isDefined(this.acceptLayer)&&this.layer.isOverlay())return this.layer.accept(this.acceptLayer)},o.prototype.tryDismissLayerFromServer=function(){if(e.isDefined(this.dismissLayer)&&this.layer.isOverlay())return this.layer.dismiss(this.dismissLayer)},o.prototype.abortWhenLayerClosed=function(){if(this.layer.isClosed())throw up.error.aborted("Layer was closed")},o.prototype.setSource=function(n){var r,o,i;if(o=n.oldElement,r=n.newElement,"keep"===(i=n.source)&&(i=o&&up.fragment.source(o)),i)return t.setMissingAttr(r,"up-source",e.normalizeURL(i))},o}()}.call(this),function(){var t={}.hasOwnProperty;up.util,up.Change.Removal=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return function(e,n){for(var r in n)t.call(n,r)&&(e[r]=n[r]);function o(){this.constructor=e}o.prototype=n.prototype,e.prototype=new o,e.__super__=n.prototype}(n,up.Change),n}()}.call(this),function(){var t,e,n={}.hasOwnProperty;e=up.util,t=up.element,up.Change.CloseLayer=function(r){function o(t){var e;o.__super__.constructor.call(this,t),this.verb=t.verb,this.layer=up.layer.get(t),this.origin=t.origin,this.value=t.value,this.preventable=null==(e=t.preventable)||e}return function(t,e){for(var r in e)n.call(e,r)&&(t[r]=e[r]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(o,up.Change.Removal),o.prototype.execute=function(){var n,r,o;if(this.origin&&e.isUndefined(r)&&(r=t.jsonAttr(this.origin,"up-"+this.verb)),!this.layer.isOpen())return Promise.resolve();if(up.browser.assertConfirmed(this.options),up.network.abort((o=this,function(t){return t.layer===o.layer})),this.emitCloseEvent().defaultPrevented&&this.preventable)throw up.error.aborted("Close event was prevented");n=this.layer.parent,this.layer.peel(),this.layer.stack.remove(this.layer),n.restoreHistory(),this.handleFocus(n),this.layer.teardownHandlers(),this.layer.destroyElements(this.options),this.emitClosedEvent(n)},o.prototype.emitCloseEvent=function(){return this.layer.emit(this.buildEvent("up:layer:"+this.verb),{callback:this.layer.callback("on"+e.upperCaseFirst(this.verb)),log:"Will "+this.verb+" "+this.layer})},o.prototype.emitClosedEvent=function(t){var n,r;return n=this.verb+"ed",r=e.upperCaseFirst(n),this.layer.emit(this.buildEvent("up:layer:"+n),{baseLayer:t,callback:this.layer.callback("on"+r),ensureBubbles:!0,log:r+" "+this.layer})},o.prototype.buildEvent=function(t){return up.event.build(t,{layer:this.layer,value:this.value,origin:this.origin})},o.prototype.handleFocus=function(t){var e;return this.layer.overlayFocus.teardown(),null!=(e=t.overlayFocus)&&e.moveToFront(),(this.layer.origin||t.element).focus({preventScroll:!0})},o}()}.call(this),function(){var t,e={}.hasOwnProperty;t=up.element,up.Change.DestroyFragment=function(n){function r(t){r.__super__.constructor.call(this,t),this.layer=up.layer.get(t)||up.layer.current,this.element=this.options.element,this.animation=this.options.animation,this.log=this.options.log}return function(t,n){for(var r in n)e.call(n,r)&&(t[r]=n[r]);function o(){this.constructor=t}o.prototype=n.prototype,t.prototype=new o,t.__super__=n.prototype}(r,up.Change.Removal),r.prototype.execute=function(){return this.parent=this.element.parentNode,up.fragment.markAsDestroying(this.element),up.motion.willAnimate(this.element,this.animation,this.options)?(this.emitDestroyed(),this.animate().then((t=this,function(){return t.wipe()})).then(function(t){return function(){return t.onFinished()}}(this))):(this.wipe(),this.emitDestroyed(),this.onFinished());var t},r.prototype.animate=function(){return up.motion.animate(this.element,this.animation,this.options)},r.prototype.wipe=function(){return this.layer.asCurrent((e=this,function(){return up.syntax.clean(e.element,{layer:e.layer}),up.browser.canJQuery()?jQuery(e.element).remove():t.remove(e.element)}));var e},r.prototype.emitDestroyed=function(){return up.fragment.emitDestroyed(this.element,{parent:this.parent,log:this.log})},r}()}.call(this),function(){var t,e={}.hasOwnProperty;t=up.util,up.element,up.Change.FromContent=function(n){function r(e){r.__super__.constructor.call(this,e),this.layers=t.filter(up.layer.getAll(this.options),this.isRenderableLayer),this.origin=this.options.origin,this.preview=this.options.preview,this.mode=this.options.mode,this.origin&&(this.originLayer=up.layer.get(this.origin))}return function(t,n){for(var r in n)e.call(n,r)&&(t[r]=n[r]);function o(){this.constructor=t}o.prototype=n.prototype,t.prototype=new o,t.__super__=n.prototype}(r,up.Change),r.prototype.isRenderableLayer=function(t){return"new"===t||t.isOpen()},r.prototype.getPlans=function(){return this.plans||(this.plans=[],this.options.fragment&&(this.options.target=this.getResponseDoc().rootSelector()),this.expandIntoPlans(this.layers,this.options.target),this.expandIntoPlans(this.layers,this.options.fallback)),this.plans},r.prototype.expandIntoPlans=function(e,n){var r,o,i,s,u,a,l;for(a=[],o=0,s=e.length;o<s;o++)i=e[o],a.push(function(){var e,o,s,a;for(a=[],e=0,o=(s=this.expandTargets(n,i)).length;e<o;e++)l=s[e],u=t.merge(this.options,{target:l,layer:i,placement:this.defaultPlacement()}),r="new"===i?new up.Change.OpenLayer(u):new up.Change.UpdateLayer(u),a.push(this.plans.push(r));return a}.call(this));return a},r.prototype.expandTargets=function(t,e){return up.fragment.expandTargets(t,{layer:e,mode:this.mode,origin:this.origin})},r.prototype.execute=function(){var t,e;return this.options.preload?Promise.resolve():(e=this,t=function(t){return t.execute(e.getResponseDoc())},this.seekPlan(t)||this.postflightTargetNotApplicable())},r.prototype.getResponseDoc=function(){var e,n;return this.preview||this.responseDoc||(n=t.pick(this.options,["target","content","fragment","document","html"]),"function"==typeof(e=up.migrate).handleResponseDocOptions&&e.handleResponseDocOptions(n),"content"===this.defaultPlacement()&&(n.target=this.firstExpandedTarget(n.target)),this.responseDoc=new up.ResponseDoc(n)),this.responseDoc},r.prototype.defaultPlacement=function(){if(!this.options.document&&!this.options.fragment)return"content"},r.prototype.firstExpandedTarget=function(t){return this.expandTargets(t||":main",this.layers[0])[0]},r.prototype.preflightProps=function(t){var e;return null==t&&(t={}),e=function(t){return t.preflightProps()},this.seekPlan(e)||t.optional||this.preflightTargetNotApplicable()},r.prototype.preflightTargetNotApplicable=function(){return this.targetNotApplicable("Could not find target in current page")},r.prototype.postflightTargetNotApplicable=function(){return this.targetNotApplicable("Could not find common target in current page and response")},r.prototype.targetNotApplicable=function(e){var n,r;return this.getPlans().length?(r=t.uniq(t.map(this.getPlans(),"target")),n=up.layer.optionToString(this.options.layer),up.fail(e+" (tried selectors %o in %s)",r,n)):this.layers.length?up.fail("No target selector given"):up.fail("Layer %o does not exist",this.options.layer)},r.prototype.seekPlan=function(t){var e,n,r,o,i;for(n=0,r=(i=this.getPlans()).length;n<r;n++){o=i[n];try{return t(o)}catch(t){e=t,up.error.notApplicable.is(e)||function(){throw e}()}}},r}()}.call(this),function(){var t,e={}.hasOwnProperty;t=up.util,up.Change.FromURL=function(n){function r(t){this.options=t,r.__super__.constructor.call(this,this.options),this.options.layer=up.layer.getAll(this.options),this.options.normalizeLayerOptions=!1,this.successOptions=this.options,this.failOptions=up.RenderOptions.deriveFailOptions(this.successOptions)}return function(t,n){for(var r in n)e.call(n,r)&&(t[r]=n[r]);function o(){this.constructor=t}o.prototype=n.prototype,t.prototype=new o,t.__super__=n.prototype}(r,up.Change),r.prototype.execute=function(){var e,n,r;return(e=this.newPageReason())?(up.puts("up.render()",e),up.browser.loadPage(this.options),t.unresolvablePromise()):(n=this.makeRequest(),this.options.preload?n:t.always(n,(r=this,function(t){return r.onRequestSettled(t)})))},r.prototype.newPageReason=function(){return t.isCrossOrigin(this.options.url)?"Loading cross-origin content in new page":up.browser.canPushState()?void 0:"Loading content in new page to restore history support"},r.prototype.makeRequest=function(){var e,n,r;return r=this.preflightPropsForRenderOptions(this.successOptions),e=this.preflightPropsForRenderOptions(this.failOptions,{optional:!0}),n=t.merge(this.successOptions,r,t.renameKeys(e,up.fragment.failKey)),this.request=up.request(n),this.request},r.prototype.preflightPropsForRenderOptions=function(e,n){return new up.Change.FromContent(t.merge(e,{preview:!0})).preflightProps(n)},r.prototype.onRequestSettled=function(t){var e;if(this.response=t,this.response instanceof up.Response){if(this.isSuccessfulResponse())return this.updateContentFromResponse(["Loaded fragment from successful response to %s",this.request.description],this.successOptions);throw e=["Loaded fragment from failed response to %s (HTTP %d)",this.request.description,this.response.status],this.updateContentFromResponse(e,this.failOptions)}throw this.response},r.prototype.isSuccessfulResponse=function(){return!1===this.successOptions.fail||this.response.ok},r.prototype.buildEvent=function(e,n){var r;return r={request:this.request,response:this.response,renderOptions:this.options},up.event.build(e,t.merge(r,n))},r.prototype.updateContentFromResponse=function(t,e){var n;return n=this.buildEvent("up:fragment:loaded",{renderOptions:e}),this.request.assertEmitted(n,{log:t,callback:this.options.onLoaded}),this.augmentOptionsFromResponse(e),new up.Change.FromContent(e).execute()},r.prototype.augmentOptionsFromResponse=function(e){var n,r,o,i;return o=r=this.response.url,(n=this.request.hash)&&(e.hash=n,o+=n),"GET"===this.response.method?e.source=this.improveHistoryValue(e.source,r):(e.source=this.improveHistoryValue(e.source,"keep"),e.history=!!e.location),e.location=this.improveHistoryValue(e.location,o),e.title=this.improveHistoryValue(e.title,this.response.title),e.eventPlans=this.response.eventPlans,(i=this.response.target)&&(e.target=i),e.document=this.response.text,e.acceptLayer=this.response.acceptLayer,e.dismissLayer=this.response.dismissLayer,e.document||!t.isDefined(e.acceptLayer)&&!t.isDefined(e.dismissLayer)||(e.target=":none"),e.context=t.merge(e.context,this.response.context)},r}()}.call(this),function(){var t,e={}.hasOwnProperty;t=up.util,up.Change.OpenLayer=function(n){function r(t){r.__super__.constructor.call(this,t),this.target=t.target,this.origin=t.origin,this.baseLayer=t.baseLayer}return function(t,n){for(var r in n)e.call(n,r)&&(t[r]=n[r]);function o(){this.constructor=t}o.prototype=n.prototype,t.prototype=new o,t.__super__=n.prototype}(r,up.Change.Addition),r.prototype.preflightProps=function(){return{layer:this.baseLayer,mode:this.options.mode,context:this.buildLayer().context,target:this.target}},r.prototype.bestPreflightSelector=function(){return this.target},r.prototype.execute=function(t){if(":none"===this.target?this.content=document.createElement("up-none"):this.content=t.select(this.target),!this.content||this.baseLayer.isClosed())throw this.notApplicable();if(up.puts("up.render()",'Opening element "'+this.target+'" in new overlay'),this.options.title=this.improveHistoryValue(this.options.title,t.getTitle()),this.emitOpenEvent().defaultPrevented)throw up.error.aborted("Open event was prevented");var e;return this.baseLayer.peel(),this.layer=this.buildLayer(),up.layer.stack.push(this.layer),this.layer.createElements(this.content),this.layer.setupHandlers(),this.handleHistory(),this.setSource({newElement:this.content,source:this.options.source}),t.finalizeElement(this.content),up.hello(this.layer.element,{layer:this.layer,origin:this.origin}),this.handleLayerChangeRequests(),this.handleScroll(),this.layer.startOpenAnimation().then((e=this,function(){return e.layer.isOpen()&&e.handleFocus(),e.onFinished()})),this.layer.opening=!1,this.emitOpenedEvent(),this.abortWhenLayerClosed(),new up.RenderResult({layer:this.layer,fragments:[this.content]})},r.prototype.buildLayer=function(){return up.layer.build(t.merge(this.options,{opening:!0}))},r.prototype.handleHistory=function(){return"auto"===this.layer.historyVisible&&(this.layer.historyVisible=up.fragment.hasAutoHistory(this.content)),this.layer.parent.saveHistory(),this.options.history=!0,this.layer.updateHistory(this.options)},r.prototype.handleFocus=function(){var t;return null!=(t=this.baseLayer.overlayFocus)&&t.moveToBack(),this.layer.overlayFocus.moveToFront(),new up.FragmentFocus({fragment:this.content,layer:this.layer,autoMeans:["autofocus","layer"]}).process(this.options.focus)},r.prototype.handleScroll=function(){var e;return e=t.merge(this.options,{fragment:this.content,layer:this.layer,autoMeans:["hash","layer"]}),new up.FragmentScrolling(e).process(this.options.scroll)},r.prototype.emitOpenEvent=function(){return up.emit("up:layer:open",{origin:this.origin,baseLayer:this.baseLayer,layerOptions:this.options,log:"Opening new overlay"})},r.prototype.emitOpenedEvent=function(){return this.layer.emit("up:layer:opened",{origin:this.origin,callback:this.layer.callback("onOpened"),log:"Opened new "+this.layer})},r}()}.call(this),function(){var t,e,n={}.hasOwnProperty;e=up.util,t=up.element,up.Change.UpdateLayer=function(r){function o(t){var e,n;this.executeStep=(e=this.executeStep,n=this,function(){return e.apply(n,arguments)}),o.__super__.constructor.call(this,t),this.layer=t.layer,this.target=t.target,this.placement=t.placement,this.context=t.context,this.parseSteps()}return function(t,e){for(var r in e)n.call(e,r)&&(t[r]=e[r]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(o,up.Change.Addition),o.prototype.preflightProps=function(){return this.matchPreflight(),{layer:this.layer,mode:this.layer.mode,context:e.merge(this.layer.context,this.context),target:this.bestPreflightSelector()}},o.prototype.bestPreflightSelector=function(){return this.matchPreflight(),e.map(this.steps,"selector").join(", ")||":none"},o.prototype.execute=function(t){var n,r;return this.responseDoc=t,this.matchPostflight(),up.puts("up.render()",'Updating "'+this.bestPreflightSelector()+'" in '+this.layer),this.options.title=this.improveHistoryValue(this.options.title,this.responseDoc.getTitle()),this.setScrollAndFocusOptions(),this.options.saveScroll&&up.viewport.saveScroll({layer:this.layer}),this.options.peel&&this.layer.peel(),e.assign(this.layer.context,this.context),"auto"===this.options.history&&(this.options.history=this.hasAutoHistory()),this.layer.updateHistory(e.pick(this.options,["history","location","title"])),this.handleLayerChangeRequests(),n=this.steps.map(this.executeStep),Promise.all(n).then((r=this,function(){return r.abortWhenLayerClosed(),r.onFinished()})),new up.RenderResult({layer:this.layer,fragments:e.map(this.steps,"newElement")})},o.prototype.executeStep=function(n){var r,o,i,s,u,a,l,p,c;switch(this.setSource(n),n.placement){case"swap":return(r=this.findKeepPlan(n))?(up.fragment.emitKept(r),this.handleFocus(n.oldElement,n),this.handleScroll(n.oldElement,n)):(this.transferKeepableElements(n),u=n.oldElement.parentNode,o=e.merge(n,{beforeStart:function(){return up.fragment.markAsDestroying(n.oldElement)},afterInsert:(c=this,function(){return c.responseDoc.finalizeElement(n.newElement),up.hello(n.newElement,n)}),beforeDetach:function(t){return function(){return up.syntax.clean(n.oldElement,{layer:t.layer})}}(this),afterDetach:function(){return t.remove(n.oldElement),up.fragment.emitDestroyed(n.oldElement,{parent:u,log:!1})},scrollNew:function(t){return function(){return t.handleFocus(n.newElement,n),t.handleScroll(n.newElement,n)}}(this)}),up.morph(n.oldElement,n.newElement,n.transition,o));case"content":return s=t.wrapChildren(n.oldElement),i=t.wrapChildren(n.newElement),p=e.merge(n,{placement:"swap",oldElement:s,newElement:i,focus:!1}),this.executeStep(p).then(function(e){return function(){return t.unwrap(i),e.handleFocus(n.oldElement,n)}}(this));case"before":case"after":return l=t.wrapChildren(n.newElement),a="before"===n.placement?"afterbegin":"beforeend",n.oldElement.insertAdjacentElement(a,l),this.responseDoc.finalizeElement(l),up.hello(l,n),this.handleFocus(l,n),this.handleScroll(l,n).then((function(){return up.animate(l,n.transition,n)})).then((function(){return t.unwrap(l)}));default:return up.fail("Unknown placement: %o",n.placement)}},o.prototype.findKeepPlan=function(e){var n,r,o,i,s,u;if(e.keep)return o=e.oldElement,r=e.newElement,(s=t.booleanOrStringAttr(o,"up-keep"))&&(!0===s&&(s="&"),n={layer:this.layer,origin:o},(i=e.descendantsOnly?up.fragment.get(r,s,n):up.fragment.subtree(r,s,n)[0])&&t.matches(i,"[up-keep]")&&(u={oldElement:o,newElement:i,newData:up.syntax.data(i)},!up.fragment.emitKeep(u).defaultPrevented))?u:void 0},o.prototype.transferKeepableElements=function(n){var r,o,i,s,u,a,l;if(o=[],n.keep)for(r=0,u=(l=n.oldElement.querySelectorAll("[up-keep]")).length;r<u;r++)i=l[r],(a=this.findKeepPlan(e.merge(n,{oldElement:i,descendantsOnly:!0})))&&(s=i.cloneNode(!0),t.replace(i,s),t.replace(a.newElement,i),o.push(a));return n.keepPlans=o},o.prototype.parseSteps=function(){var t,n,r,o,i,s,u;for(this.steps=[],i=[],n=0,r=(o=e.splitValues(this.target,",")).length;n<r;n++)":none"!==(s=o[n])?(t=s.match(/^(.+?)(?:\:(before|after))?$/)||function(){throw up.error.invalidSelector(s)}(),u=e.merge(this.options,{selector:t[1],placement:t[2]||this.placement||"swap"}),i.push(this.steps.push(u))):i.push(void 0);return i},o.prototype.matchPreflight=function(){var t,e,n,r,o;if(!this.matchedPreflight){for(e=0,n=(r=this.steps).length;e<n;e++)o=r[e],t=new up.FragmentFinder(o),o.oldElement||(o.oldElement=t.find()||function(){throw this.notApplicable('Could not find element "'+this.target+'" in current page')}.call(this));return this.resolveOldNesting(),this.matchedPreflight=!0}},o.prototype.matchPostflight=function(){var t,e,n,r;if(!this.matchedPostflight){for(this.matchPreflight(),t=0,e=(n=this.steps).length;t<e;t++)(r=n[t]).newElement=this.responseDoc.select(r.selector)||function(){throw this.notApplicable('Could not find element "'+this.target+'" in server response')}.call(this);return this.options.hungry&&this.addHungrySteps(),this.resolveOldNesting(),this.matchedPostflight=!0}},o.prototype.addHungrySteps=function(){var e,n,r,o,i,s,u,a;for(s=[],n=0,r=(e=up.fragment.all(up.radio.hungrySelector(),this.options)).length;n<r;n++)i=e[n],u=up.fragment.toTarget(i),(o=this.responseDoc.select(u))?(a=t.booleanOrStringAttr(i,"transition"),s.push(this.steps.push({selector:u,oldElement:i,newElement:o,transition:a,placement:"swap"}))):s.push(void 0);return s},o.prototype.containedByRivalStep=function(t,n){return e.some(t,(function(t){return t!==n&&("swap"===t.placement||"content"===t.placement)&&t.oldElement.contains(n.oldElement)}))},o.prototype.resolveOldNesting=function(){var t,n;return t=e.uniqBy(this.steps,"oldElement"),t=e.reject(t,(n=this,function(e){return n.containedByRivalStep(t,e)})),this.steps=t},o.prototype.setScrollAndFocusOptions=function(){return this.steps.forEach((t=this,function(e,n){if(n>0&&(e.scroll=!1,e.focus=!1),"swap"===e.placement||"content"===e.placement)return e.scrollBehavior="auto",null!=t.focusCapsule?t.focusCapsule:t.focusCapsule=up.FocusCapsule.preserveWithin(e.oldElement)}));var t},o.prototype.handleFocus=function(t,n){return new up.FragmentFocus(e.merge(n,{fragment:t,layer:this.layer,focusCapsule:this.focusCapsule,autoMeans:up.fragment.config.autoFocus})).process(n.focus)},o.prototype.handleScroll=function(t,n){return new up.FragmentScrolling(e.merge(n,{fragment:t,layer:this.layer,autoMeans:up.fragment.config.autoScroll})).process(n.scroll)},o.prototype.hasAutoHistory=function(){var t;return t=e.map(this.steps,"oldElement"),e.some(t,(function(t){return up.fragment.hasAutoHistory(t)}))},o}()}.call(this),function(){var t,e;e=up.util,t=up.element,up.CompilerPass=function(){function n(t,e,n){var r,o;this.root=t,this.compilers=e,null==n&&(n={}),this.isInSkippedSubtree=(r=this.isInSkippedSubtree,o=this,function(){return r.apply(o,arguments)}),this.skipSubtrees=n.skip,this.skipSubtrees.length&&this.root.querySelector("[up-keep]")||(this.skipSubtrees=void 0),this.layer=n.layer||up.layer.get(this.root)||up.layer.current,this.errors=[]}return n.prototype.run=function(){var t;if(up.puts("up.hello()","Compiling fragment %o",this.root),this.layer.asCurrent((t=this,function(){var e,n,r,o,i;for(i=[],n=0,r=(o=t.compilers).length;n<r;n++)e=o[n],i.push(t.runCompiler(e));return i})),this.errors.length)throw up.error.failed("Errors while compiling",{errors:this.errors})},n.prototype.runCompiler=function(t){var e,n,r,o,i;if((i=this.select(t.selector)).length){if(t.isDefault||up.puts("up.hello()",'Compiling "%s" on %d element(s)',t.selector,i.length),t.batch)this.compileBatch(t,i);else for(n=0,r=i.length;n<r;n++)o=i[n],this.compileOneElement(t,o);return"function"==typeof(e=up.migrate).postCompile?e.postCompile(i,t):void 0}},n.prototype.compileOneElement=function(t,e){var n,r,o,i;if(n=[t.jQuery?up.browser.jQuery(e):e],1!==t.length&&(r=up.syntax.data(e),n.push(r)),i=this.applyCompilerFunction(t,e,n),o=this.destructorPresence(i))return up.destructor(e,o)},n.prototype.compileBatch=function(t,n){var r,o,i;if(r=[t.jQuery?up.browser.jQuery(n):n],1!==t.length&&(o=e.map(n,up.syntax.data),r.push(o)),i=this.applyCompilerFunction(t,n,r),this.destructorPresence(i))return up.fail("Compilers with { batch: true } cannot return destructors")},n.prototype.applyCompilerFunction=function(t,e,n){var r;try{return t.apply(e,n)}catch(t){return r=t,this.errors.push(r),up.log.error("up.hello()","While compiling %o: %o",e,r),up.error.emitGlobal(r)}},n.prototype.destructorPresence=function(t){if(e.isFunction(t)||e.isArray(t)&&e.every(t,e.isFunction))return t},n.prototype.select=function(n){var r;return r=t.subtree(this.root,e.evalOption(n)),this.skipSubtrees&&(r=e.reject(r,this.isInSkippedSubtree)),r},n.prototype.isInSkippedSubtree=function(t){var n;return!!e.contains(this.skipSubtrees,t)||!!(n=t.parentElement)&&this.isInSkippedSubtree(n)},n}()}.call(this),function(){var t,e={}.hasOwnProperty;t=up.util,up.Config=function(n){function r(t){this.blueprintFn=null!=t?t:function(){return{}},this.reset()}return function(t,n){for(var r in n)e.call(n,r)&&(t[r]=n[r]);function o(){this.constructor=t}o.prototype=n.prototype,t.prototype=new o,t.__super__=n.prototype}(r,up.Class),r.prototype.reset=function(){return t.assign(this,this.blueprintFn())},r}()}.call(this),function(){var t,e,n=function(t,e){return function(){return t.apply(e,arguments)}};e=up.util,t=up.element,up.CSSTransition=function(){function r(t,r,o){this.element=t,this.lastFrameKebab=r,this.onTransitionEnd=n(this.onTransitionEnd,this),this.onFinishEvent=n(this.onFinishEvent,this),this.lastFrameKeysKebab=Object.keys(this.lastFrameKebab),e.some(this.lastFrameKeysKebab,(function(t){return t.match(/A-Z/)}))&&up.fail("Animation keys must be kebab-case"),this.finishEvent=o.finishEvent,this.duration=o.duration,this.easing=o.easing,this.finished=!1}return r.prototype.start=function(){return 0===this.lastFrameKeysKebab.length?(this.finished=!0,Promise.resolve()):(this.deferred=e.newDeferred(),this.pauseOldTransition(),this.startTime=new Date,this.startFallbackTimer(),this.listenToFinishEvent(),this.listenToTransitionEnd(),this.startMotion(),this.deferred.promise())},r.prototype.listenToFinishEvent=function(){if(this.finishEvent)return this.stopListenToFinishEvent=this.element.addEventListener(this.finishEvent,this.onFinishEvent)},r.prototype.onFinishEvent=function(t){return t.stopPropagation(),this.finish()},r.prototype.startFallbackTimer=function(){var t;return this.fallbackTimer=e.timer(this.duration+100,(t=this,function(){return t.finish()}))},r.prototype.stopFallbackTimer=function(){return clearTimeout(this.fallbackTimer)},r.prototype.listenToTransitionEnd=function(){return this.stopListenToTransitionEnd=up.on(this.element,"transitionend",this.onTransitionEnd)},r.prototype.onTransitionEnd=function(t){var n;if(t.target===this.element&&new Date-this.startTime>.25*this.duration&&(n=t.propertyName,e.contains(this.lastFrameKeysKebab,n)))return this.finish()},r.prototype.finish=function(){if(!this.finished)return this.finished=!0,this.stopFallbackTimer(),"function"==typeof this.stopListenToFinishEvent&&this.stopListenToFinishEvent(),"function"==typeof this.stopListenToTransitionEnd&&this.stopListenToTransitionEnd(),t.concludeCSSTransition(this.element),this.resumeOldTransition(),this.deferred.resolve()},r.prototype.pauseOldTransition=function(){var e,n,r;if(e=t.style(this.element,["transitionProperty","transitionDuration","transitionDelay","transitionTimingFunction"]),t.hasCSSTransition(e))return"all"!==e.transitionProperty&&(r=e.transitionProperty.split(/\s*,\s*/),n=t.style(this.element,r),this.setOldTransitionTargetFrame=t.setTemporaryStyle(this.element,n)),this.setOldTransition=t.concludeCSSTransition(this.element)},r.prototype.resumeOldTransition=function(){return"function"==typeof this.setOldTransitionTargetFrame&&this.setOldTransitionTargetFrame(),"function"==typeof this.setOldTransition?this.setOldTransition():void 0},r.prototype.startMotion=function(){return t.setStyle(this.element,{transitionProperty:Object.keys(this.lastFrameKebab).join(", "),transitionDuration:this.duration+"ms",transitionTimingFunction:this.easing}),t.setStyle(this.element,this.lastFrameKebab)},r}()}.call(this),function(){var t;t=up.util,up.element,up.DestructorPass=function(){function e(t,e){this.fragment=t,this.options=e,this.errors=[]}return e.prototype.run=function(){var e,n,r,o,i,s,u,a;for(o=0,s=(a=this.selectCleanables()).length;o<s;o++){if(e=a[o],r=t.pluckKey(e,"upDestructors"))for(i=0,u=r.length;i<u;i++)n=r[i],this.applyDestructorFunction(n,e);e.classList.remove("up-can-clean")}if(this.errors.length)throw up.error.failed("Errors while destroying",{errors:this.errors})},e.prototype.selectCleanables=function(){var e;return e=t.merge(this.options,{destroying:!0}),up.fragment.subtree(this.fragment,".up-can-clean",e)},e.prototype.applyDestructorFunction=function(t,e){var n;try{return t()}catch(t){return n=t,this.errors.push(n),up.log.error("up.destroy()","While destroying %o: %o",e,n),up.error.emitGlobal(n)}},e}()}.call(this),function(){var t,e,n={}.hasOwnProperty,r=[].slice;e=up.util,t=up.element,up.EventEmitter=function(o){function i(){return i.__super__.constructor.apply(this,arguments)}return function(t,e){for(var r in e)n.call(e,r)&&(t[r]=e[r]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(i,up.Record),i.prototype.keys=function(){return["target","event","baseLayer","callback","log","ensureBubbles"]},i.prototype.emit=function(){var t;return this.logEmission(),this.baseLayer?this.baseLayer.asCurrent((t=this,function(){return t.dispatchEvent()})):this.dispatchEvent(),this.event},i.prototype.dispatchEvent=function(){return this.target.dispatchEvent(this.event),this.ensureBubbles&&t.isDetached(this.target)&&document.dispatchEvent(this.event),"function"==typeof this.callback?this.callback(this.event):void 0},i.prototype.assertEmitted=function(){var t;return!(t=this.emit()).defaultPrevented||function(){throw up.error.aborted("Event "+t.type+" was prevented")}()},i.prototype.logEmission=function(){var t,n,o,i;if(up.log.isEnabled())return t=this.log,e.isArray(t)?(t=(o=t)[0],n=2<=o.length?r.call(o,1):[]):n=[],i=this.event.type,e.isString(t)?up.puts.apply(up,[i,t].concat(r.call(n))):!1!==t?up.puts(i,"Event "+i):void 0},i.fromEmitArgs=function(n,r){var o,i,s;return null==r&&(r={}),i=e.extractOptions(n),i=e.merge(r,i),e.isElementish(n[0])?i.target=t.get(n.shift()):n[0]instanceof up.Layer&&(i.layer=n.shift()),i.layer&&(o=up.layer.get(i.layer),null==i.target&&(i.target=o.element),null==i.baseLayer&&(i.baseLayer=o)),i.baseLayer&&(i.baseLayer=up.layer.get(i.baseLayer)),e.isString(i.target)?i.target=up.fragment.get(i.target,{layer:i.layer}):i.target||(i.target=document),(null!=(s=n[0])?s.preventDefault:void 0)?(i.event=n[0],null==i.log&&(i.log=n[0].log)):e.isString(n[0])?i.event=up.event.build(n[0],i):i.event=up.event.build(i),new this(i)},i}()}.call(this),function(){var t,e,n={}.hasOwnProperty;e=up.util,t=up.element,up.EventListener=function(r){function o(t){var e,n;this.nativeCallback=(e=this.nativeCallback,n=this,function(){return e.apply(n,arguments)}),o.__super__.constructor.call(this,t),this.key=this.constructor.buildKey(t),this.isDefault=up.framework.booting}return function(t,e){for(var r in e)n.call(e,r)&&(t[r]=e[r]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(o,up.Record),o.prototype.keys=function(){return["element","eventType","selector","callback","jQuery","guard","baseLayer","passive","once"]},o.prototype.bind=function(){var t,e,n;return(e=(t=this.element).upEventListeners||(t.upEventListeners={}))[this.key]&&up.fail("up.on(): The %o callback %o cannot be registered more than once",this.eventType,this.callback),e[this.key]=this,(n=this.element).addEventListener.apply(n,this.addListenerArgs())},o.prototype.addListenerArgs=function(){var t;return t=[this.eventType,this.nativeCallback],this.passive&&up.browser.canPassiveEventListener()&&t.push({passive:!0}),t},o.prototype.unbind=function(){var t,e;return(t=this.element.upEventListeners)&&delete t[this.key],(e=this.element).removeEventListener.apply(e,this.addListenerArgs())},o.prototype.nativeCallback=function(n){var r,o,i,s,u,a,l;if(this.once&&this.unbind(),s=n.target,this.selector&&(s=t.closest(s,e.evalOption(this.selector))),!this.guard||this.guard(n))return s?(u=this.jQuery?up.browser.jQuery(s):s,o=[n,u],1!==(a=this.callback.length)&&2!==a&&(i=up.syntax.data(s),o.push(i)),l=this,r=function(){return l.callback.apply(s,o)},this.baseLayer?this.baseLayer.asCurrent(r):r()):void 0},o.fromElement=function(t){var e;if(e=t.element.upEventListeners)return e[this.buildKey(t)]},o.buildKey=function(t){var n;return(n=t.callback).upUid||(n.upUid=e.uid()),[t.eventType,t.selector,t.callback.upUid].join("|")},o.unbindNonDefault=function(t){var n,r,o,i,s,u;if(s=t.upEventListeners){for(u=[],n=0,r=(i=e.values(s)).length;n<r;n++)(o=i[n]).isDefault?u.push(void 0):u.push(o.unbind());return u}},o}()}.call(this),function(){var t,e={}.hasOwnProperty;t=up.util,up.EventListenerGroup=function(n){function r(){return r.__super__.constructor.apply(this,arguments)}return function(t,n){for(var r in n)e.call(n,r)&&(t[r]=n[r]);function o(){this.constructor=t}o.prototype=n.prototype,t.prototype=new o,t.__super__=n.prototype}(r,up.Record),r.prototype.keys=function(){return["elements","eventTypes","selector","callback","jQuery","guard","baseLayer","passive","once"]},r.prototype.bind=function(){var e;return e=[],this.eachListenerAttributes((function(t){var n;return(n=new up.EventListener(t)).bind(),e.push((function(){return n.unbind()}))})),t.sequence(e)},r.prototype.eachListenerAttributes=function(t){var e,n,r,o,i,s;for(s=[],r=0,o=(i=this.elements).length;r<o;r++)e=i[r],s.push(function(){var r,o,i,s;for(s=[],r=0,o=(i=this.eventTypes).length;r<o;r++)n=i[r],s.push(t(this.listenerAttributes(e,n)));return s}.call(this));return s},r.prototype.listenerAttributes=function(e,n){return t.merge(this.attributes(),{element:e,eventType:n})},r.prototype.unbind=function(){return this.eachListenerAttributes((function(t){var e;if(e=up.EventListener.fromElement(t))return e.unbind()}))},r.fromBindArgs=function(e,n){var r,o,i,s,u,a;return r=(e=t.copy(e)).pop(),o=e[0].addEventListener?[e.shift()]:t.isJQuery(e[0])||t.isList(e[0])&&e[0][0].addEventListener?e.shift():[document],i=t.splitValues(e.shift()),(s=up.migrate.fixEventTypes)&&(i=s(i)),u=t.extractOptions(e),a=e[0],new this(t.merge({elements:o,eventTypes:i,selector:a,callback:r},u,n))},r}()}.call(this),function(){var t,e,n=function(t,e){return function(){return t.apply(e,arguments)}};e=up.util,t=up.element,up.FieldObserver=function(){function r(e,r,o){this.callback=o,this.isNewValues=n(this.isNewValues,this),this.scheduleValues=n(this.scheduleValues,this),this.fields=t.list(e),this.delay=r.delay,this.batch=r.batch}return r.prototype.start=function(){return this.scheduledValues=null,this.processedValues=this.readFieldValues(),this.currentTimer=void 0,this.callbackRunning=!1,this.unbind=up.on(this.fields,"input change",(t=this,function(){return t.check()}));var t},r.prototype.stop=function(){return this.unbind(),this.cancelTimer()},r.prototype.cancelTimer=function(){return clearTimeout(this.currentTimer),this.currentTimer=void 0},r.prototype.scheduleTimer=function(){return this.cancelTimer(),this.currentTimer=e.timer(this.delay,(t=this,function(){return t.currentTimer=void 0,t.requestCallback()}));var t},r.prototype.scheduleValues=function(t){return this.scheduledValues=t,this.scheduleTimer()},r.prototype.isNewValues=function(t){return!e.isEqual(t,this.processedValues)&&!e.isEqual(this.scheduledValues,t)},r.prototype.requestCallback=function(){var t,n,r,o,i;if(null!==this.scheduledValues&&!this.currentTimer&&!this.callbackRunning){if(n=this.changedValues(this.processedValues,this.scheduledValues),this.processedValues=this.scheduledValues,this.scheduledValues=null,this.callbackRunning=!0,t=[],this.batch)t.push(this.callback(n));else for(r in n)o=n[r],t.push(this.callback(o,r));return e.allSettled(t).then((i=this,function(){return i.callbackRunning=!1,i.requestCallback()}))}},r.prototype.changedValues=function(t,n){var r,o,i,s,u,a,l;for(r={},s=(s=Object.keys(t)).concat(Object.keys(n)),o=0,u=(s=e.uniq(s)).length;o<u;o++)l=t[i=s[o]],a=n[i],e.isEqual(l,a)||(r[i]=a);return r},r.prototype.readFieldValues=function(){return up.Params.fromFields(this.fields).toObject()},r.prototype.check=function(){var t;if(t=this.readFieldValues(),this.isNewValues(t))return this.scheduleValues(t)},r}()}.call(this),function(){var t,e,n,r,o={}.hasOwnProperty;up.util,e=up.element,t=["selectionStart","selectionEnd","scrollLeft","scrollTop"],r=function(e,n){var r,o,i,s;for(s=[],r=0,i=t.length;r<i;r++){o=t[r];try{s.push(n[o]=e[o])}catch(t){}}return s},n=function(t){var n;if(n=document.activeElement,e.isInSubtree(t,n))return n},up.FocusCapsule=function(i){function s(){return s.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)o.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(s,up.Record),s.prototype.keys=function(){return["selector","oldElement"].concat(t)},s.prototype.restore=function(t,n){var o;if(this.wasLost())return(o=e.get(t,this.selector))?(r(this,o),up.focus(o,n),!0):void 0},s.preserveWithin=function(t){var e,o;if(e=n(t))return o={oldElement:t,selector:up.fragment.toTarget(e)},r(e,o),new this(o)},s.prototype.wasLost=function(){return!n(this.oldElement)},s}()}.call(this),function(){var t;t=/^([^ >+(]+) (.+)$/,up.FragmentFinder=function(){function e(t){this.options=t,this.origin=this.options.origin,this.selector=this.options.selector,this.layer=this.options.layer}return e.prototype.find=function(){return this.findAroundOrigin()||this.findInLayer()},e.prototype.findAroundOrigin=function(){if(this.origin&&up.fragment.config.matchAroundOrigin&&!up.element.isDetached(this.origin))return this.findClosest()||this.findInVicinity()},e.prototype.findClosest=function(){return up.fragment.closest(this.origin,this.selector,this.options)},e.prototype.findInVicinity=function(){var e,n;if((n=this.selector.match(t))&&(e=up.fragment.closest(this.origin,n[1],this.options)))return up.fragment.getDumb(e,n[2])},e.prototype.findInLayer=function(){return up.fragment.getDumb(this.selector,this.options)},e}()}.call(this),function(){var t,e={}.hasOwnProperty;t=up.util,up.FragmentProcessor=function(n){function r(){return r.__super__.constructor.apply(this,arguments)}return function(t,n){for(var r in n)e.call(n,r)&&(t[r]=n[r]);function o(){this.constructor=t}o.prototype=n.prototype,t.prototype=new o,t.__super__=n.prototype}(r,up.Record),r.prototype.keys=function(){return["fragment","autoMeans","origin","layer"]},r.prototype.process=function(t){return this.tryProcess(t)},r.prototype.tryProcess=function(e){var n,r;if(t.isArray(e))return t.find(e,(r=this,function(t){return r.tryProcess(t)}));if(t.isFunction(e))return this.tryProcess(e(this.fragment,this.attributes()));if(t.isElement(e))return this.processElement();if(t.isString(e)){if("auto"===e)return this.tryProcess(this.autoMeans);if(n=e.match(/^(.+?)-if-(.+?)$/))return this.resolveCondition(n[2])&&this.process(n[1])}return this.processPrimitive(e)},r.prototype.resolveCondition=function(t){if("main"===t)return up.fragment.contains(this.fragment,":main")},r.prototype.findSelector=function(t){var e,n;if(e={layer:this.layer,origin:this.origin},n=up.fragment.get(this.fragment,t,e)||up.fragment.get(t,e))return n;up.warn("up.render()",'Could not find an element matching "%s"',t)},r}()}.call(this),function(){var t,e,n,r={}.hasOwnProperty;n=up.util,e=up.element,t={preventScroll:!0},up.FragmentFocus=function(o){function i(){return i.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(i,up.FragmentProcessor),i.prototype.keys=function(){return i.__super__.keys.call(this).concat(["hash","focusCapsule"])},i.prototype.processPrimitive=function(t){switch(t){case"keep":return this.restoreFocus();case"target":case!0:return this.focusElement(this.fragment);case"layer":return this.focusElement(this.layer.getFocusElement());case"main":return this.focusSelector(":main");case"hash":return this.focusHash();case"autofocus":return this.autofocus();default:if(n.isString(t))return this.focusSelector(t)}},i.prototype.processElement=function(t){return this.focusElement(t)},i.prototype.resolveCondition=function(t){return"lost"===t?this.wasFocusLost():i.__super__.resolveCondition.call(this,t)},i.prototype.focusSelector=function(t){var e;if(e=this.findSelector(t))return this.focusElement(e)},i.prototype.restoreFocus=function(){var e;return null!=(e=this.focusCapsule)?e.restore(this.fragment,t):void 0},i.prototype.autofocus=function(){var n;if(n=e.subtree(this.fragment,"[autofocus]")[0])return up.focus(n,t),!0},i.prototype.focusElement=function(e){return up.viewport.makeFocusable(e),up.focus(e,t),!0},i.prototype.focusHash=function(){var t;if(t=up.viewport.firstHashTarget(this.hash,{layer:this.layer}))return this.focusElement(t)},i.prototype.wasFocusLost=function(){var t;return null!=(t=this.focusCapsule)?t.wasLost():void 0},i}()}.call(this),function(){var t,e={}.hasOwnProperty;t=up.util,up.element,up.FragmentScrolling=function(n){function r(t){var e;"function"==typeof(e=up.migrate).handleScrollOptions&&e.handleScrollOptions(t),r.__super__.constructor.call(this,t)}return function(t,n){for(var r in n)e.call(n,r)&&(t[r]=n[r]);function o(){this.constructor=t}o.prototype=n.prototype,t.prototype=new o,t.__super__=n.prototype}(r,up.FragmentProcessor),r.prototype.keys=function(){return r.__super__.keys.apply(this,arguments).concat(["hash","mode","revealTop","revealMax","revealSnap","scrollBehavior","scrollSpeed"])},r.prototype.process=function(t){return r.__super__.process.call(this,t)||Promise.resolve()},r.prototype.processPrimitive=function(e){switch(e){case"reset":return this.reset();case"layer":return this.revealLayer();case"main":return this.revealSelector(":main");case"restore":return this.restore();case"hash":return this.hash&&up.viewport.revealHash(this.hash,this.attributes());case"target":case"reveal":case!0:return this.revealElement(this.fragment);default:if(t.isString(e))return this.revealSelector(e)}},r.prototype.processElement=function(t){return this.revealElement(t)},r.prototype.revealElement=function(t){return up.reveal(t,this.attributes())},r.prototype.revealSelector=function(t){var e;if(e=this.findSelector(t))return this.revealElement(e)},r.prototype.revealLayer=function(){return this.revealElement(this.layer.getBoxElement())},r.prototype.reset=function(){return up.viewport.resetScroll(t.merge(this.attributes(),{around:this.fragment}))},r.prototype.restore=function(){return up.viewport.restoreScroll(t.merge(this.attributes(),{around:this.fragment}))},r}()}.call(this),function(){var t,e;e=up.util,t=up.element,up.HTMLWrapper=function(){function n(t,e){var n,r,o,i;this.tagName=t,null==e&&(e={}),this.wrapMatch=(o=this.wrapMatch,i=this,function(){return o.apply(i,arguments)}),r="<"+this.tagName+"[^>]*>",n="</"+this.tagName+">",this.pattern=new RegExp(r+"(.|\\s)*?"+n,"ig"),this.attrName="up-wrapped-"+this.tagName}return n.prototype.strip=function(t){return t.replace(this.pattern,"")},n.prototype.wrap=function(t){return t.replace(this.pattern,this.wrapMatch)},n.prototype.wrapMatch=function(t){return this.didWrap=!0,'<meta name="'+this.attrName+'" value="'+e.escapeHTML(t)+'">'},n.prototype.unwrap=function(e){var n,r,o,i,s,u,a;if(this.didWrap){for(u=[],n=0,r=(i=e.querySelectorAll("meta[name='"+this.attrName+"']")).length;n<r;n++)o=(a=i[n]).getAttribute("value"),s=t.createFromHTML(o),u.push(t.replace(a,s));return u}},n}()}.call(this),function(){var t,e,n=function(t,e){return function(){return t.apply(e,arguments)}},r={}.hasOwnProperty,o=[].slice;t=up.element,e=up.util,up.Layer=function(i){function s(t){if(null==t&&(t={}),this.containsEventTarget=n(this.containsEventTarget,this),this.contains=n(this.contains,this),s.__super__.constructor.call(this,t),!this.mode)throw"missing { mode } option"}return function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(s,up.Record),s.prototype.keys=function(){return["element","stack","historyVisible","mode","context","lastScrollTops"]},s.prototype.defaults=function(){return{context:{},lastScrollTops:new up.Cache({size:30,key:up.history.normalizeURL})}},s.prototype.setupHandlers=function(){return up.link.convertClicks(this)},s.prototype.teardownHandlers=function(){},s.prototype.mainTargets=function(){return up.layer.mainTargets(this.mode)},s.prototype.sync=function(){},s.prototype.accept=function(){throw up.error.notImplemented()},s.prototype.dismiss=function(){throw up.error.notImplemented()},s.prototype.peel=function(t){return this.stack.peel(this,t)},s.prototype.evalOption=function(t){return e.evalOption(t,this)},s.prototype.isCurrent=function(){return this.stack.isCurrent(this)},s.prototype.isFront=function(){return this.stack.isFront(this)},s.prototype.isRoot=function(){return this.stack.isRoot(this)},s.prototype.isOverlay=function(){return this.stack.isOverlay(this)},s.prototype.isOpen=function(){return this.stack.isOpen(this)},s.prototype.isClosed=function(){return this.stack.isClosed(this)},s.getter("parent",(function(){return this.stack.parentOf(this)})),s.getter("child",(function(){return this.stack.childOf(this)})),s.getter("ancestors",(function(){return this.stack.ancestorsOf(this)})),s.getter("descendants",(function(){return this.stack.descendantsOf(this)})),s.getter("index",(function(){return this.stack.indexOf(this)})),s.prototype.getContentElement=function(){return this.contentElement||this.element},s.prototype.getBoxElement=function(){return this.boxElement||this.element},s.prototype.getFocusElement=function(){return this.getBoxElement()},s.prototype.getFirstSwappableElement=function(){throw up.error.notImplemented()},s.prototype.contains=function(e){return t.closest(e,up.layer.anySelector())===this.element},s.prototype.on=function(){var t;return t=1<=arguments.length?o.call(arguments,0):[],this.buildEventListenerGroup(t).bind()},s.prototype.off=function(){var t;return t=1<=arguments.length?o.call(arguments,0):[],this.buildEventListenerGroup(t).unbind()},s.prototype.buildEventListenerGroup=function(t){return up.EventListenerGroup.fromBindArgs(t,{guard:this.containsEventTarget,elements:[this.element],baseLayer:this})},s.prototype.containsEventTarget=function(t){return this.contains(t.target)},s.prototype.wasHitByMouseEvent=function(t){var e;return!(e=document.elementFromPoint(t.clientX,t.clientY))||this.contains(e)},s.prototype.buildEventEmitter=function(t){return up.EventEmitter.fromEmitArgs(t,{layer:this})},s.prototype.emit=function(){var t;return t=1<=arguments.length?o.call(arguments,0):[],this.buildEventEmitter(t).emit()},s.prototype.isDetached=function(){return t.isDetached(this.element)},s.prototype.saveHistory=function(){if(this.isHistoryVisible())return this.savedTitle=document.title,this.savedLocation=up.history.location},s.prototype.restoreHistory=function(){if(this.savedLocation&&(up.history.push(this.savedLocation),this.savedLocation=null),this.savedTitle)return document.title=this.savedTitle,this.savedTitle=null},s.prototype.asCurrent=function(t){return this.stack.asCurrent(this,t)},s.prototype.updateHistory=function(t){if(t.history)return e.isString(t.title)&&(this.title=t.title),e.isString(t.location)?this.location=t.location:void 0},s.accessor("title",{get:function(){return this.showsLiveHistory()?document.title:this.savedTitle},set:function(t){if(this.savedTitle=t,this.showsLiveHistory())return document.title=t}}),s.accessor("location",{get:function(){return this.showsLiveHistory()?up.history.location:this.savedLocation},set:function(t){if(this.savedLocation!==(t=up.history.normalizeURL(t))&&(this.savedLocation=t,this.emit("up:layer:location:changed",{location:t,log:!1}),this.showsLiveHistory()))return up.history.push(t)}}),s.prototype.isHistoryVisible=function(){return this.historyVisible&&(this.isRoot()||this.parent.isHistoryVisible())},s.prototype.showsLiveHistory=function(){return this.isHistoryVisible()&&this.isFront()&&(up.history.config.enabled||this.isRoot())},s.prototype.selector=function(t){return this.constructor.selector(t)},s.selector=function(t){throw up.error.notImplemented()},s.prototype.toString=function(){throw up.error.notImplemented()},s.prototype.affix=function(){var e;return e=1<=arguments.length?o.call(arguments,0):[],t.affix.apply(t,[this.getFirstSwappableElement()].concat(o.call(e)))},s}()}.call(this),function(){var t,e,n={}.hasOwnProperty;t=up.element,e=up.util,up.Layer.Overlay=function(r){function o(t){o.__super__.constructor.call(this,t),!0===this.dismissable?this.dismissable=["button","key","outside"]:!1===this.dismissable?this.dismissable=[]:this.dismissable=e.splitValues(this.dismissable),this.acceptLocation&&(this.acceptLocation=new up.URLPattern(this.acceptLocation)),this.dismissLocation&&(this.dismissLocation=new up.URLPattern(this.dismissLocation))}return function(t,e){for(var r in e)n.call(e,r)&&(t[r]=e[r]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(o,up.Layer),o.prototype.keys=function(){return o.__super__.keys.call(this).concat(["position","align","size","origin","class","backdrop","openAnimation","closeAnimation","openDuration","closeDuration","openEasing","closeEasing","backdropOpenAnimation","backdropCloseAnimation","dismissable","dismissLabel","dismissAriaLabel","onOpened","onAccept","onAccepted","onDismiss","onDismissed","acceptEvent","dismissEvent","acceptLocation","dismissLocation","opening"])},o.prototype.callback=function(t){var e;if(e=this[t])return e.bind(this)},o.prototype.createElement=function(t){var n;return this.nesting||(this.nesting=this.suggestVisualNesting()),n=e.compactObject({align:this.align,position:this.position,size:this.size,class:this.class,nesting:this.nesting}),this.element=this.affixPart(t,null,n)},o.prototype.createBackdropElement=function(t){return this.backdropElement=this.affixPart(t,"backdrop")},o.prototype.createViewportElement=function(t){return this.viewportElement=this.affixPart(t,"viewport",{"up-viewport":""})},o.prototype.createBoxElement=function(t){return this.boxElement=this.affixPart(t,"box")},o.prototype.createContentElement=function(t,e){return this.contentElement=this.affixPart(t,"content"),this.contentElement.appendChild(e)},o.prototype.createDismissElement=function(e){return this.dismissElement=this.affixPart(e,"dismiss",{"up-dismiss":'":button"',"aria-label":this.dismissAriaLabel}),t.affix(this.dismissElement,'span[aria-hidden="true"]',{text:this.dismissLabel})},o.prototype.affixPart=function(e,n,r){return null==r&&(r={}),t.affix(e,this.selector(n),r)},o.selector=function(t){return e.compact(["up",this.mode,t]).join("-")},o.prototype.suggestVisualNesting=function(){var t;return t=this.parent,this.mode===t.mode?1+t.suggestVisualNesting():0},o.prototype.setupHandlers=function(){var t,e;return o.__super__.setupHandlers.call(this),this.overlayFocus=new up.OverlayFocus(this),this.supportsDismissMethod("button")&&this.createDismissElement(this.getBoxElement()),this.supportsDismissMethod("outside")&&(this.unbindParentClicked=this.parent.on("up:click",(e=this,function(t,n){var r;return r=e.origin&&e.origin.contains(n),e.onOutsideClicked(t,r)})),this.viewportElement&&up.on(this.viewportElement,"up:click",function(t){return function(e){if(e.target===t.viewportElement)return t.onOutsideClicked(e,!0)}}(this))),this.supportsDismissMethod("key")&&(this.unbindEscapePressed=up.event.onEscape(function(t){return function(e){return t.onEscapePressed(e)}}(this))),this.registerClickCloser("up-accept",function(t){return function(e,n){return t.accept(e,n)}}(this)),this.registerClickCloser("up-dismiss",function(t){return function(e,n){return t.dismiss(e,n)}}(this)),"function"==typeof(t=up.migrate).registerLayerCloser&&t.registerLayerCloser(this),this.registerEventCloser(this.acceptEvent,this.accept),this.registerEventCloser(this.dismissEvent,this.dismiss)},o.prototype.onOutsideClicked=function(t,e){return e&&up.event.halt(t),this.dismiss(":outside")},o.prototype.onEscapePressed=function(t){var e;if(this.isFront()){if(e=up.form.focusedField())return e.blur();if(this.supportsDismissMethod("key"))return up.event.halt(t),this.dismiss(":key")}},o.prototype.registerClickCloser=function(e,n){return this.on("up:click","["+e+"]",(function(r){var o,i,s,u;return up.event.halt(r),i=r.target,u=t.jsonAttr(i,e),o={origin:i},(s=new up.OptionsParser(o,i)).booleanOrString("animation"),s.string("easing"),s.number("duration"),s.string("confirm"),n(u,o)}))},o.prototype.registerEventCloser=function(t,e){var n;if(t)return this.on(t,(n=this,function(t){return t.preventDefault(),e.call(n,t)}))},o.prototype.tryAcceptForLocation=function(){return this.tryCloseForLocation(this.acceptLocation,this.accept)},o.prototype.tryDismissForLocation=function(){return this.tryCloseForLocation(this.dismissLocation,this.dismiss)},o.prototype.tryCloseForLocation=function(t,n){var r,o,i;if(t&&(o=this.location)&&(i=t.recognize(o)))return r=e.merge(i,{location:o}),n.call(this,r)},o.prototype.teardownHandlers=function(){return o.__super__.teardownHandlers.call(this),"function"==typeof this.unbindParentClicked&&this.unbindParentClicked(),"function"==typeof this.unbindEscapePressed&&this.unbindEscapePressed(),this.overlayFocus.teardown()},o.prototype.destroyElements=function(t){var n,r,o,i;return i=this,n=function(){return i.startCloseAnimation(t)},o=function(e){return function(){return e.onElementsRemoved(),"function"==typeof t.onFinished?t.onFinished():void 0}}(this),r=e.merge(t,{animation:n,onFinished:o,log:!1}),up.destroy(this.element,r)},o.prototype.onElementsRemoved=function(){},o.prototype.startAnimation=function(t){var e,n;return null==t&&(t={}),n=up.animate(this.getBoxElement(),t.boxAnimation,t),this.backdrop&&!up.motion.isNone(t.boxAnimation)&&(e=up.animate(this.backdropElement,t.backdropAnimation,t)),Promise.all([n,e])},o.prototype.startOpenAnimation=function(t){var e,n;return null==t&&(t={}),this.startAnimation({boxAnimation:null!=(e=t.animation)?e:this.evalOption(this.openAnimation),backdropAnimation:"fade-in",easing:t.easing||this.openEasing,duration:t.duration||this.openDuration}).then((n=this,function(){return n.wasEverVisible=!0}))},o.prototype.startCloseAnimation=function(t){var e,n;return null==t&&(t={}),e=this.wasEverVisible&&(null!=(n=t.animation)?n:this.evalOption(this.closeAnimation)),this.startAnimation({boxAnimation:e,backdropAnimation:"fade-out",easing:t.easing||this.closeEasing,duration:t.duration||this.closeDuration})},o.prototype.accept=function(t,e){return null==t&&(t=null),null==e&&(e={}),this.executeCloseChange("accept",t,e)},o.prototype.dismiss=function(t,e){return null==t&&(t=null),null==e&&(e={}),this.executeCloseChange("dismiss",t,e)},o.prototype.supportsDismissMethod=function(t){return e.contains(this.dismissable,t)},o.prototype.executeCloseChange=function(t,n,r){return r=e.merge(r,{verb:t,value:n,layer:this}),new up.Change.CloseLayer(r).execute()},o.prototype.getFirstSwappableElement=function(){return this.getContentElement().children[0]},o.prototype.toString=function(){return this.mode+" overlay"},o}()}.call(this),function(){var t={}.hasOwnProperty;up.element,up.Layer.OverlayWithViewport=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return function(e,n){for(var r in n)t.call(n,r)&&(e[r]=n[r]);function o(){this.constructor=e}o.prototype=n.prototype,e.prototype=new o,e.__super__=n.prototype}(n,up.Layer.Overlay),n.bodyShifter=new up.BodyShifter,n.getParentElement=function(){return document.body},n.prototype.createElements=function(t){return this.shiftBody(),this.createElement(this.constructor.getParentElement()),this.backdrop&&this.createBackdropElement(this.element),this.createViewportElement(this.element),this.createBoxElement(this.viewportElement),this.createContentElement(this.boxElement,t)},n.prototype.onElementsRemoved=function(){return this.unshiftBody()},n.prototype.shiftBody=function(){return this.constructor.bodyShifter.shift()},n.prototype.unshiftBody=function(){return this.constructor.bodyShifter.unshift()},n.prototype.sync=function(){if(this.isDetached()&&this.isOpen())return this.constructor.getParentElement().appendChild(this.element)},n}()}.call(this),function(){var t={}.hasOwnProperty;up.Layer.Cover=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return function(e,n){for(var r in n)t.call(n,r)&&(e[r]=n[r]);function o(){this.constructor=e}o.prototype=n.prototype,e.prototype=new o,e.__super__=n.prototype}(n,up.Layer.OverlayWithViewport),n.mode="cover",n}()}.call(this),function(){var t={}.hasOwnProperty;up.Layer.Drawer=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return function(e,n){for(var r in n)t.call(n,r)&&(e[r]=n[r]);function o(){this.constructor=e}o.prototype=n.prototype,e.prototype=new o,e.__super__=n.prototype}(n,up.Layer.OverlayWithViewport),n.mode="drawer",n}()}.call(this),function(){var t={}.hasOwnProperty;up.Layer.Modal=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return function(e,n){for(var r in n)t.call(n,r)&&(e[r]=n[r]);function o(){this.constructor=e}o.prototype=n.prototype,e.prototype=new o,e.__super__=n.prototype}(n,up.Layer.OverlayWithViewport),n.mode="modal",n}()}.call(this),function(){var t={}.hasOwnProperty;up.element,up.Layer.OverlayWithTether=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return function(e,n){for(var r in n)t.call(n,r)&&(e[r]=n[r]);function o(){this.constructor=e}o.prototype=n.prototype,e.prototype=new o,e.__super__=n.prototype}(n,up.Layer.Overlay),n.prototype.createElements=function(t){return this.origin||up.fail("Missing { origin } option"),this.tether=new up.Tether({anchor:this.origin,align:this.align,position:this.position}),this.createElement(this.tether.parent),this.createContentElement(this.element,t),this.tether.start(this.element)},n.prototype.onElementsRemoved=function(){return this.tether.stop()},n.prototype.sync=function(){if(this.isOpen())return this.isDetached()||this.tether.isDetached()?this.dismiss(":detached",{animation:!1,preventable:!1}):this.tether.sync()},n}()}.call(this),function(){var t={}.hasOwnProperty;up.Layer.Popup=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return function(e,n){for(var r in n)t.call(n,r)&&(e[r]=n[r]);function o(){this.constructor=e}o.prototype=n.prototype,e.prototype=new o,e.__super__=n.prototype}(n,up.Layer.OverlayWithTether),n.mode="popup",n}()}.call(this),function(){var t,e,n={}.hasOwnProperty;e=up.util,t=up.element,up.Layer.Root=function(r){function o(t){o.__super__.constructor.call(this,t),this.setupHandlers()}return function(t,e){for(var r in e)n.call(e,r)&&(t[r]=e[r]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(o,up.Layer),o.mode="root",o.getter("element",(function(){return t.root})),o.prototype.getFirstSwappableElement=function(){return document.body},o.selector=function(){return"html"},o.prototype.setupHandlers=function(){if(!this.element.upHandlersApplied)return this.element.upHandlersApplied=!0,o.__super__.setupHandlers.call(this)},o.prototype.sync=function(){return this.setupHandlers()},o.prototype.accept=function(){return this.cannotCloseRoot()},o.prototype.dismiss=function(){return this.cannotCloseRoot()},o.prototype.cannotCloseRoot=function(){throw up.error.failed("Cannot close the root layer")},o.prototype.reset=function(){return e.assign(this,this.defaults())},o.prototype.toString=function(){return"root layer"},o}()}.call(this),function(){var t,e,n=[].slice;e=up.util,t=up.element,up.LayerLookup=function(){function r(){var t,r,o,i;i=arguments[0],t=2<=arguments.length?n.call(arguments,1):[],this.stack=i,!1!==(r=e.parseArgIntoOptions(t,"layer")).normalizeLayerOptions&&up.layer.normalizeOptions(r),this.values=e.splitValues(r.layer),this.origin=r.origin,this.baseLayer=r.baseLayer||this.stack.current,e.isString(this.baseLayer)&&(o=e.merge(r,{baseLayer:this.stack.current,normalizeLayerOptions:!1}),this.baseLayer=new this.constructor(this.stack,this.baseLayer,o).first())}return r.prototype.originLayer=function(){if(this.origin)return this.forElement(this.origin)},r.prototype.first=function(){return this.all()[0]},r.prototype.all=function(){var t,n;return t=e.flatMap(this.values,(n=this,function(t){return n.resolveValue(t)})),t=e.compact(t),e.uniq(t)},r.prototype.forElement=function(n){return n=t.get(n),e.find(this.stack.reversed(),(function(t){return t.contains(n)}))},r.prototype.forIndex=function(t){return this.stack[t]},r.prototype.resolveValue=function(t){if(t instanceof up.Layer)return t;if(e.isNumber(t))return this.forIndex(t);if(/^\d+$/.test(t))return this.forIndex(Number(t));if(e.isElementish(t))return this.forElement(t);switch(t){case"any":return[this.baseLayer].concat(n.call(this.stack.reversed()));case"current":return this.baseLayer;case"closest":return this.stack.selfAndAncestorsOf(this.baseLayer);case"parent":return this.baseLayer.parent;case"ancestor":case"ancestors":return this.baseLayer.ancestors;case"child":return this.baseLayer.child;case"descendant":case"descendants":return this.baseLayer.descendants;case"new":return"new";case"root":return this.stack.root;case"overlay":case"overlays":return e.reverse(this.stack.overlays);case"front":return this.stack.front;case"origin":return this.originLayer();default:return up.fail("Unknown { layer } option: %o",t)}},r}()}.call(this),function(){var t,e={}.hasOwnProperty,n=[].slice;t=up.util,up.element,up.LayerStack=function(r){function o(){o.__super__.constructor.call(this),this.currentOverrides=[],this.push(this.buildRoot())}return function(t,n){for(var r in n)e.call(n,r)&&(t[r]=n[r]);function o(){this.constructor=t}o.prototype=n.prototype,t.prototype=new o,t.__super__=n.prototype}(o,Array),o.prototype.buildRoot=function(){return up.layer.build({mode:"root",stack:this})},o.prototype.remove=function(e){return t.remove(this,e)},o.prototype.peel=function(e,n){var r,o,i,s;return r=t.reverse(e.descendants),i=t.merge(n,{preventable:!1}),o=function(t){return t.dismiss(":peel",i)},s=t.map(r,o),Promise.all(s)},o.prototype.reset=function(){return this.peel(this.root,{animation:!1}),this.currentOverrides=[],this.root.reset()},o.prototype.isOpen=function(t){return t.index>=0},o.prototype.isClosed=function(t){return!this.isOpen(t)},o.prototype.parentOf=function(t){return this[t.index-1]},o.prototype.childOf=function(t){return this[t.index+1]},o.prototype.ancestorsOf=function(e){return t.reverse(this.slice(0,e.index))},o.prototype.selfAndAncestorsOf=function(t){return[t].concat(n.call(t.ancestors))},o.prototype.descendantsOf=function(t){return this.slice(t.index+1)},o.prototype.isRoot=function(t){return this[0]===t},o.prototype.isOverlay=function(t){return!this.isRoot(t)},o.prototype.isCurrent=function(t){return this.current===t},o.prototype.isFront=function(t){return this.front===t},o.prototype.get=function(){var t;return t=1<=arguments.length?n.call(arguments,0):[],this.getAll.apply(this,t)[0]},o.prototype.getAll=function(){var t;return t=1<=arguments.length?n.call(arguments,0):[],function(t,e,n){n.prototype=t.prototype;var r=new n,o=t.apply(r,e);return Object(o)===o?o:r}(up.LayerLookup,[this].concat(n.call(t)),(function(){})).all()},o.prototype.sync=function(){var t,e,n,r;for(r=[],t=0,n=this.length;t<n;t++)e=this[t],r.push(e.sync());return r},o.prototype.asCurrent=function(t,e){try{return this.currentOverrides.push(t),e()}finally{this.currentOverrides.pop()}},o.prototype.reversed=function(){return t.reverse(this)},o.prototype.dismissOverlays=function(e,n){var r,o,i,s,u;for(null==e&&(e=null),null==n&&(n={}),n.dismissable=!1,u=[],r=0,o=(s=t.reverse(this.overlays)).length;r<o;r++)i=s[r],u.push(i.dismiss(e,n));return u},o.prototype[""+t.copy.key]=function(){return t.copyArrayLike(this)},t.getter(o.prototype,"count",(function(){return this.length})),t.getter(o.prototype,"root",(function(){return this[0]})),t.getter(o.prototype,"overlays",(function(){return this.root.descendants})),t.getter(o.prototype,"current",(function(){return t.last(this.currentOverrides)||this.front})),t.getter(o.prototype,"front",(function(){return t.last(this)})),o}()}.call(this),function(){up.util,up.LinkFeedbackURLs=function(){function t(t){var e,n,r,o;r=up.feedback.normalizeURL,this.isSafe=up.link.isSafe(t),this.isSafe&&((n=t.getAttribute("href"))&&"#"!==n&&(this.href=r(n)),(o=t.getAttribute("up-href"))&&(this.upHREF=r(o)),(e=t.getAttribute("up-alias"))&&(this.aliasPattern=new up.URLPattern(e,r)))}return t.prototype.isCurrent=function(t){return this.isSafe&&!!(this.href&&this.href===t||this.upHREF&&this.upHREF===t||this.aliasPattern&&this.aliasPattern.test(t,!1))},t}()}.call(this),function(){var t,e;e=up.util,t=up.element,up.LinkPreloader=function(){function n(){var t,e;this.considerPreload=(t=this.considerPreload,e=this,function(){return t.apply(e,arguments)})}return n.prototype.observeLink=function(t){if(up.link.isSafe(t))return this.on(t,"mouseenter",(e=this,function(t){return e.considerPreload(t,!0)})),this.on(t,"mousedown touchstart",function(t){return function(e){return t.considerPreload(e)}}(this)),this.on(t,"mouseleave",function(t){return function(e){return t.stopPreload(e)}}(this));var e},n.prototype.on=function(t,e,n){return up.on(t,e,{passive:!0},n)},n.prototype.considerPreload=function(t,e){var n;if((n=t.target)!==this.currentLink&&(this.reset(),this.currentLink=n,up.link.shouldFollowEvent(t,n)))return e?this.preloadAfterDelay(n):this.preloadNow(n)},n.prototype.stopPreload=function(t){if(t.target===this.currentLink)return this.reset()},n.prototype.reset=function(){var t;if(this.currentLink)return clearTimeout(this.timer),(null!=(t=this.currentRequest)?t.preload:void 0)&&this.currentRequest.abort(),this.currentLink=void 0,this.currentRequest=void 0},n.prototype.preloadAfterDelay=function(n){var r,o,i;return r=null!=(o=t.numberAttr(n,"up-delay"))?o:up.link.config.preloadDelay,this.timer=e.timer(r,(i=this,function(){return i.preloadNow(n)}))},n.prototype.preloadNow=function(e){var n,r;if(!t.isDetached(e))return r=this,n=function(t){return r.currentRequest=t},up.log.muteUncriticalRejection(up.link.preload(e,{onQueued:n})),this.queued=!0;this.reset()},n}()}.call(this),function(){var t,e,n=function(t,e){return function(){return t.apply(e,arguments)}};e=up.util,t=up.element,up.MotionController=function(){function r(t){this.whileForwardingFinishEvent=n(this.whileForwardingFinishEvent,this),this.unmarkCluster=n(this.unmarkCluster,this),this.markCluster=n(this.markCluster,this),this.whenElementFinished=n(this.whenElementFinished,this),this.emitFinishEvent=n(this.emitFinishEvent,this),this.finishOneElement=n(this.finishOneElement,this),this.isActive=n(this.isActive,this),this.expandFinishRequest=n(this.expandFinishRequest,this),this.finish=n(this.finish,this),this.startFunction=n(this.startFunction,this),this.activeClass="up-"+t,this.dataKey="up-"+t+"-finished",this.selector="."+this.activeClass,this.finishEvent="up:"+t+":finish",this.finishCount=0,this.clusterCount=0}return r.prototype.startFunction=function(n,r,o){var i,s,u;return null==o&&(o={}),n=t.list(n),i=function(){return up.log.muteUncriticalRejection(r())},o.trackMotion=null!=(s=o.trackMotion)?s:up.motion.isEnabled(),!1===o.trackMotion?e.microtask(i):(o.trackMotion=!1,this.finish(n).then((u=this,function(){var t;return t=(t=u.whileForwardingFinishEvent(n,i)).then((function(){return u.unmarkCluster(n)})),u.markCluster(n,t),t})))},r.prototype.startMotion=function(t,e,n){var r,o,i;return null==n&&(n={}),o=function(){return e.start()},r=function(){return e.finish()},i=up.on(t,this.finishEvent,r),this.startFunction(t,o,n).then(i)},r.prototype.finish=function(t){var n;return this.finishCount++,0!==this.clusterCount&&up.motion.isEnabled()?(t=this.expandFinishRequest(t),n=e.map(t,this.finishOneElement),Promise.all(n)):Promise.resolve()},r.prototype.expandFinishRequest=function(n){return n?e.flatMap(n,(r=this,function(e){return t.list(t.closest(e,r.selector),t.all(e,r.selector))})):t.all(this.selector);var r},r.prototype.isActive=function(t){return t.classList.contains(this.activeClass)},r.prototype.finishOneElement=function(t){return this.emitFinishEvent(t),this.whenElementFinished(t)},r.prototype.emitFinishEvent=function(t,n){return null==n&&(n={}),n=e.merge({target:t,log:!1},n),up.emit(this.finishEvent,n)},r.prototype.whenElementFinished=function(t){return t[this.dataKey]||Promise.resolve()},r.prototype.markCluster=function(t,e){var n,r,o,i;for(this.clusterCount++,i=[],r=0,o=t.length;r<o;r++)(n=t[r]).classList.add(this.activeClass),i.push(n[this.dataKey]=e);return i},r.prototype.unmarkCluster=function(t){var e,n,r,o;for(this.clusterCount--,o=[],n=0,r=t.length;n<r;n++)(e=t[n]).classList.remove(this.activeClass),o.push(delete e[this.dataKey]);return o},r.prototype.whileForwardingFinishEvent=function(t,n){var r,o,i;return t.length<2?n():(i=this,r=function(n){if(!n.forwarded)return e.each(t,(function(t){if(t!==n.target&&i.isActive(t))return i.emitFinishEvent(t,{forwarded:!0})}))},o=up.on(t,this.finishEvent,r),n().then(o))},r.prototype.reset=function(){return this.finish().then((t=this,function(){return t.finishCount=0,t.clusterCount=0}));var t},r}()}.call(this),function(){var t,e;e=up.util,t=up.element,up.OptionsParser=function(){function n(t,e,n){this.options=t,this.element=e,this.fail=null!=n?n.fail:void 0}return n.prototype.string=function(e,n){return this.parse(t.attr,e,n)},n.prototype.boolean=function(e,n){return this.parse(t.booleanAttr,e,n)},n.prototype.number=function(e,n){return this.parse(t.numberAttr,e,n)},n.prototype.booleanOrString=function(e,n){return this.parse(t.booleanOrStringAttr,e,n)},n.prototype.json=function(e,n){return this.parse(t.jsonAttr,e,n)},n.prototype.parse=function(t,n,r){var o,i,s,u,a,l,p,c,h,f;if(null==r&&(r={}),i=e.wrapList(null!=(h=r.attr)?h:this.attrNameForKey(n)),f=this.options[n],this.element)for(l=0,p=i.length;l<p;l++)o=i[l],null==f&&(f=t(this.element,o));if(null==f&&(f=r.default),(c=r.normalize)&&(f=c(f)),e.isDefined(f)&&(this.options[n]=f),(r.fail||this.fail)&&(u=up.fragment.failKey(n)))return s=e.compact(e.map(i,this.deriveFailAttrName)),a=e.merge(r,{attr:s,fail:!1}),this.parse(t,u,a)},n.prototype.deriveFailAttrName=function(t){if(0===t.indexOf("up-"))return"up-fail-"+t.slice(3)},n.prototype.attrNameForKey=function(t){return"up-"+e.camelToKebabCase(t)},n}()}.call(this),function(){var t,e;t=up.element,e=up.util,up.OverlayFocus=function(){function n(t){this.layer=t,this.focusElement=this.layer.getFocusElement()}return n.prototype.moveToFront=function(){var e;if(!this.enabled)return this.enabled=!0,this.untrapFocus=up.on("focusin",(e=this,function(t){return e.onFocus(t)})),this.unsetAttrs=t.setTemporaryAttrs(this.focusElement,{tabindex:"0",role:"dialog","aria-modal":"true"}),this.focusTrapBefore=t.affix(this.focusElement,"beforebegin","up-focus-trap[tabindex=0]"),this.focusTrapAfter=t.affix(this.focusElement,"afterend","up-focus-trap[tabindex=0]")},n.prototype.moveToBack=function(){return this.teardown()},n.prototype.teardown=function(){if(this.enabled)return this.enabled=!1,this.untrapFocus(),this.unsetAttrs(),t.remove(this.focusTrapBefore),t.remove(this.focusTrapAfter)},n.prototype.onFocus=function(t){var e;if(e=t.target,!this.processingFocusEvent)return this.processingFocusEvent=!0,e===this.focusTrapBefore?this.focusEnd():e!==this.focusTrapAfter&&this.layer.contains(e)||this.focusStart(),this.processingFocusEvent=!1},n.prototype.focusStart=function(t){return up.focus(this.focusElement,t)},n.prototype.focusEnd=function(){return this.focusLastDescendant(this.layer.getBoxElement())||this.focusStart()},n.prototype.focusLastDescendant=function(t){var n,r,o,i;for(r=0,o=(i=e.reverse(t.children)).length;r<o;r++)if(n=i[r],up.viewport.tryFocus(n)||this.focusLastDescendant(n))return!0},n}()}.call(this),function(){var t,e,n={}.hasOwnProperty;e=up.util,t=up.element,up.Params=function(r){function o(t){var e,n;this.arrayEntryToQuery=(e=this.arrayEntryToQuery,n=this,function(){return e.apply(n,arguments)}),this.clear(),this.addAll(t)}return function(t,e){for(var r in e)n.call(e,r)&&(t[r]=e[r]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(o,up.Class),o.prototype.clear=function(){return this.entries=[]},o.prototype[""+e.copy.key]=function(){return new up.Params(this)},o.prototype.toObject=function(){var t,n,r,o,i,s,u;for(i={},n=0,r=(s=this.entries).length;n<r;n++)o=(t=s[n]).name,u=t.value,e.isBasicObjectProperty(o)||(this.isArrayKey(o)?(i[o]||(i[o]=[]),i[o].push(u)):i[o]=u);return i},o.prototype.toArray=function(){return this.entries},o.prototype.toFormData=function(){var t,e,n,r,o;for(e=new FormData,n=0,r=(o=this.entries).length;n<r;n++)t=o[n],e.append(t.name,t.value);return e.entries||(e.originalArray=this.entries),e},o.prototype.toQuery=function(){var t;return t=e.map(this.entries,this.arrayEntryToQuery),(t=e.compact(t)).join("&")},o.prototype.arrayEntryToQuery=function(t){var n,r;if(r=t.value,!this.isBinaryValue(r))return n=encodeURIComponent(t.name),e.isGiven(r)&&(n+="=",n+=encodeURIComponent(r)),n},o.prototype.isBinaryValue=function(t){return t instanceof Blob},o.prototype.hasBinaryValues=function(){var t;return t=e.map(this.entries,"value"),e.some(t,this.isBinaryValue)},o.prototype.toURL=function(t){var n,r;return n=[t,this.toQuery()],n=e.filter(n,e.isPresent),r=e.contains(t,"?")?"&":"?",n.join(r)},o.prototype.add=function(t,e){return this.entries.push({name:t,value:e})},o.prototype.addAll=function(t){var n,r;if(!e.isMissing(t))return t instanceof this.constructor?(n=this.entries).push.apply(n,t.entries):e.isArray(t)?(r=this.entries).push.apply(r,t):e.isString(t)?this.addAllFromQuery(t):e.isFormData(t)?this.addAllFromFormData(t):e.isObject(t)?this.addAllFromObject(t):up.fail("Unsupport params type: %o",t)},o.prototype.addAllFromObject=function(t){var n,r,o,i,s;for(n in r=[],t)o=t[n],s=e.isArray(o)?o:[o],r.push(function(){var t,e,r;for(r=[],t=0,e=s.length;t<e;t++)i=s[t],r.push(this.add(n,i));return r}.call(this));return r},o.prototype.addAllFromQuery=function(t){var n,r,o,i,s,u,a,l;for(a=[],n=0,r=(s=t.split("&")).length;n<r;n++)(i=s[n])?(o=(u=i.split("="))[0],l=u[1],o=decodeURIComponent(o),l=e.isGiven(l)?decodeURIComponent(l):null,a.push(this.add(o,l))):a.push(void 0);return a},o.prototype.addAllFromFormData=function(t){return e.eachIterator(t.entries(),(n=this,function(t){return n.add.apply(n,t)}));var n},o.prototype.set=function(t,e){return this.delete(t),this.add(t,e)},o.prototype.delete=function(t){return this.entries=e.reject(this.entries,this.matchEntryFn(t))},o.prototype.matchEntryFn=function(t){return function(e){return e.name===t}},o.prototype.get=function(t){return this.isArrayKey(t)?this.getAll(t):this.getFirst(t)},o.prototype.getFirst=function(t){var n;return null!=(n=e.find(this.entries,this.matchEntryFn(t)))?n.value:void 0},o.prototype.getAll=function(t){var n;return this.isArrayKey(t)?this.getAll(t):(n=e.map(this.entries,this.matchEntryFn(t)),e.map(n,"value"))},o.prototype.isArrayKey=function(t){return e.endsWith(t,"[]")},o.prototype[""+e.isBlank.key]=function(){return 0===this.entries.length},o.fromForm=function(t){return t=up.fragment.get(t),this.fromFields(up.form.fields(t))},o.fromFields=function(t){var n,r,o,i,s;for(i=new this,r=0,o=(s=e.wrapList(t)).length;r<o;r++)n=s[r],i.addField(n);return i},o.prototype.addField=function(e){var n,r,o,i,s,u,a,l,p,c,h,f,d;if(new this.constructor,(u=(e=t.get(e)).name)&&!e.disabled){if(f=e.tagName,d=e.type,"SELECT"===f){for(c=[],r=0,i=(l=e.querySelectorAll("option")).length;r<i;r++)(a=l[r]).selected?c.push(this.add(u,a.value)):c.push(void 0);return c}if("checkbox"!==d&&"radio"!==d){if("file"===d){for(h=[],o=0,s=(p=e.files).length;o<s;o++)n=p[o],h.push(this.add(u,n));return h}return this.add(u,e.value)}if(e.checked)return this.add(u,e.value)}},o.prototype[""+e.isEqual.key]=function(t){return t&&this.constructor===t.constructor&&e.isEqual(this.entries,t.entries)},o.fromURL=function(t){var n,r;return n=new this,(r=e.parseURL(t).search)&&(r=r.replace(/^\?/,""),n.addAll(r)),n},o.stripURL=function(t){return e.normalizeURL(t,{search:!1})},o}()}.call(this),function(){var t={}.hasOwnProperty;up.util,up.Rect=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return function(e,n){for(var r in n)t.call(n,r)&&(e[r]=n[r]);function o(){this.constructor=e}o.prototype=n.prototype,e.prototype=new o,e.__super__=n.prototype}(n,up.Record),n.prototype.keys=function(){return["left","top","width","height"]},n.getter("bottom",(function(){return this.top+this.height})),n.getter("right",(function(){return this.left+this.width})),n.fromElement=function(t){return new this(t.getBoundingClientRect())},n}()}.call(this),function(){var t,e,n,r,o,i,s,u,a,l;t=up.util,up.RenderOptions=(n={hungry:!0,keep:!0,source:!0,saveScroll:!0,fail:"auto"},r={solo:!1,confirm:!1,feedback:!1},o=["url","method","origin","headers","params","cache","solo","confirm","feedback","origin","baseLayer","fail"].concat(["keep","hungry","history","source","saveScroll","fallback","navigate"]),e=["url","content","fragment","document"],u=function(t){if(t.navigate)return up.fragment.config.navigateOptions},a=function(t){if(t.preload)return r},s=function(t){var e,n,r,o;for(e in n={},t)o=t[e],(r=up.fragment.successKey(e))&&(n[r]=o);return n},i=function(e){var n;return n=t.merge(t.pick(e,o),s(e)),l(n)},{preprocess:l=function(e){var r;return"function"==typeof(r=up.migrate).handleRenderOptions&&r.handleRenderOptions(e),t.merge(n,u(e),e,a(e))},assertContentGiven:function(n){if(!t.some(e,(function(e){return t.isGiven(n[e])})))return n.defaultToEmptyContent?n.content="":up.fail("up.render() needs either { "+e.join(", ")+" } option")},deriveFailOptions:i})}.call(this),function(){var t={}.hasOwnProperty;up.util,up.element,up.RenderResult=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return function(e,n){for(var r in n)t.call(n,r)&&(e[r]=n[r]);function o(){this.constructor=e}o.prototype=n.prototype,e.prototype=new o,e.__super__=n.prototype}(n,up.Record),n.prototype.keys=function(){return["fragments","layer"]},n}()}.call(this),function(){var t,e={}.hasOwnProperty,n=[].slice;t=up.util,up.element,up.Request=function(r){function o(e){o.__super__.constructor.call(this,e),this.params=new up.Params(this.params),this.headers||(this.headers={}),this.preload&&(this.cache=!0),null==this.wrapMethod&&(this.wrapMethod=up.network.config.wrapMethod),this.normalizeForCaching(),e.basic||(this.layer=up.layer.get(this.layer),this.failLayer=up.layer.get(this.failLayer||this.layer),this.context||(this.context=this.layer.context||{}),this.failContext||(this.failContext=this.failLayer.context||{}),this.mode||(this.mode=this.layer.mode),this.failMode||(this.failMode=this.failLayer.mode),this.deferred=t.newDeferred(),this.state="new")}return function(t,n){for(var r in n)e.call(n,r)&&(t[r]=n[r]);function o(){this.constructor=t}o.prototype=n.prototype,t.prototype=new o,t.__super__=n.prototype}(o,up.Record),o.prototype.keys=function(){return["method","url","hash","params","target","failTarget","headers","timeout","preload","cache","clearCache","layer","mode","context","failLayer","failMode","failContext","origin","solo","queueTime","wrapMethod","contentType","payload","onQueued"]},o.delegate(["then","catch","finally"],"deferred"),o.prototype.followState=function(e){return t.delegate(this,["deferred","state","preload"],(function(){return e}))},o.prototype.normalizeForCaching=function(){return this.method=t.normalizeMethod(this.method),this.extractHashFromURL(),this.transferParamsToURL(),this.url=t.normalizeURL(this.url)},o.prototype.evictExpensiveAttrs=function(){return t.task((e=this,function(){return e.layer=void 0,e.failLayer=void 0,e.origin=void 0}));var e},o.prototype.extractHashFromURL=function(){var t,e;if(t=null!=(e=this.url)?e.match(/^([^#]*)(#.+)$/):void 0)return this.url=t[1],this.hash=t[2]},o.prototype.transferParamsToURL=function(){if(this.url&&!this.allowsPayload()&&!t.isBlank(this.params))return this.url=this.params.toURL(this.url),this.params.clear()},o.prototype.isSafe=function(){return up.network.isSafeMethod(this.method)},o.prototype.allowsPayload=function(){return t.methodAllowsPayload(this.method)},o.prototype.will302RedirectWithGET=function(){return this.isSafe()||"POST"===this.method},o.prototype.willCache=function(){return"auto"===this.cache?up.network.config.autoCache(this):this.cache},o.prototype.runQueuedCallbacks=function(){var e;return t.always(this,(e=this,function(){return e.evictExpensiveAttrs()})),"function"==typeof this.onQueued?this.onQueued(this):void 0},o.prototype.load=function(){var t;if("new"===this.state)return this.state="loading",this.xhr=new up.Request.XHRRenderer(this).buildAndSend({onload:(t=this,function(){return t.onXHRLoad()}),onerror:function(t){return function(){return t.onXHRError()}}(this),ontimeout:function(t){return function(){return t.onXHRTimeout()}}(this),onabort:function(t){return function(){return t.onXHRAbort()}}(this)})},o.prototype.loadPage=function(){return up.network.abort(),new up.Request.FormRenderer(this).buildAndSubmit()},o.prototype.onXHRLoad=function(){var t,e;return t=["Server responded HTTP %d to %s %s (%d characters)",(e=this.extractResponseFromXHR()).status,this.method,this.url,e.text.length],this.emit("up:request:loaded",{request:e.request,response:e,log:t}),this.respondWith(e)},o.prototype.onXHRError=function(){var t;return t="Fatal error during request",this.deferred.reject(up.error.failed(t)),this.emit("up:request:fatal",{log:t})},o.prototype.onXHRTimeout=function(){return this.setAbortedState("Requested timed out")},o.prototype.onXHRAbort=function(){return this.setAbortedState()},o.prototype.abort=function(){if(this.setAbortedState()&&this.xhr)return this.xhr.abort()},o.prototype.setAbortedState=function(t){if(null==t&&(t=["Request to %s %s was aborted",this.method,this.url]),"new"===this.state||"loading"===this.state)return this.state="aborted",this.emit("up:request:aborted",{log:t}),this.deferred.reject(up.error.aborted(t)),!0},o.prototype.respondWith=function(t){if("loading"===this.state)return this.state="loaded",t.ok?this.deferred.resolve(t):this.deferred.reject(t)},o.prototype.csrfHeader=function(){return up.protocol.csrfHeader()},o.prototype.csrfParam=function(){return up.protocol.csrfParam()},o.prototype.csrfToken=function(){if(!this.isSafe()&&!this.isCrossOrigin())return up.protocol.csrfToken()},o.prototype.isCrossOrigin=function(){return t.isCrossOrigin(this.url)},o.prototype.extractResponseFromXHR=function(){var e,n,r;return n={method:this.method,url:this.url,request:this,xhr:this.xhr,text:this.xhr.responseText,status:this.xhr.status,title:up.protocol.titleFromXHR(this.xhr),target:up.protocol.targetFromXHR(this.xhr),acceptLayer:up.protocol.acceptLayerFromXHR(this.xhr),dismissLayer:up.protocol.dismissLayerFromXHR(this.xhr),eventPlans:up.protocol.eventPlansFromXHR(this.xhr),context:up.protocol.contextFromXHR(this.xhr),clearCache:up.protocol.clearCacheFromXHR(this.xhr)},e=up.protocol.methodFromXHR(this.xhr),(r=up.protocol.locationFromXHR(this.xhr))&&(e||t.matchURLs(n.url,r)||(e="GET"),n.url=r),e&&(n.method=e),new up.Response(n)},o.prototype.cacheKey=function(){return JSON.stringify([this.method,this.url,this.params.toQuery(),this.metaProps()])},o.prototype.metaProps=function(){var e,n,r,o,i,s;for(o={},e=0,r=(i=t.evalOption(up.network.config.requestMetaKeys,this)).length;e<r;e++)s=this[n=i[e]],t.isGiven(s)&&(o[n]=s);return o},o.prototype.buildEventEmitter=function(t){return up.EventEmitter.fromEmitArgs(t,{request:this,layer:this.layer})},o.prototype.emit=function(){var t;return t=1<=arguments.length?n.call(arguments,0):[],this.buildEventEmitter(t).emit()},o.prototype.assertEmitted=function(){var t;return t=1<=arguments.length?n.call(arguments,0):[],this.buildEventEmitter(t).assertEmitted()},o.getter("description",(function(){return this.method+" "+this.url})),o}()}.call(this),function(){var t={}.hasOwnProperty;up.util,up.Request.Cache=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return function(e,n){for(var r in n)t.call(n,r)&&(e[r]=n[r]);function o(){this.constructor=e}o.prototype=n.prototype,e.prototype=new o,e.__super__=n.prototype}(n,up.Cache),n.prototype.maxSize=function(){return up.network.config.cacheSize},n.prototype.expiryMillis=function(){return up.network.config.cacheExpiry},n.prototype.normalizeStoreKey=function(t){return up.Request.wrap(t).cacheKey()},n.prototype.clear=function(t){return t&&"*"!==t&&!0!==t?(t=new up.URLPattern(t),this.each((e=this,function(n,r){if(t.test(r.url))return e.store.remove(n)}))):n.__super__.clear.call(this);var e},n}()}.call(this),function(){var t,e,n;n=up.util,e=up.element,t=["GET","POST"],up.Request.FormRenderer=function(){function r(t){this.request=t}return r.prototype.buildAndSubmit=function(){var r,o,i,s,u,a;return this.params=n.copy(this.request.params),r=this.request.url,u=this.request.method,a=up.Params.fromURL(r),this.params.addAll(a),r=up.Params.stripURL(r),n.contains(t,u)||(u=up.protocol.wrapMethod(u,this.params)),this.form=e.affix(document.body,"form.up-request-loader",{method:u,action:r}),(o=this.request.contentType)&&this.form.setAttribute("enctype",o),(i=this.request.csrfParam())&&(s=this.request.csrfToken())&&this.params.add(i,s),n.each(this.params.toArray(),this.addField.bind(this)),up.browser.submitForm(this.form)},r.prototype.addField=function(t){return e.affix(this.form,"input[type=hidden]",t)},r}()}.call(this),function(){var t,e={}.hasOwnProperty;t=up.util,up.Request.Queue=function(n){function r(t){var e,n;null==t&&(t={}),this.concurrency=null!=(e=t.concurrency)?e:function(){return up.network.config.concurrency},this.badResponseTime=null!=(n=t.badResponseTime)?n:function(){return up.network.config.badResponseTime},this.reset()}return function(t,n){for(var r in n)e.call(n,r)&&(t[r]=n[r]);function o(){this.constructor=t}o.prototype=n.prototype,t.prototype=new o,t.__super__=n.prototype}(r,up.Class),r.prototype.reset=function(){return this.queuedRequests=[],this.currentRequests=[],clearTimeout(this.checkSlowTimout),this.emittedSlow=!1},r.getter("allRequests",(function(){return this.currentRequests.concat(this.queuedRequests)})),r.prototype.asap=function(e){var n;return e.runQueuedCallbacks(),t.always(e,(n=this,function(t){return n.onRequestSettled(e,t)})),e.queueTime=new Date,this.setSlowTimer(),this.hasConcurrencyLeft()?this.sendRequestNow(e):this.queueRequest(e)},r.prototype.promoteToForeground=function(t){if(t.preload)return t.preload=!1,this.setSlowTimer()},r.prototype.setSlowTimer=function(){var e,n;return e=t.evalOption(this.badResponseTime),this.checkSlowTimout=t.timer(e,(n=this,function(){return n.checkSlow()}))},r.prototype.hasConcurrencyLeft=function(){var e;return-1===(e=t.evalOption(this.concurrency))||this.currentRequests.length<e},r.prototype.isBusy=function(){return this.currentRequests.length>0},r.prototype.queueRequest=function(t){return this.queuedRequests.push(t)},r.prototype.pluckNextRequest=function(){var e;return(e=t.find(this.queuedRequests,(function(t){return!t.preload})))||(e=this.queuedRequests[0]),t.remove(this.queuedRequests,e)},r.prototype.sendRequestNow=function(t){return t.emit("up:request:load",{log:["Loading %s %s",t.method,t.url]}).defaultPrevented?t.abort("Prevented by event listener"):(t.normalizeForCaching(),this.currentRequests.push(t),t.load())},r.prototype.onRequestSettled=function(e,n){return t.remove(this.currentRequests,e),n instanceof up.Response&&n.ok&&up.network.registerAliasForRedirect(e,n),this.checkSlow(),t.microtask((r=this,function(){return r.poke()}));var r},r.prototype.poke=function(){var t;if(this.hasConcurrencyLeft()&&(t=this.pluckNextRequest()))return this.sendRequestNow(t)},r.prototype.abort=function(e){var n,r,o,i;for(null==e&&(e=!0),n=0,r=(i=[this.currentRequests,this.queuedRequests]).length;n<r;n++)return o=i[n],void t.filter(o,function(t){return function(n){return t.requestMatches(n,e)}}(this)).forEach((function(e){return e.abort(),t.remove(o,e)}))},r.prototype.abortExcept=function(e,n){var r;return null==n&&(n=!0),r=e.cacheKey(),this.abort((function(e){return e.cacheKey()!==r&&t.evalOption(n,e)}))},r.prototype.requestMatches=function(e,n){return e===n||t.evalOption(n,e)},r.prototype.checkSlow=function(){var t;if(t=this.isSlow(),this.emittedSlow!==t)return this.emittedSlow=t,t?up.emit("up:request:late",{log:"Server is slow to respond"}):up.emit("up:request:recover",{log:"Slow requests were loaded"})},r.prototype.isSlow=function(){var e,n,r;return r=new Date,n=t.evalOption(this.badResponseTime),e=t.reject(this.allRequests,"preload"),t.some(e,(function(t){return r-t.queueTime>=n-1}))},r}()}.call(this),function(){var t,e;t="multipart/form-data",e=up.util,up.Request.XHRRenderer=function(){function n(t){this.request=t}return n.prototype.buildAndSend=function(t){var n,r,o,i,s,u,a,l;for(s in this.xhr=new XMLHttpRequest,this.params=e.copy(this.request.params),this.request.timeout&&(this.xhr.timeout=this.request.timeout),this.xhr.open(this.getMethod(),this.request.url),u=this.request.metaProps())l=u[s],i=up.protocol.headerize(s),this.addHeader(i,l);for(i in a=this.request.headers)l=a[i],this.addHeader(i,l);return(r=this.request.csrfHeader())&&(o=this.request.csrfToken())&&this.addHeader(r,o),this.addHeader(up.protocol.headerize("version"),up.version),(n=this.getContentType())&&this.addHeader("Content-Type",n),e.assign(this.xhr,t),this.xhr.send(this.getPayload()),this.xhr},n.prototype.getMethod=function(){return this.method||(this.method=this.request.method,this.request.wrapMethod&&!this.request.will302RedirectWithGET()&&(this.method=up.protocol.wrapMethod(this.method,this.params))),this.method},n.prototype.getContentType=function(){return this.finalizePayload(),this.contentType},n.prototype.getPayload=function(){return this.finalizePayload(),this.payload},n.prototype.addHeader=function(t,n){return(e.isOptions(n)||e.isArray(n))&&(n=JSON.stringify(n)),this.xhr.setRequestHeader(t,n)},n.prototype.finalizePayload=function(){if(!this.payloadFinalized)return this.payloadFinalized=!0,this.payload=this.request.payload,this.contentType=this.request.contentType,!this.payload&&this.request.allowsPayload()?(this.contentType||(this.contentType=this.params.hasBinaryValues()?t:"application/x-www-form-urlencoded"),this.contentType===t?(this.contentType=null,this.payload=this.params.toFormData()):this.payload=this.params.toQuery().replace(/%20/g,"+")):void 0},n}()}.call(this),function(){var t={}.hasOwnProperty;up.util,up.Response=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return function(e,n){for(var r in n)t.call(n,r)&&(e[r]=n[r]);function o(){this.constructor=e}o.prototype=n.prototype,e.prototype=new o,e.__super__=n.prototype}(n,up.Record),n.prototype.keys=function(){return["method","url","text","status","request","xhr","target","title","acceptLayer","dismissLayer","eventPlans","context","clearCache","headers"]},n.prototype.defaults=function(){return{headers:{}}},n.getter("ok",(function(){return this.status&&this.status>=200&&this.status<=299})),n.prototype.getHeader=function(t){var e;return this.headers[t]||(null!=(e=this.xhr)?e.getResponseHeader(t):void 0)},n.getter("contentType",(function(){return this.getHeader("Content-Type")})),n.getter("json",(function(){return this.parsedJSON||(this.parsedJSON=JSON.parse(this.text))})),n}()}.call(this),function(){var t,e;e=up.util,t=up.element,up.ResponseDoc=function(){function n(t){this.noscriptWrapper=new up.HTMLWrapper("noscript"),this.scriptWrapper=new up.HTMLWrapper("script"),this.root=this.parseDocument(t)||this.parseFragment(t)||this.parseContent(t)}return n.prototype.parseDocument=function(e){return this.parse(e.document,t.createDocumentFromHTML)},n.prototype.parseContent=function(n){var r,o,i;return r=n.content||"",i=n.target||up.fail("must pass a { target } when passing { content }"),o=t.createFromSelector(i),e.isString(r)?(r=this.wrapHTML(r),o.innerHTML=r):o.appendChild(r),o},n.prototype.parseFragment=function(t){return this.parse(t.fragment)},n.prototype.parse=function(n,r){return null==r&&(r=t.createFromHTML),e.isString(n)&&(n=r(n=this.wrapHTML(n))),n},n.prototype.rootSelector=function(){return up.fragment.toTarget(this.root)},n.prototype.wrapHTML=function(t){return t=this.noscriptWrapper.wrap(t),up.fragment.config.runScripts?this.scriptWrapper.wrap(t):this.scriptWrapper.strip(t)},n.prototype.getTitle=function(){var t;return this.titleParsed||(this.title=null!=(t=this.root.querySelector("head title"))?t.textContent:void 0,this.titleParsed=!0),this.title},n.prototype.select=function(t){return up.fragment.subtree(this.root,t,{layer:"any"})[0]},n.prototype.finalizeElement=function(t){return this.noscriptWrapper.unwrap(t),this.scriptWrapper.unwrap(t)},n}()}.call(this),function(){var t,e;t=up.element,e=up.util,up.RevealMotion=function(){function n(e,n){var r,o,i,s,u,a,l,p,c;this.element=e,this.options=null!=n?n:{},c=up.viewport.config,this.viewport=t.get(this.options.viewport)||up.viewport.get(this.element),this.obstructionsLayer=up.layer.get(this.viewport),this.snap=null!=(r=null!=(o=this.options.snap)?o:this.options.revealSnap)?r:c.revealSnap,this.padding=null!=(i=null!=(s=this.options.padding)?s:this.options.revealPadding)?i:c.revealPadding,this.top=null!=(u=null!=(a=this.options.top)?a:this.options.revealTop)?u:c.revealTop,this.max=null!=(l=null!=(p=this.options.max)?p:this.options.revealMax)?l:c.revealMax,this.topObstructions=c.fixedTop,this.bottomObstructions=c.fixedBottom}return n.prototype.start=function(){var t,n,r,o,i;return i=this.getViewportRect(this.viewport),t=up.Rect.fromElement(this.element),this.max&&(n=e.evalOption(this.max,this.element),t.height=Math.min(t.height,n)),this.addPadding(t),this.substractObstructions(i),i.height<0?up.error.failed.async("Viewport has no visible area"):(r=o=this.viewport.scrollTop,this.top||t.height>i.height?r+=t.top-i.top:t.top<i.top?r-=i.top-t.top:t.bottom>i.bottom&&(r+=t.bottom-i.bottom),e.isNumber(this.snap)&&r<this.snap&&t.top<.5*i.height&&(r=0),r!==o?this.scrollTo(r):Promise.resolve())},n.prototype.scrollTo=function(t){return this.scrollMotion=new up.ScrollMotion(this.viewport,t,this.options),this.scrollMotion.start()},n.prototype.getViewportRect=function(){return up.viewport.isRoot(this.viewport)?new up.Rect({left:0,top:0,width:up.viewport.rootWidth(),height:up.viewport.rootHeight()}):up.Rect.fromElement(this.viewport)},n.prototype.addPadding=function(t){return t.top-=this.padding,t.height+=2*this.padding},n.prototype.selectObstructions=function(t){return up.fragment.all(t.join(","),{layer:this.obstructionsLayer})},n.prototype.substractObstructions=function(t){var e,n,r,o,i,s,u,a,l,p;for(n=0,o=(a=this.selectObstructions(this.topObstructions)).length;n<o;n++)s=a[n],(e=(u=up.Rect.fromElement(s)).bottom-t.top)>0&&(t.top+=e,t.height-=e);for(p=[],r=0,i=(l=this.selectObstructions(this.bottomObstructions)).length;r<i;r++)s=l[r],u=up.Rect.fromElement(s),(e=t.bottom-u.top)>0?p.push(t.height-=e):p.push(void 0);return p},n.prototype.finish=function(){var t;return null!=(t=this.scrollMotion)?t.finish():void 0},n}()}.call(this),function(){var t;t=up.util,up.ScrollMotion=function(){function e(t,e,n){var r,o,i,s,u,a;this.scrollable=t,this.targetTop=e,null==n&&(n={}),this.abort=(u=this.abort,a=this,function(){return u.apply(a,arguments)}),this.behavior=null!=(r=null!=(o=n.behavior)?o:n.scrollBehavior)?r:"auto",this.speed=.065*(null!=(i=null!=(s=n.speed)?s:n.scrollSpeed)?i:up.viewport.config.scrollSpeed)}return e.prototype.start=function(){return new Promise((t=this,function(e,n){return t.resolve=e,t.reject=n,"smooth"===t.behavior&&up.motion.isEnabled()?t.startAnimation():t.finish()}));var t},e.prototype.startAnimation=function(){return this.startTime=Date.now(),this.startTop=this.scrollable.scrollTop,this.topDiff=this.targetTop-this.startTop,this.duration=Math.sqrt(Math.abs(this.topDiff))/this.speed,requestAnimationFrame((t=this,function(){return t.animationFrame()}));var t},e.prototype.animationFrame=function(){var e,n,r;if(!this.settled)return this.frameTop&&Math.abs(this.frameTop-this.scrollable.scrollTop)>1.5&&this.abort("Animation aborted due to user intervention"),e=Date.now()-this.startTime,n=Math.min(e/this.duration,1),this.frameTop=this.startTop+t.simpleEase(n)*this.topDiff,Math.abs(this.targetTop-this.frameTop)<.3?this.finish():(this.scrollable.scrollTop=this.frameTop,requestAnimationFrame((r=this,function(){return r.animationFrame()})))},e.prototype.abort=function(t){return this.settled=!0,this.reject(up.error.aborted(t))},e.prototype.finish=function(){return this.settled=!0,this.scrollable.scrollTop=this.targetTop,this.resolve()},e}()}.call(this),function(){var t,e;t=up.element,e=up.util,up.Selector=function(){function n(t,e){this.selectors=t,this.filters=null!=e?e:[],this.unionSelector=this.selectors.join(",")||"match-none"}return n.prototype.matches=function(e){return t.matches(e,this.unionSelector)&&this.passesFilter(e)},n.prototype.closest=function(t){var e;return this.matches(t)?t:(e=t.parentElement)?this.closest(e):void 0},n.prototype.passesFilter=function(t){return e.every(this.filters,(function(e){return e(t)}))},n.prototype.descendants=function(n){var r,o;return r=e.flatMap(this.selectors,(function(e){return t.all(n,e)})),e.filter(r,(o=this,function(t){return o.passesFilter(t)}))},n.prototype.subtree=function(t){var e;return e=[],this.matches(t)&&e.push(t),e.push.apply(e,this.descendants(t)),e},n}()}.call(this),function(){var t;up.store||(up.store={}),t=up.util,up.store.Memory=function(){function e(){this.clear()}return e.prototype.clear=function(){return this.data={}},e.prototype.get=function(t){return this.data[t]},e.prototype.set=function(t,e){return this.data[t]=e},e.prototype.remove=function(t){return delete this.data[t]},e.prototype.keys=function(){return Object.keys(this.data)},e.prototype.size=function(){return this.keys().length},e.prototype.values=function(){return t.values(this.data)},e}()}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty;up.util,up.store.Session=function(n){function r(e){this.remove=t(this.remove,this),this.set=t(this.set,this),this.rootKey=e,this.loadFromSessionStorage()}return function(t,n){for(var r in n)e.call(n,r)&&(t[r]=n[r]);function o(){this.constructor=t}o.prototype=n.prototype,t.prototype=new o,t.__super__=n.prototype}(r,up.store.Memory),r.prototype.clear=function(){return r.__super__.clear.call(this),this.saveToSessionStorage()},r.prototype.set=function(t,e){return r.__super__.set.call(this,t,e),this.saveToSessionStorage()},r.prototype.remove=function(t){return r.__super__.remove.call(this,t),this.saveToSessionStorage()},r.prototype.loadFromSessionStorage=function(){var t;try{(t="undefined"!=typeof sessionStorage&&null!==sessionStorage?sessionStorage.getItem(this.rootKey):void 0)&&(this.data=JSON.parse(t))}catch(t){}return this.data||(this.data={})},r.prototype.saveToSessionStorage=function(){var t;t=JSON.stringify(this.data);try{return"undefined"!=typeof sessionStorage&&null!==sessionStorage?sessionStorage.setItem(this.rootKey,t):void 0}catch(t){}},r}()}.call(this),function(){var t,e,n=function(t,e){return function(){return t.apply(e,arguments)}};e=up.util,t=up.element,up.Tether=function(){function r(e){var r;this.sync=n(this.sync,this),this.scheduleSync=n(this.scheduleSync,this),"function"==typeof(r=up.migrate).handleTetherOptions&&r.handleTetherOptions(e),this.anchor=e.anchor,this.align=e.align,this.position=e.position,this.alignAxis="top"===this.position||"bottom"===this.position?"horizontal":"vertical",this.viewport=up.viewport.get(this.anchor),this.parent=this.viewport===t.root?document.body:this.viewport,this.syncOnScroll=!this.viewport.contains(this.anchor.offsetParent)}return r.prototype.start=function(t){return this.element=t,this.element.style.position="absolute",this.setOffset(0,0),this.sync(),this.changeEventSubscription("on")},r.prototype.stop=function(){return this.changeEventSubscription("off")},r.prototype.changeEventSubscription=function(t){if(up[t](window,"resize",this.scheduleSync),this.syncOnScroll)return up[t](this.viewport,"scroll",this.scheduleSync)},r.prototype.scheduleSync=function(){return clearTimeout(this.syncTimer),this.syncTimer=e.task(this.sync)},r.prototype.isDetached=function(){return t.isDetached(this.parent)||t.isDetached(this.anchor)},r.prototype.sync=function(){var t,n,r,o;switch(n=this.element.getBoundingClientRect(),t=this.anchor.getBoundingClientRect(),r=void 0,o=void 0,this.alignAxis){case"horizontal":o=function(){switch(this.position){case"top":return t.top-n.height;case"bottom":return t.top+t.height}}.call(this),r=function(){switch(this.align){case"left":return t.left;case"center":return t.left+.5*(t.width-n.width);case"right":return t.left+t.width-n.width}}.call(this);break;case"vertical":o=function(){switch(this.align){case"top":return t.top;case"center":return t.top+.5*(t.height-n.height);case"bottom":return t.top+t.height-n.height}}.call(this),r=function(){switch(this.position){case"left":return t.left-n.width;case"right":return t.left+t.width}}.call(this)}return e.isDefined(r)||e.isDefined(o)?this.moveTo(r,o):up.fail("Invalid tether constraints: %o",this.describeConstraints())},r.prototype.describeConstraints=function(){return{position:this.position,align:this.align}},r.prototype.moveTo=function(t,e){var n;return n=this.element.getBoundingClientRect(),this.setOffset(t-n.left+this.offsetLeft,e-n.top+this.offsetTop)},r.prototype.setOffset=function(e,n){return this.offsetLeft=e,this.offsetTop=n,t.setStyle(this.element,{left:e,top:n})},r}()}.call(this),function(){var t;t=up.util,up.URLPattern=function(){function e(e,n){var r,o;this.normalizeURL=null!=n?n:t.normalizeURL,this.groups=[],o=[],r=[],t.splitValues(e).forEach((function(t){return"-"===t[0]?r.push(t.substring(1)):o.push(t)})),this.positiveRegexp=this.buildRegexp(o,!0),this.negativeRegexp=this.buildRegexp(r,!1)}return e.prototype.buildRegexp=function(e,n){var r,o;if(e.length)return r=(r=(r=e.map(this.normalizeURL).map(t.escapeRegExp).join("|")).replace(/\\\*/g,".*?")).replace(/(\:|\\\$)([a-z][\w-]*)/gi,(o=this,function(t,e,r){return"\\$"===e?(n&&o.groups.push({name:r,cast:Number}),"(\\d+)"):(n&&o.groups.push({name:r,cast:String}),"([^/?#]+)")})),new RegExp("^"+r+"$")},e.prototype.test=function(t,e){return null==e&&(e=!0),e&&(t=this.normalizeURL(t)),this.positiveRegexp.test(t)&&!this.isExcluded(t)},e.prototype.recognize=function(t,e){var n,r;if(null==e&&(e=!0),e&&(t=this.normalizeURL(t)),(n=this.positiveRegexp.exec(t))&&!this.isExcluded(t))return r={},this.groups.forEach((function(t,e){var o;if(o=n[e+1])return r[t.name]=t.cast(o)})),r},e.prototype.isExcluded=function(t){var e;return null!=(e=this.negativeRegexp)?e.test(t):void 0},e}()}.call(this),function(){var t,e,n,r,o,i;up.framework=(i=up.util,e=!0,n=function(){return up.emit("up:framework:reset",{log:!1})},t=function(){return up.browser.isSupported()?(up.emit("up:framework:boot",{log:!1}),e=!1,up.event.onReady((function(){return up.emit("up:app:boot",{log:"Booting user application"})}))):"function"==typeof console.log?console.log("Unpoly doesn't support this browser. Framework was not booted."):void 0},r=function(){return e=!0},o=function(){return e=!1},i.literal({boot:t,startExtension:r,stopExtension:o,reset:n,get_booting:function(){return e}}))}.call(this),function(){var t,e,n,r,o,i,s,u,a,l,p,c,h,f,d,m,y,g,v=[].slice;up.event=(m=up.util,s=up.element,d=function(){var t,e,n,r,o;for(o=[],e=0,n=(r=[window,document,s.root,document.body]).length;e<n;e++)t=r[e],o.push(up.EventListener.unbindNonDefault(t));return o},n=function(){var t;return t=1<=arguments.length?v.call(arguments,0):[],r(t)},t=function(){var t;return t=1<=arguments.length?v.call(arguments,0):[],r(t,{jQuery:!0})},r=function(t,e){return up.EventListenerGroup.fromBindArgs(t,e).bind()},y=function(){var t;return t=1<=arguments.length?v.call(arguments,0):[],up.EventListenerGroup.fromBindArgs(t).unbind()},i=function(t){return up.EventEmitter.fromEmitArgs(t)},u=function(){var t;return t=1<=arguments.length?v.call(arguments,0):[],i(t).emit()},o=function(){var t,e,n,r,o;return t=1<=arguments.length?v.call(arguments,0):[],r=m.extractOptions(t),o=t[0]||r.type||up.fail("Expected event type to be passed as string argument or { type } property"),(e=document.createEvent("Event")).initEvent(o,!0,!0),m.assign(e,m.omit(r,["type","target"])),up.browser.isIE11()&&(n=e.preventDefault,e.preventDefault=function(){return n.call(e),m.getter(e,"defaultPrevented",(function(){return!0}))}),e},e=function(){var t;return t=1<=arguments.length?v.call(arguments,0):[],i(t).assertEmitted()},h=function(t){return n("keydown",(function(e){if(g(e))return t(e)}))},g=function(t){var e;return"Escape"===(e=t.key)||"Esc"===e},l=function(t){return t.stopImmediatePropagation(),t.preventDefault()},f=function(t){return"loading"!==document.readyState?t():document.addEventListener("DOMContentLoaded",t)},c=["metaKey","shiftKey","ctrlKey","altKey"],p=function(t){return(m.isUndefined(t.button)||0===t.button)&&!m.some(c,(function(e){return t[e]}))},a=function(t,e,n){var r;return null==n&&(n=[]),(r=up.event.build(e,m.pick(t,n))).originalEvent=t,["stopPropagation","stopImmediatePropagation","preventDefault"].forEach((function(e){var n;return n=r[e],r[e]=function(){return t[e](),n.call(r)}})),t.defaultPrevented&&r.preventDefault(),r},n("up:click","a[up-emit]",(function(t,e){var n,r,o;if(p(t))return r=s.attr(e,"up-emit"),n=s.jsonAttr(e,"up-emit-props"),o=a(t,r),m.assign(o,n),up.emit(e,o)})),n("up:framework:reset",d),{on:n,$on:t,off:y,build:o,emit:u,assertEmitted:e,onEscape:h,halt:l,onReady:f,isUnmodified:p,fork:a,keyModifiers:c}),up.on=up.event.on,up.$on=up.event.$on,up.off=up.event.off,up.$off=up.event.off,up.emit=up.event.emit}.call(this),function(){var t,e,n,r,o,i,s,u,a,l,p,c,h,f,d,m,y,g,v,b;up.protocol=(v=up.util,a=up.element,c=function(t){return"X-Up"+t.replace(/(^.|[A-Z])/g,(function(t){return"-"+t.toUpperCase()}))},p=function(t,e,n){var r;if(null==n&&(n=v.identity),r=t.getResponseHeader(c(e)))return n(r)},e=function(t){return p(t,"clearCache",(function(t){switch(t){case"true":return!0;case"false":return!1;default:return t}}))},r=function(t){return p(t,"context",JSON.parse)},d=function(t){return p(t,"method",v.normalizeMethod)},l=function(t){return p(t,"events",JSON.parse)},t=function(t){return p(t,"acceptLayer",JSON.parse)},u=function(t){return p(t,"dismissLayer",JSON.parse)},h=v.memoize((function(){return v.normalizeMethod(up.browser.popCookie("_up_method"))})),f=function(t){return p(t,"location")||t.responseURL},g=function(t){return p(t,"title")},y=function(t){return p(t,"target")},n=new up.Config((function(){return{methodParam:"_method",csrfParam:function(){return a.metaContent("csrf-param")},csrfToken:function(){return a.metaContent("csrf-token")},csrfHeader:"X-CSRF-Token"}})),o=function(){return v.evalOption(n.csrfHeader)},i=function(){return v.evalOption(n.csrfParam)},s=function(){return v.evalOption(n.csrfToken)},b=function(t,e){return e.add(n.methodParam,t),"POST"},m=function(){return n.reset()},up.on("up:framework:reset",m),{config:n,reset:m,locationFromXHR:f,titleFromXHR:g,targetFromXHR:y,methodFromXHR:d,acceptLayerFromXHR:t,contextFromXHR:r,dismissLayerFromXHR:u,eventPlansFromXHR:l,clearCacheFromXHR:e,csrfHeader:o,csrfParam:i,csrfToken:s,initialRequestMethod:h,headerize:c,wrapMethod:b})}.call(this),function(){var t,e,n,r,o,i,s,u,a,l,p=[].slice;up.log=(up.util,a=new up.store.Session("up.log"),t=new up.Config((function(){return{enabled:a.get("enabled"),banner:!0}})),u=function(){return t.reset()},o=function(){var e;if(e=1<=arguments.length?p.call(arguments,0):[],t.enabled)return i.apply(null,["log"].concat(p.call(e)))},s=function(){var t;return t=1<=arguments.length?p.call(arguments,0):[],i.apply(null,["warn"].concat(p.call(t)))},r=function(){var t;return t=1<=arguments.length?p.call(arguments,0):[],i.apply(null,["error"].concat(p.call(t)))},i=function(){var t,e,n,r;if(n=arguments[0],r=arguments[1],e=arguments[2],t=4<=arguments.length?p.call(arguments,3):[],e)return up.browser.canFormatLog()?(t.unshift(""),t.unshift("color: #666666; padding: 1px 3px; border: 1px solid #bbbbbb; border-radius: 2px; font-size: 90%; display: inline-block"),e="%c"+r+"%c "+e):e="["+r+"] "+e,console[n].apply(console,[e].concat(p.call(t)))},n=function(){var e,n,r;if(t.banner)return n=" __ _____  ___  ___  / /_ __\n/ // / _ \\/ _ \\/ _ \\/ / // /  "+up.version+"\n\\___/_//_/ .__/\\___/_/\\_. / \n        / /            / /\n\n",r="",up.migrate.loaded||(r+="Load unpoly-migrate.js to enable deprecated APIs.\n\n"),t.enabled?r+="Call `up.log.disable()` to disable logging for this session.":r+="Call `up.log.enable()` to enable logging for this session.",e="color: #777777",up.browser.canFormatLog()?console.log("%c"+n+"%c"+r,"font-family: monospace;"+e,e):console.log(n+r)},up.on("up:app:boot",n),up.on("up:framework:reset",u),l=function(e){return a.set("enabled",e),t.enabled=e},e=function(){var t;throw t=1<=arguments.length?p.call(arguments,0):[],r.apply(null,["error"].concat(p.call(t))),up.error.failed(t)},{puts:o,error:r,warn:s,config:t,enable:function(){return l(!0)},disable:function(){return l(!1)},fail:e,muteUncriticalRejection:function(t){return t.catch((function(t){if("object"!=typeof t||!("AbortError"===t.name||t instanceof up.RenderResult||t instanceof up.Response))throw t}))},isEnabled:function(){return t.enabled}}),up.puts=up.log.puts,up.warn=up.log.warn,up.fail=up.log.fail}.call(this),function(){var t,e,n,r,o,i,s,u,a,l,p,c,h,f,d,m,y,g,v=[].slice;up.syntax=(g=up.util,s=up.element,t={"[up-back]":-100,"[up-content]":-200,"[up-drawer]":-200,"[up-modal]":-200,"[up-cover]":-200,"[up-popup]":-200,"[up-tooltip]":-200,"[up-dash]":-200,"[up-expand]":-300,"[data-method]":-400,"[data-confirm]":-400},o=[],a=[],c=function(){var t,n;return t=1<=arguments.length?v.call(arguments,0):[],n=e(t),u(o,n)},f=function(){var t,e;return t=1<=arguments.length?v.call(arguments,0):[],(e=c.apply(null,t)).jQuery=!0,e},m=function(){var t,n;return t=1<=arguments.length?v.call(arguments,0):[],n=e(t),up.framework.booting&&(n.priority=i(n.selector)||up.fail("Unregistered priority for system macro %o",n.selector)),u(a,n)},d=function(){var t,e;return t=1<=arguments.length?v.call(arguments,0):[],(e=m.apply(null,t)).jQuery=!0,e},i=function(e){var n,r;for(r in e=g.evalOption(e),t)if(n=t[r],e.indexOf(r)>=0)return n},l=function(t){var e,n;return n=t.shift(),e=t.pop(),[n,g.extractOptions(t),e]},e=function(t){var e,n,r,o;return o=(r=l(t))[0],n=r[1],e=r[2],n=g.options(n,{selector:o,isDefault:up.framework.booting,priority:0,batch:!1,keep:!1,jQuery:!1}),g.assign(e,n)},u=function(t,e){var n,r;for(r=0;(n=t[r])&&n.priority>=e.priority;)r+=1;return t.splice(r,0,e),e},r=function(t,e){var n;return n=a.concat(o),new up.CompilerPass(t,n,e).run()},h=function(t,e){var n;return(n=t.upDestructors)||(n=[],t.upDestructors=n,t.classList.add("up-can-clean")),g.isArray(e)?n.push.apply(n,e):n.push(e)},n=function(t,e){return null==e&&(e={}),new up.DestructorPass(t,e).run()},p=function(t){return t=up.fragment.get(t),s.jsonAttr(t,"up-data")||{}},y=function(){return o=g.filter(o,"isDefault"),a=g.filter(a,"isDefault")},up.on("up:framework:reset",y),{compiler:c,macro:m,$compiler:f,$macro:d,destructor:h,compile:r,clean:n,data:p}),up.compiler=up.syntax.compiler,up.$compiler=up.syntax.$compiler,up.destructor=up.syntax.destructor,up.macro=up.syntax.macro,up.$macro=up.syntax.$macro,up.data=up.syntax.data}.call(this),function(){var t,e,n,r,o,i,s,u,a,l,p,c,h,f,d,m,y,g=[].slice;up.history=(y=up.util,r=up.element,e=new up.Config((function(){return{enabled:!0,restoreTargets:[":main"]}})),p=void 0,u=void 0,f=function(){return e.reset(),p=void 0,u=void 0,m()},a=function(t,e){return null==e&&(e={}),e.hash=!0,y.normalizeURL(t,e)},n=function(t){return a(location.href,t)},(m=function(){var t;if(t=n(),u!==t)return p=u,u=t})(),i=function(t){var e;return a(t,e={stripTrailingSlash:!0})===n(e)},h=function(t,e){if(null==e&&(e={}),s("replaceState",t)&&!1!==e.event)return o("up:location:changed",{url:t,reason:"replace",log:"Replaced state for "+y.urlWithoutHost(t)})},c=function(t){if(t=a(t),!i(t)&&s("pushState",t))return up.emit("up:location:changed",{url:t,reason:"push",log:"Advanced to location "+y.urlWithoutHost(t)})},s=function(n,r){var o;if(e.enabled)return o=t(),window.history[n](o,"",r),m(),o},t=function(){return{up:{}}},d=function(t){var r;return(null!=t?t.up:void 0)?(r=n(),up.render({url:r,history:!0,location:r,peel:!0,layer:"root",target:e.restoreTargets,cache:!0,keep:!1,scroll:"restore",saveScroll:!1}).then((function(){return r=n(),o("up:location:changed",{url:r,reason:"pop",log:"Restored location "+r})}))):up.puts("pop","Ignoring a state not pushed by Unpoly (%o)",t)},l=function(t){var e;return m(),up.viewport.saveScroll({location:p}),e=t.state,d(e)},o=function(){var t,e;return t=1<=arguments.length?g.call(arguments,0):[],(e=y.find(up.layer.stack.reversed(),"historyVisible")).emit.apply(e,t)},up.on("up:app:boot",(function(){var t;return t=function(){if(window.history.scrollRestoration="manual",window.addEventListener("popstate",l),"GET"===up.protocol.initialRequestMethod())return h(n(),{event:!1})},"undefined"!=typeof jasmine&&null!==jasmine?t():setTimeout(t,100)})),up.macro("a[up-back], [up-href][up-back]",(function(t){if(p)return r.setMissingAttrs(t,{"up-href":p,"up-scroll":"restore"}),t.removeAttribute("up-back"),up.link.makeFollowable(t)})),up.on("up:framework:reset",f),y.literal({config:e,push:c,replace:h,get_location:n,get_previousLocation:function(){return p},isLocation:i,normalizeURL:a}))}.call(this),function(){var t,e,n,r,o,i,s,u,a,l,p,c,h,f,d,m,y,g,v,b,w,k,E,S,L,C,_,O,F,T,R,A,x,P,q,D,M,H,j,N=[].slice;e=up.util,t=up.element,up.fragment=(o=new up.Config((function(){return{badTargetClasses:[/^up-/],navigateOptions:{focus:"auto",scroll:"auto",solo:!0,feedback:!0,fallback:!0,history:"auto",peel:!0,cache:"auto"},matchAroundOrigin:!0,runScripts:!1,autoHistoryTargets:[":main"],autoFocus:["hash","autofocus","main-if-main","target-if-lost"],autoScroll:["hash","layer-if-main"]}})),e.delegate(o,"mainTargets",(function(){return up.layer.config.any})),x=function(){return o.reset()},q=function(e,n){return null==n&&(n={}),e=y(e,n),t.closestAttr(e,"up-source")},M=function(e){return t.closestAttr(e,"up-time")||"0"},T=up.mockable((function(){var t;return t=1<=arguments.length?N.call(arguments,0):[],e.asyncify((function(){var n,r;return r=O(t),r=up.RenderOptions.preprocess(r),up.browser.assertConfirmed(r),(n=e.pluckKey(r,"guardEvent"))&&(n.renderOptions=r,up.event.assertEmitted(n,{target:r.origin})),up.RenderOptions.assertContentGiven(r),r.url?A(r):R(r)}))})),A=function(t){return up.feedback.aroundForOptions(t,(function(){return new up.Change.FromURL(t).execute()}))},R=function(t){return up.network.mimicLocalRequest(t),new up.Change.FromContent(t).execute()},C=up.mockable((function(){var t,n;return t=1<=arguments.length?N.call(arguments,0):[],n=O(t),T(e.merge(n,{navigate:!0}))})),b=function(t,e){var n;return null==e&&(e={}),t=y(t),n=(e.keepPlans||[]).map((function(t){return p(t),t.oldElement})),up.syntax.compile(t,{skip:n,layer:e.layer}),a(t,e),t},a=function(t,e){return up.emit(t,"up:fragment:inserted",{log:["Inserted fragment %o",t],origin:e.origin})},l=function(e){var n,r;return r=["Keeping fragment %o",e.oldElement],n=t.callbackAttr(e.oldElement,"up-on-keep",["newFragment","newData"]),c(e,"up:fragment:keep",{log:r,callback:n})},p=function(t){var e;return e=["Kept fragment %o",t.oldElement],c(t,"up:fragment:kept",{log:e})},c=function(t,e,n){var r,o;return o=t.oldElement,r=up.event.build(e,{newFragment:t.newElement,newData:t.newData}),up.emit(o,r,n)},u=function(t,e){var n,r,o;return n=null!=(o=e.log)?o:["Destroyed fragment %o",t],r=e.parent||document,up.emit(r,"up:fragment:destroyed",{fragment:t,parent:r,log:n})},w=function(e){return!!t.closest(e,".up-destroying")},E=function(t){return!w(t)},y=function(){var n,r,o,i;return n=1<=arguments.length?N.call(arguments,0):[],r=e.extractOptions(n),i=n.pop(),o=n[0],e.isElementish(i)?t.get(i):o?m(o,i,r):new up.FragmentFinder({selector:i,origin:r.origin,layer:r.layer}).find()},m=function(){var t;return t=1<=arguments.length?N.call(arguments,0):[],d.apply(null,t)[0]},n=/\:has\(([^\)]+)\)$/,d=function(){var t,n,r,o;return t=1<=arguments.length?N.call(arguments,0):[],n=e.extractOptions(t),o=t.pop(),r=t[0],(o=_(o,r,n)).descendants(r||document)},g=function(t,e,n){return null==n&&(n={}),(e=_(e,t,n)).subtree(t)},i=function(t,e){return g(t,e).length>0},r=function(e,n,r){return e=t.get(e),(n=_(n,e,r)).closest(e)},s=function(){var t,e,n;return t=1<=arguments.length?N.call(arguments,0):[],((n=O(t)).element=y(n.target,n))&&new up.Change.DestroyFragment(n).execute(),"function"==typeof(e=up.migrate).formerlyAsync?e.formerlyAsync("up.destroy()"):void 0},O=function(t){var n;return n=e.parseArgIntoOptions(t,"target"),e.isElement(n.target)&&(n.origin||(n.origin=n.target)),n},S=function(t){return t.classList.add("up-destroying"),t.setAttribute("aria-hidden","true")},F=function(){var t,e,n;return t=1<=arguments.length?N.call(arguments,0):[],(n=O(t)).target||(n.target=":main"),e=y(n.target,n),null==n.url&&(n.url=q(e)),n.headers||(n.headers={}),n.headers[up.protocol.headerize("reloadFromTime")]=M(e),T(n)},j=function(t,n){return C(e.merge({url:t},n))},D=function(t){return e.unprefixCamelCase(t,"fail")},f=function(t){if(!t.match(/^fail[A-Z]/))return e.prefixCamelCase(t,"fail")},H=function(n){var r,o,i,s,u,a,l,p;if(e.isString(n))return n;if(n=t.get(n),t.isSingleton(n))return t.elementTagName(n);if(p=n.getAttribute("up-id"))return t.attributeSelector("up-id",p);if(i=n.getAttribute("id"))return t.idSelector(i);if(a=n.getAttribute("name"))return t.elementTagName(n)+t.attributeSelector("name",a);if(r=e.presence(e.filter(n.classList,k))){for(l="",o=0,u=r.length;o<u;o++)s=r[o],l+=t.classSelector(s);return l}return t.elementTagName(n)},k=function(t){var n;return n=function(n){return e.isRegExp(n)?n.test(t):n===t},!e.some(o.badTargetClasses,n)},P=function(t,e){var n;return null==e&&(e={}),n=e.origin,t.replace(/&|:origin\b/,(function(e){return n?H(n):up.fail('Missing { origin } element to resolve "%s" reference (found in %s)',e,t)}))},h=function(t,n){var r,o,i,s;for(null==n&&(n={}),"new"===(o=n.layer)||o instanceof up.Layer||up.fail("Must pass an up.Layer as { layer } option, but got %o",o),t=e.copy(e.wrapList(t)),r=[];t.length;)":main"===(s=t.shift())||!0===s?(i="new"===o?n.mode:o.mode,t.unshift.apply(t,up.layer.mainTargets(i))):":layer"===s?"new"===o||o.opening||t.unshift(o.getFirstSwappableElement()):e.isElementish(s)?r.push(H(s)):e.isString(s)&&r.push(P(s,n));return e.uniq(r)},_=function(r,o,i){var s,u,a;return null==i&&(i={}),u=[],i.destroying||u.push(E),i.layer||(i.layer=o),a=up.layer.getAll(i),"any"===i.layer||o&&t.isDetached(o)||u.push((function(t){return e.some(a,(function(e){return e.contains(t)}))})),s=(s=up.fragment.expandTargets(r,e.merge(i,{layer:a[0]}))).map((function(t){return(t=t.replace(n,(function(t,e){return u.push((function(t){return t.querySelector(e)})),""})))||"*"})),new up.Selector(s,u)},v=function(t){return!!i(t,o.autoHistoryTargets)||(up.puts("up.render()","Will not auto-update history because fragment doesn't contain a selector from up.fragment.config.autoHistoryTargets"),!1)},L=function(e,n,r){return null==r&&(r={}),e=t.get(e),(n=_(n,e,r)).matches(e)},up.on("up:app:boot",(function(){var t;if((t=document.body).setAttribute("up-source",up.history.location),b(t),!up.browser.canPushState())return up.warn("Cannot push history changes. Next fragment update will load in a new page.")})),up.on("up:framework:reset",x),e.literal({config:o,reload:F,destroy:s,render:T,navigate:C,get:y,getDumb:m,all:d,subtree:g,contains:i,closest:r,source:q,hello:b,visit:j,markAsDestroying:S,emitInserted:a,emitDestroyed:u,emitKeep:l,emitKept:p,successKey:D,failKey:f,expandTargets:h,toTarget:H,matches:L,hasAutoHistory:v})),up.replace=up.fragment.replace,up.extract=up.fragment.extract,up.reload=up.fragment.reload,up.destroy=up.fragment.destroy,up.render=up.fragment.render,up.navigate=up.fragment.navigate,up.hello=up.fragment.hello,up.visit=up.fragment.visit,e.delegate(up,"context",(function(){return up.layer.current}))}.call(this),function(){var t,e,n,r,o,i,s,u,a,l,p,c,h,f,d,m,y,g,v,b,w,k,E,S,L,C,_,O,F,T,R,A,x,P,q,D,M,H,j,N,z,B=[].slice;up.viewport=(j=up.util,s=up.element,u=up.fragment,o=new up.Config((function(){return{viewportSelectors:["[up-viewport]","[up-fixed]"],fixedTop:["[up-fixed~=top]"],fixedBottom:["[up-fixed~=bottom]"],anchoredRight:["[up-anchored~=right]","[up-fixed~=top]","[up-fixed~=bottom]","[up-fixed~=right]"],revealSnap:200,revealPadding:0,revealTop:!1,revealMax:function(){return.5*window.innerHeight},scrollSpeed:1}})),D=new up.MotionController("scrolling"),w=function(){return o.reset(),D.reset()},A=function(t,e,n){var r;return null==n&&(n={}),t=u.get(t,n),r=new up.ScrollMotion(t,e,n),D.startMotion(t,r,n)},n=function(){var t;return t=o.anchoredRight.join(","),u.all(t,{layer:"root"})},S=function(t,e){var n;return e=j.options(e),t=u.get(t,e),(e.layer=up.layer.get(t))?(e.peel&&e.layer.peel(),n=new up.RevealMotion(t,e),D.startMotion(t,n,e)):up.error.failed.async("Cannot reveal a detached element")},i=function(t,e){var n,o;if(null==e&&(e={}),up.browser.isIE11()?(n=(o=r(t)).scrollTop,t.focus(),o.scrollTop=n):t.focus({preventScroll:!0}),!e.preventScroll)return S(t)},H=function(t,e){return i(t,e),t===document.activeElement},m=function(t){return s.matches(t,"a[href], button, textarea, input, select")},g=function(t){if(!t.hasAttribute("tabindex")&&!m(t))return t.setAttribute("tabindex","-1"),t.classList.add("up-focusable-content")},L=function(t,e){var n;if(null==t&&(t=location.hash),n=a(t,e))return up.reveal(n,{top:!0})},e=function(){return[F()].concat(B.call(o.viewportSelectors)).join(",")},r=function(t,n){var r;return null==n&&(n={}),r=u.get(t,n),s.closest(r,e())},d=function(t,n){return null==n&&(n={}),t=u.get(t,n),s.subtree(t,e())},c=function(t,n){return null==n&&(n={}),t=u.get(t,n),s.around(t,e())},p=function(t){return null==t&&(t={}),u.all(e(),t)},F=function(){var t;return(t=document.scrollingElement)?t.tagName:"html"},h=function(){return document.querySelector(F())},T=function(){return s.root.clientWidth},_=function(){return s.root.clientHeight},y=function(t){return s.matches(t,F())},C=function(){return window.innerWidth>document.documentElement.offsetWidth},O=function(){var t,e;return t=document.body,e=document.documentElement,j.find([e,t],z)||h()},z=function(t){var e;return"auto"===(e=s.style(t,"overflow-y"))||"scroll"===e},q=j.memoize((function(){var t,e,n;return e={position:"absolute",top:"0",left:"0",width:"100px",height:"100px",overflowY:"scroll"},n=(t=up.element.affix(document.body,"[up-viewport]",{style:e})).offsetWidth-t.clientWidth,up.element.remove(t),n})),x=function(t){return up.fragment.toTarget(t)},P=function(t){return null==t&&(t={}),j.mapObject(p(t),(function(t){return[x(t),t.scrollTop]}))},l=function(t){var e;return null==t&&(t=document),e=["[up-fixed]"].concat(o.fixedTop).concat(o.fixedBottom),t.querySelectorAll(e.join(","))},R=function(){var t,e,n,r,o,i,s;if(t=1<=arguments.length?B.call(arguments,0):[],s=(n=v(t))[0],i=(e=n[1]).location||e.layer.location)return o=null!=(r=e.tops)?r:f(s),e.layer.lastScrollTops.set(i,o)},f=function(t){return j.mapObject(t,(function(t){return[x(t),t.scrollTop]}))},E=function(){var t,e,n,r,o,i;return t=1<=arguments.length?B.call(arguments,0):[],i=(n=v(t))[0],o=(e=n[1]).layer.location,r=e.layer.lastScrollTops.get(o)||{},up.puts("up.viewport.restoreScroll()","Restoring scroll positions for URL %s to %o",j.urlWithoutHost(o),r),M(i,r)},v=function(t){var e;return(e=j.copy(j.extractOptions(t))).layer=up.layer.get(e),[t[0]?[r(t[0],e)]:e.around?c(e.around,e):p(e),e]},k=function(){var t,e,n;return t=1<=arguments.length?B.call(arguments,0):[],n=(e=v(t))[0],e[1],M(n,{})},M=function(t,e){var n;return n=j.map(t,(function(t){var n,r;return n=x(t),r=e[n]||0,A(t,r,{duration:0})})),Promise.all(n)},t=function(t,e){var n,o,i,u,a,p;return null==e&&(e={}),p=r(t).getBoundingClientRect(),a=t.getBoundingClientRect(),o=new up.Rect({left:a.left-p.left,top:a.top-p.top,width:a.width,height:a.height}),"function"==typeof e.afterMeasure&&e.afterMeasure(),s.setStyle(t,{position:"static"===t.style.position?"static":"relative",top:"auto",right:"auto",bottom:"auto",left:"auto",width:"100%",height:"100%"}),n=s.createFromSelector("up-bounds"),s.insertBefore(t,n),n.appendChild(t),(i=function(t,e){return o.left+=t,o.top+=e,s.setStyle(n,o)})(0,0),u=t.getBoundingClientRect(),i(a.left-u.left,a.top-u.top),j.each(l(t),s.fixedToAbsolute),{bounds:n,moveBounds:i}},a=function(t,e){var n;if(null==e&&(e={}),t=b(t))return n=[s.attributeSelector("id",t),"a"+s.attributeSelector("name",t)].join(","),u.get(n,e)},b=function(t){return null!=t?t.replace(/^#/,""):void 0},N=!1,up.on("scroll",{once:!0},(function(){return N=!0})),up.on("up:app:boot",(function(){return j.task((function(){if(!N)return L()}))})),up.on(window,"hashchange",(function(){return L()})),up.on("up:framework:reset",w),j.literal({reveal:S,revealHash:L,firstHashTarget:a,scroll:A,config:o,get:r,subtree:d,around:c,all:p,rootSelector:F,get_root:h,rootWidth:T,rootHeight:_,rootHasReducedWidthFromScrollbar:C,rootOverflowElement:O,isRoot:y,scrollbarWidth:q,scrollTops:P,saveScroll:R,restoreScroll:E,resetScroll:k,anchoredRight:n,fixedElements:l,absolutize:t,focus:i,tryFocus:H,makeFocusable:g})),up.focus=up.viewport.focus,up.scroll=up.viewport.scroll,up.reveal=up.viewport.reveal}.call(this),function(){var t,e,n,r,o,i,s,u,a,l,p,c,h,f,d,m,y,g,v,b,w,k,E,S,L,C,_,O,F;up.motion=(C=up.util,i=up.element,d={},m={},f=new up.MotionController("motion"),o=new up.Config((function(){return{duration:175,easing:"ease",enabled:!matchMedia("(prefers-reduced-motion: reduce)").matches}})),y=function(t){return C.pickBy(t,(function(t){return t.isDefault}))},k=function(){return f.reset(),d=y(d),m=y(m),o.reset()},p=function(){return o.enabled},t=function(t,e,n){var r,o;return t=up.fragment.get(t),n=C.options(n),r=s(e),F(t,e,n)?(o=function(){return r(t,n)},f.startFunction(t,o,n)):E(t,e)},F=function(t,e,r){return n(r),p()&&!c(e)&&r.duration>0&&!i.isSingleton(t)},E=function(t,e){return C.isOptions(e)&&i.setStyle(t,e),Promise.resolve()},e=function(t,e,n){return n=C.merge(n,{finishEvent:f.finishEvent}),new up.CSSTransition(t,e,n).start()},n=function(t){return t.easing||(t.easing=o.easing),t.duration||(t.duration=o.duration)},u=function(t){return d[t]||up.fail("Unknown animation %o",t)},l=function(t){return f.finish(t)},h=function(t,e,r,o){var s,u,l,p,c,h,d,m,y,g,v;return o=C.options(o),n(o),t=up.fragment.get(t),e=up.fragment.get(e),y=a(r),v=F(t,y,o),p=C.pluckKey(o,"beforeStart")||C.noop,u=C.pluckKey(o,"afterInsert")||C.noop,l=C.pluckKey(o,"beforeDetach")||C.noop,s=C.pluckKey(o,"afterDetach")||C.noop,h=C.pluckKey(o,"scrollNew")||C.asyncNoop,p(),v?f.isActive(t)&&!1===o.trackMotion?y(t,e,o):(up.puts("up.morph()","Morphing %o to %o with transition %O",t,e,r),g=up.viewport.get(t),d=g.scrollTop,c=up.viewport.absolutize(t,{afterMeasure:function(){return i.insertBefore(t,e),u()}}),m=function(){return h().then((function(){var n;return n=g.scrollTop,c.moveBounds(0,n-d),y(t,e,o)})).then((function(){return l(),i.remove(c.bounds),s()}))},f.startFunction([t,e],m,o)):(l(),S(t,e),u(),s(),h())},a=function(t){var e;if(!c(t))return C.isFunction(t)?t:C.isArray(t)?r.apply(null,t):C.isString(t)?t.indexOf("/")>=0?r.apply(null,t.split("/")):(e=m[t])?a(e):void 0:up.fail("Unknown transition %o",t)},r=function(t,e){var n,r;return c(t)&&c(t)?void 0:(r=s(t)||C.asyncNoop,n=s(e)||C.asyncNoop,function(t,e,o){return Promise.all([r(t,o),n(e,o)])})},s=function(t){return c(t)?void 0:C.isFunction(t)?t:C.isString(t)?u(t):C.isOptions(t)?function(n,r){return e(n,t,r)}:up.fail("Unknown animation %o",t)},S=up.mockable((function(t,e){return i.replace(t,e)})),w=function(t,e){var n;return(n=a(e)).isDefault=up.framework.booting,m[t]=n},g=function(t,e){var n;return(n=s(e)).isDefault=up.framework.booting,d[t]=n},O=function(){if(!p())return up.puts("up.motion","Animations are disabled")},c=function(t){return!t||"none"===t},(b=function(t,n,r){return g(t,(function(t,o){return t.style.opacity=0,i.setStyle(t,{opacity:n}),e(t,{opacity:r},o)}))})("fade-in",0,1),b("fade-out",1,0),L=function(t,e){return{transform:"translate("+t+"px, "+e+"px)"}},_=function(t){return i.setStyle(t,L(0,0)),t.getBoundingClientRect()},(v=function(t,n){var r;return r="move-from-"+t,g("move-to-"+t,(function(t,r){var o,i;return o=_(t),i=n(o),e(t,i,r)})),g(r,(function(t,r){var o,s;return o=_(t),s=n(o),i.setStyle(t,s),e(t,L(0,0),r)}))})("top",(function(t){var e;return e=t.top+t.height,L(0,-e)})),v("bottom",(function(t){var e;return e=up.viewport.rootHeight()-t.top,L(0,e)})),v("left",(function(t){var e;return e=t.left+t.width,L(-e,0)})),v("right",(function(t){var e;return e=up.viewport.rootWidth()-t.left,L(e,0)})),w("cross-fade",["fade-out","fade-in"]),w("move-left",["move-to-left","move-from-right"]),w("move-right",["move-to-right","move-from-left"]),w("move-up",["move-to-top","move-from-bottom"]),w("move-down",["move-to-bottom","move-from-top"]),up.on("up:framework:boot",O),up.on("up:framework:reset",k),{morph:h,animate:t,finish:l,finishCount:function(){return f.finishCount},transition:w,animation:g,config:o,isEnabled:p,isNone:c,willAnimate:F,swapElementsDirectly:S}),up.transition=up.motion.transition,up.animation=up.motion.animation,up.morph=up.motion.morph,up.animate=up.motion.animate}.call(this),function(){var t,e,n,r,o,i,s,u,a,l,p,c,h,f,d,m,y,g=[].slice;t=up.util,up.network=(r=new up.Config((function(){return{concurrency:4,wrapMethod:!0,cacheSize:70,cacheExpiry:3e5,badDownlink:.6,badRTT:750,badResponseTime:400,autoCache:function(t){return t.isSafe()},clearCache:function(t,e){return!t.isSafe()},requestMetaKeys:["target","failTarget","mode","failMode","context","failContext"]}})),c=new up.Request.Queue,n=new up.Request.Cache,d=function(){return e(),c.reset(),r.reset(),n.clear()},a=function(){var t,e,n;return t=1<=arguments.length?g.call(arguments,0):[],e=new up.Request(p(t)),y(e)||h(e),(n=e.solo)&&c.abortExcept(e,n),e},l=function(t){var r,o;if((o=t.solo)&&e(o),r=t.clearCache)return n.clear(r)},p=function(e){var n,r;return(r=t.extractOptions(e)).url||(r.url=e[0]),"function"==typeof(n=up.migrate).handleRequestOptions&&n.handleRequestOptions(r),r},y=function(t){var e;if(t.willCache()&&(e=n.get(t)))return up.puts("up.request()","Re-using previous request to %s %s",t.method,t.url),t.preload||c.promoteToForeground(e),t.followState(e),!0},h=function(t){return t.preload&&!t.isSafe()&&up.fail("Will not preload request to %s",t.description),o(t),c.asap(t)},o=function(e){return e.willCache()&&n.set(e,e),t.always(e,(function(t){var o,i,s;if((o=null!=(i=null!=(s=t.clearCache)?s:e.clearCache)?i:r.clearCache(e,t))&&n.clear(o),(e.willCache()||n.get(e))&&n.set(e,e),!t.ok)return n.remove(e)}))},s=function(){return!i()},i=function(){return c.isBusy()},m=function(){var t;if(t=navigator.connection)return t.saveData||t.rtt&&t.rtt>r.badRTT||t.downlink&&t.downlink<r.badDownlink},e=function(){var t;return t=1<=arguments.length?g.call(arguments,0):[],c.abort.apply(c,t)},f=function(t,e){var r;if(t.cache&&e.url&&t.url!==e.url)return r=t.variant({method:e.method,url:e.url}),n.alias(t,r)},u=function(e){return t.contains(["GET","OPTIONS","HEAD"],t.normalizeMethod(e))},up.on("up:framework:reset",d),{request:a,cache:n,isIdle:s,isBusy:i,isSafeMethod:u,config:r,abort:e,registerAliasForRedirect:f,queue:c,shouldReduceRequests:m,mimicLocalRequest:l}),up.request=up.network.request,up.cache=up.network.cache}.call(this),function(){var t,e,n,r,o,i,s,u,a,l,p,c,h,f,d,m,y,g,v,b=[].slice;e=up.util,t=up.element,up.layer=(r=[up.Layer.Modal,up.Layer.Popup,up.Layer.Drawer,up.Layer.Cover],n=[up.Layer.Root].concat(r),l=new up.Config((function(){var t,e,r,o;for(o={mode:"modal",any:{mainTargets:["[up-main='']","main",":layer"]},root:{mainTargets:["[up-main~=root]"],historyVisible:!0},overlay:{mainTargets:["[up-main~=overlay]"],openAnimation:"fade-in",closeAnimation:"fade-out",dismissLabel:"Ã—",dismissAriaLabel:"Dismiss dialog",dismissable:!0,historyVisible:"auto"},cover:{mainTargets:["[up-main~=cover]"]},drawer:{mainTargets:["[up-main~=drawer]"],backdrop:!0,position:"left",size:"medium",openAnimation:function(t){switch(t.position){case"left":return"move-from-left";case"right":return"move-from-right"}},closeAnimation:function(t){switch(t.position){case"left":return"move-to-left";case"right":return"move-to-right"}}},modal:{mainTargets:["[up-main~=modal]"],backdrop:!0,size:"medium"},popup:{mainTargets:["[up-main~=popup]"],position:"bottom",size:"medium",align:"left",dismissable:"outside key"}},e=0,r=n.length;e<r;e++)o[(t=n[e]).mode].Class=t;return o})),v=null,p=[],c=function(t){return e.flatMap(h(t),"mainTargets")},h=function(t){return"root"===t?[l.root,l.any]:[l[t],l.overlay,l.any]},f=function(t){var n,r,o,i;return"function"==typeof(n=up.migrate).handleLayerOptions&&n.handleLayerOptions(t),e.isGiven(t.layer)?(r=String(t.layer).match(/^(new|shatter|swap)( (\w+))?/))&&(t.layer="new",o=r[1],i=r[3],t.mode||(t.mode=i||l.mode),"swap"===o?up.layer.isOverlay()&&(t.baseLayer="parent"):"shatter"===o&&(t.baseLayer="root")):t.mode?t.layer="new":e.isElementish(t.target)?t.layer=v.get(t.target,{normalizeLayerOptions:!1}):t.origin?t.layer="origin":t.layer="current",t.context||(t.context={}),t.baseLayer=v.get("current",e.merge(t,{normalizeLayerOptions:!1}))},u=function(t){var n,r,o,i;return i=t.mode,n=l[i].Class,r=e.reverse(h(i)),(o=up.migrate.handleLayerConfig)&&r.forEach(o),new n(t=e.mergeDefined.apply(e,b.call(r).concat([{mode:i,stack:v}],[t])))},m=function(e,n){return t.callbackAttr(e,n,["layer"])},a=function(e,n){return t.callbackAttr(e,n,["layer","value"])},g=function(){return l.reset(),v.reset(),p=e.filter(p,"isDefault")},d=function(t){return t=e.options(t,{layer:"new",defaultToEmptyContent:!0,navigate:!0}),up.render(t).then((function(t){return t.layer}))},s=function(t){return new Promise((function(n,r){return t=e.merge(t,{onAccepted:function(t){return n(t.value)},onDismissed:function(t){return r(t.value)}}),d(t)}))},o=function(){return e.map(n,(function(t){return t.selector()})).join(",")},y=function(t){return e.isString(t)?'layer "'+t+'"':t.toString()},up.on("up:fragment:destroyed",(function(t){return v.sync()})),up.on("up:framework:boot",(function(){return v=new up.LayerStack})),up.on("up:framework:reset",g),i=e.literal({config:l,mainTargets:c,open:d,build:u,ask:s,normalizeOptions:f,openCallbackAttr:m,closeCallbackAttr:a,anySelector:o,optionToString:y,get_stack:function(){return v}}),e.delegate(i,["get","getAll","root","overlays","current","front","sync","count","dismissOverlays"],(function(){return v})),e.delegate(i,["accept","dismiss","isRoot","isOverlay","isFront","on","off","emit","parent","historyVisible","location","mode","context","element","contains","size","affix"],(function(){return v.current})),i)}.call(this),function(){var t,e,n,r,o,i,s,u,a,l,p,c,h,f,d,m,y,g,v,b,w,k,E,S,L,C,_,O,F,T,R,A,x,P,q=[].slice;up.link=(x=up.util,u=up.element,L=new up.LinkPreloader,S=null,e=["a[up-content]","a[up-fragment]","a[up-document]"],n=["a[href]","[up-href]"],t=["[up-follow]","[up-target]","[up-layer]","[up-transition]","[up-preload]"],r=function(t,e){return x.flatMap(t,(function(t){return e.map((function(e){return t+e}))}))},o=new up.Config((function(){return{followSelectors:r(n,t).concat(e),noFollowSelectors:["[up-follow=false]","a[download]","a[target]",'a[href^="#"]:not([up-content]):not([up-fragment]):not([up-document])','a[href^="javascript:"]'],instantSelectors:["[up-instant]"],noInstantSelectors:["[up-instant=false]","[onclick]"],preloadSelectors:r(n,["[up-preload]"]),noPreloadSelectors:["[up-preload=false]"],clickableSelectors:e.concat(["[up-emit]","[up-accept]","[up-dismiss]","[up-clickable]"]),preloadDelay:90,preloadEnabled:"auto"}})),d=function(){return o.followSelectors.join(",")},y=function(){return o.preloadSelectors.join(",")},m=function(){return o.instantSelectors.join(",")},f=function(){return o.clickableSelectors.join(",")},g=function(t){return u.matches(t,o.noFollowSelectors.join(","))||x.isCrossOrigin(t)},k=function(t){return!up.browser.canPushState()||u.matches(t,o.noPreloadSelectors.join(","))||g(t)||!P(t)},P=function(t){var e;if((e=O(t)).url)return null==e.cache&&(e.cache="auto"),e.basic=!0,new up.Request(e).willCache()},w=function(t){return u.matches(t,o.noInstantSelectors.join(","))||g(t)},T=function(){return S=null,o.reset(),L.reset()},a=up.mockable((function(t,e){return up.render(p(t,e))})),O=function(t,e){var n;return e=x.options(e),n=new up.OptionsParser(e,t),e.url=c(t,e),e.method=l(t,e),n.json("headers"),n.json("params"),n.booleanOrString("cache"),n.booleanOrString("clearCache"),n.boolean("solo"),n.string("contentType",{attr:["enctype","up-content-type"]}),e},p=function(t,e){var n,r,o;return t=up.fragment.get(t),e=O(t,e),(o=new up.OptionsParser(e,t,{fail:!0})).boolean("feedback"),o.boolean("fail"),null==(n=o.options).origin&&(n.origin=t),o.boolean("navigate",{default:!0}),o.string("confirm"),o.string("target"),o.booleanOrString("fallback"),o.parse((function(t,e){return u.callbackAttr(t,e,["request","response","renderOptions"])}),"onLoaded"),o.string("content"),o.string("fragment"),o.string("document"),o.boolean("peel"),o.string("layer"),o.string("baseLayer"),o.json("context"),o.string("mode"),o.string("align"),o.string("position"),o.string("class"),o.string("size"),o.booleanOrString("dismissable"),o.parse(up.layer.openCallbackAttr,"onOpened"),o.parse(up.layer.closeCallbackAttr,"onAccepted"),o.parse(up.layer.closeCallbackAttr,"onDismissed"),o.string("acceptEvent"),o.string("dismissEvent"),o.string("acceptLocation"),o.string("dismissLocation"),o.booleanOrString("historyVisible"),o.booleanOrString("focus"),o.boolean("saveScroll"),o.booleanOrString("scroll"),o.boolean("revealTop"),o.number("revealMax"),o.number("revealPadding"),o.number("revealSnap"),o.string("scrollBehavior"),o.booleanOrString("history"),o.booleanOrString("location"),o.booleanOrString("title"),o.booleanOrString("animation"),o.booleanOrString("transition"),o.string("easing"),o.number("duration"),"function"==typeof(r=up.migrate).parseFollowOptions&&r.parseFollowOptions(o),e.guardEvent||(e.guardEvent=up.event.build("up:link:follow",{log:"Following link"})),e},F=function(t,e){var n;return t=up.fragment.get(t),A()?(n=up.event.build("up:link:preload",{log:["Preloading link %o",t]}),a(t,x.merge(e,{preload:!0},{guardEvent:n}))):up.error.failed.async("Link preloading is disabled")},A=function(){var t;return"auto"===(t=o.preloadEnabled)?!up.network.shouldReduceRequests():t},l=function(t,e){return null==e&&(e={}),x.normalizeMethod(e.method||t.getAttribute("up-method")||t.getAttribute("data-method"))},c=function(t,e){var n;if(null==e&&(e={}),"#"!==(n=e.url||t.getAttribute("href")||t.getAttribute("up-href")))return n},v=function(t){return t=up.fragment.get(t),u.matches(t,d())&&!g(t)},_=function(t){if(!v(t))return t.setAttribute("up-follow","")},C=function(t){if(!u.matches(t,"a[href], button"))return u.setMissingAttrs(t,{tabindex:"0",role:"link"}),t.addEventListener("keydown",(function(t){if("Enter"===t.key||"Space"===t.key)return h(t)}))},up.macro(f,C),R=function(t,e){var n,r;return!t.defaultPrevented&&!g(e)&&(r="a, [up-href], "+up.form.fieldSelector(),!(n=u.closest(t.target,r))||n===e)},b=function(t){var e;return(e=u.closest(t,m()))&&!w(e)},i=function(t){return t.on("click",(function(e,n){if(up.event.isUnmodified(e))return b(n)&&S?up.event.halt(e):t.wasHitByMouseEvent(e)&&!s(e)&&h(e),S=null})),t.on("mousedown",(function(t,e){if(up.event.isUnmodified(t))return S=t.target,b(e)?h(t):void 0}))},s=function(t){return S&&S!==t.target},h=function(t){var e;return e=up.event.fork(t,"up:click",["clientX","clientY","button"].concat(q.call(up.event.keyModifiers))),up.emit(t.target,e,{log:!1})},E=function(t){var e;return e=l(t),up.network.isSafeMethod(e)},up.on("up:click",d,(function(t,e){if(R(t,e))return up.event.halt(t),up.log.muteUncriticalRejection(a(e))})),up.macro("[up-expand]",(function(t){var e,n,r;if(r=t.getAttribute("up-expand")||"a, [up-href]",n=u.get(t,r))return(e=u.upAttrs(n))["up-href"]||(e["up-href"]=n.getAttribute("href")),u.setMissingAttrs(t,e),_(t)})),up.compiler(y,(function(t){if(!k(t))return L.observeLink(t)})),up.on("up:framework:reset",T),{follow:a,followOptions:p,preload:F,makeFollowable:_,makeClickable:C,isSafe:E,isFollowable:v,shouldFollowEvent:R,followMethod:l,convertClicks:i,config:o,combineFollowableSelectors:r}),up.follow=up.link.follow}.call(this),function(){var t,e,n,r,o,i,s,u,a,l,p,c,h,f,d,m,y,g,v,b,w,k,E,S,L,C,_,O=[].slice;up.form=(C=up.util,o=up.element,t=["[up-submit]","[up-target]","[up-layer]","[up-transition]"],r=new up.Config((function(){return{validateTargets:["[up-fieldset]:has(:origin)","fieldset:has(:origin)","label:has(:origin)","form:has(:origin)"],fieldSelectors:["select","input:not([type=submit]):not([type=image])","button[type]:not([type=submit])","textarea"],submitSelectors:up.link.combineFollowableSelectors(["form"],t),noSubmitSelectors:["[up-submit=false]","[target]"],submitButtonSelectors:["input[type=submit]","input[type=image]","button[type=submit]","button:not([type])"],observeDelay:0}})),c=function(){return r.submitSelectors.join(",")},e=null,g=function(){return r.reset()},i=function(t){return null==t&&(t=""),r.fieldSelectors.map((function(e){return e+t})).join(",")},s=function(t){var e,n,r;return t=o.get(t),e=o.subtree(t,i()),o.matches(t,"form[id]")&&(n=i(o.attributeSelector("form",t.getAttribute("id"))),r=o.all(n),e.push.apply(e,r),e=C.uniq(e)),e},k=function(t){var e,n;return n=b(),(e=document.activeElement)&&o.matches(e,n)&&t.contains(e)?e:o.get(t,n)},b=function(){return r.submitButtonSelectors.join(",")},v=up.mockable((function(t,e){return up.render(w(t,e))})),w=function(t,e){var n,r,i;return e=C.options(e),t=up.fragment.get(t),t=o.closest(t,"form"),r=new up.OptionsParser(e,t),n=up.Params.fromForm(t),(i=k(t))&&(n.addField(i),e.method||(e.method=i.getAttribute("formmethod")),e.url||(e.url=i.getAttribute("formaction"))),n.addAll(e.params),e.params=n,r.string("url",{attr:"action",default:up.fragment.source(t)}),r.string("method",{attr:["up-method","data-method","method"],default:"GET",normalize:C.normalizeMethod}),"GET"===e.method&&(e.url=up.Params.stripURL(e.url)),r.string("failTarget",{default:up.fragment.toTarget(t)}),e.guardEvent||(e.guardEvent=up.event.build("up:form:submit",{log:"Submitting form"})),C.assign(e,up.link.followOptions(t,e)),e},up.on("up:click",b,(function(t,e){var n;if((n=o.closest(e,"form"))&&d(n))return e.focus()})),m=function(){var t,e,n,i,u,a,l,p,c,h;return n=arguments[0],t=2<=arguments.length?O.call(arguments,1):[],n=o.list(n),i=C.flatMap(n,s),e=null!=(l=null!=(p=C.extractCallback(t))?p:y(n[0]))?l:up.fail("up.observe: No change callback given"),(a=C.extractOptions(t)).delay=null!=(c=null!=(h=a.delay)?h:o.numberAttr(n[0],"up-delay"))?c:r.observeDelay,(u=new up.FieldObserver(i,a,e)).start(),function(){return u.stop()}},y=function(t){var e;if(e=t.getAttribute("up-observe"))return new Function("value","name",e)},n=function(t,e){return m(t,e,(function(){return v(t)}))},a=function(t,e){var n,i;return n=h(t),C.isElementish(e.target)?up.fragment.toTarget(e.target):(i=e.target||t.getAttribute("up-validate")||n.getAttribute("up-validate"))?i:o.matches(t,"form")?up.fragment.toTarget(t):l(t,e)||up.fail("Could not find validation target for %o (tried defaults %o)",t,r.validateTargets)},l=function(t,e){var n;return n=up.layer.get(t),C.findResult(r.validateTargets,(function(t){if(up.fragment.get(t,C.merge(e,{layer:n})))return t}))},_=function(t,e){return t=up.fragment.get(t),(e=C.options(e)).navigate=!1,e.origin=t,e.history=!1,e.target=a(t,e),e.focus="keep",e.fail=!1,e.headers||(e.headers={}),e.headers[up.protocol.headerize("validate")]=t.getAttribute("name")||":unknown",e.guardEvent=up.event.build("up:form:validate",{field:t,log:"Validating form"}),v(t,e)},L=function(t){var e,n,r,i,s,u;return s=void 0,i=void 0,o.matches(t,"input[type=checkbox]")?t.checked?(s=t.value,i=":checked"):i=":unchecked":o.matches(t,"input[type=radio]")?(n=h(t),r=t.getAttribute("name"),(e=n.querySelector("input[type=radio]"+o.attributeSelector("name",r)+":checked"))?(i=":checked",s=e.value):i=":unchecked"):s=t.value,u=[],C.isPresent(s)?(u.push(s),u.push(":present")):u.push(":blank"),C.isPresent(i)&&u.push(i),u},S=function(t,e){var n,r,i,s;return null==e&&(e={}),s=null!=(i=e.target)?i:t.getAttribute("up-switch"),r=h(t),s||up.fail("No switch target given for %o",t),n=L(t),C.each(o.all(r,s),(function(t){return E(t,n)}))},E=up.mockable((function(t,e){var n,r,i;return e||(e=L(u(t))),(n=t.getAttribute("up-hide-for"))?(n=C.splitValues(n),r=0===C.intersect(e,n).length):(i=(i=t.getAttribute("up-show-for"))?C.splitValues(i):[":present",":checked"],r=C.intersect(e,i).length>0),o.toggle(t,r),t.classList.add("up-switched")})),u=function(t){var e,n;return e=h(t),n=o.all(e,"[up-switch]"),C.find(n,(function(e){var n;return n=e.getAttribute("up-switch"),o.matches(t,n)}))||up.fail("Could not find [up-switch] field for %o",t)},h=function(t){return t.form||o.closest(t,"form, "+up.layer.anySelector())},p=function(){var t;if((t=document.activeElement)&&o.matches(t,i()))return t},d=function(t){return t=up.fragment.get(t),o.matches(t,c())&&!f(t)},f=function(t){return o.matches(t,r.noSubmitSelectors.join(","))},up.on("submit",c,(function(t,n){if(!t.defaultPrevented&&!f(n))return"function"==typeof e&&e(),up.event.halt(t),up.log.muteUncriticalRejection(v(n))})),up.on("change","[up-validate]",(function(t){var n;return n=s(t.target)[0],e=C.abortableMicrotask((function(){return up.log.muteUncriticalRejection(_(n))}))})),up.compiler("[up-switch]",(function(t){return S(t)})),up.on("change","[up-switch]",(function(t,e){return S(e)})),up.compiler("[up-show-for]:not(.up-switched), [up-hide-for]:not(.up-switched)",(function(t){return E(t)})),up.compiler("[up-observe]",(function(t){return m(t)})),up.compiler("[up-autosubmit]",(function(t){return n(t)})),up.on("up:framework:reset",g),{config:r,submit:v,submitOptions:w,isSubmittable:d,observe:m,validate:_,autosubmit:n,fieldSelector:i,fields:s,focusedField:p,switchTarget:E}),up.submit=up.form.submit,up.observe=up.form.observe,up.autosubmit=up.form.autosubmit,up.validate=up.form.validate}.call(this),function(){var t,e,n,r,o,i,s,u,a,l,p,c,h,f,d,m,y,g,v,b;up.feedback=(m=up.util,i=up.element,o=new up.Config((function(){return{currentClasses:["up-current"],navSelectors:["[up-nav]","nav"]}})),h=function(){return o.reset()},t="up-active",e="a, [up-href]",l=function(){return o.navSelectors.join(",")},p=function(t){if(t)return m.normalizeURL(t,{stripTrailingSlash:!0})},a=function(t){return t.upFeedbackURLs||(t.upFeedbackURLs=new up.LinkFeedbackURLs(t))},y=function(t){var n,r;return n={layer:up.layer.get(t)},up.fragment.closest(t,l(),n)?(r=up.fragment.subtree(t,e,n),v(r,n)):b(t,n)},b=function(t,n){var r,o;return o=up.fragment.subtree(t,l(),n),r=m.flatMap(o,(function(t){return i.subtree(t,e)})),v(r,n)},u=function(t){return t.feedbackLocation||t.location},v=function(t,e){var n,r;if(null==e&&(e={}),t.length)return n=e.layer||up.layer.get(t[0]),(r=u(n))?m.each(t,(function(t){var e,n,s,u,l;for(s=a(t).isCurrent(r),n=0,u=(l=o.currentClasses).length;n<u;n++)e=l[n],i.toggleClass(t,e,s);return i.toggleAttr(t,"aria-current","page",s)})):void 0},s=function(t){return i.ancestor(t,e)||t},f=function(e){return s(e).classList.add(t)},d=function(e){return s(e).classList.remove(t)},n=function(t,e){var n;return f(t),n=e(),m.always(n,(function(){return d(t)})),n},r=function(t,e){var r,o;return(o=t.feedback)&&(r=m.isBoolean(o)?t.origin:o),r?(r=up.fragment.get(r),n(r,e)):e()},g=function(t){var e,n;if(n=t.feedbackLocation,e=p(t.location),!n||n!==e)return t.feedbackLocation=e,b(t.element,{layer:t})},c=function(){var t;if((t=up.layer.front).showsLiveHistory())return g(t)},up.on("up:location:changed",(function(t){return c()})),up.on("up:fragment:inserted",(function(t,e){return y(e)})),up.on("up:layer:location:changed",(function(t){return g(t.layer)})),up.on("up:framework:reset",h),{config:o,start:f,stop:d,around:n,aroundForOptions:r,normalizeURL:p})}.call(this),function(){var t,e,n,r,o,i,s,u;up.radio=(u=up.util,e=up.element,t=new up.Config((function(){return{hungrySelectors:["[up-hungry]"],pollInterval:3e4,pollEnabled:"auto"}})),r=function(){return t.reset()},n=function(){return t.hungrySelectors.join(",")},i=function(n,r){var i,s,a,l,p,c,h,f;return null==r&&(r={}),l=null!=(c=null!=(h=r.interval)?h:e.numberAttr(n,"up-interval"))?c:t.pollInterval,f=!1,p=null,r.onQueued=function(t){return p=t},s=function(){if(!f)return o(n)?u.always(up.reload(n,r),a):(up.puts("[up-poll]","Polling is disabled"),a(Math.min(1e4,l)))},a=function(t){if(null==t&&(t=l),!f)return setTimeout(s,t)},i=function(){return f=!0,null!=p?p.abort():void 0},up.on(n,"up:poll:stop",i),a(),i},s=function(t){return up.emit(t,"up:poll:stop")},o=function(e){var n,r;return"auto"===(r=u.evalOption(t.pollEnabled,e))?!document.hidden&&!up.network.shouldReduceRequests()&&(null!=(n=up.layer.get(e))&&"function"==typeof n.isFront?n.isFront():void 0):r},up.compiler("[up-poll]",i),up.on("up:framework:reset",r),{config:t,hungrySelector:n,startPolling:i,stopPolling:s})}.call(this),function(){var t,e,n;up.rails=(n=up.util,t=up.element,e=function(){var t;return window._rails_loaded||window.Rails||(null!=(t=window.jQuery)?t.rails:void 0)},n.each(["method","confirm"],(function(n){var r,o;return r="data-"+n,o="up-"+n,up.macro("a["+r+"]",(function(n){if(e()&&up.link.isFollowable(n))return t.setMissingAttr(n,o,n.getAttribute(r)),n.removeAttribute(r)}))})))}.call(this),function(){up.framework.boot()}.call(this)}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var i=e[r]={exports:{}};return t[r].call(i.exports,i,i.exports,n),i.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";var t=n(177);n.n(t)().util.memoize((function(){}))})()})();
//# sourceMappingURL=index.js.map